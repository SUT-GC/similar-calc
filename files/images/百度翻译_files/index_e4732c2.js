;/*!translation:widget/translate/christmas/christmas.js*/
define("translation:widget/translate/christmas/christmas",function(){var n=$("#chri-user-container"),i=$("#chri-prize-container"),t=!1,s={wonUsers:[],init:function(){"1"===window.isActivityOpen&&(this.renderIcon(),this.bindEvent(),this.initPrize())},renderIcon:function(){var n=$(".logo");n.css("position","relative"),$('<img src="/static/translation/widget/translate/christmas/img/icon_c316909.gif" srcset="/static/translation/widget/translate/christmas/img/iconretina_e9cb11b.gif 2x" id="chri-icon">').appendTo(n)},initPrize:function(){function n(){var n=i.find("li").first();n.animate({width:0},1e3,"swing",function(){n.appendTo(i),n.removeAttr("style")})}setInterval(n,4e3)},initWonUsers:function(i){function s(){var i=n.find("li").first();i.slideUp(function(){i.appendTo(n),i.removeAttr("style")})}this.wonUsers=i&&0!==i.length?i:[{username:"ya*****",prizename:"龙猫移动电源"},{username:"灿若***",prizename:"熊孩子集线器"}];for(var e=0;e<this.wonUsers.length;e++)$("<li><span>"+this.wonUsers[e].username+'</span><span class="chri-won-info-prize">'+this.wonUsers[e].prizename+"</span></li>").appendTo(n);setInterval(s,3e3),t=!0},initWonUserList:function(){var n=this;$.ajax({url:"/appcj",type:"POST",dataType:"json",data:{req:"hit_list"},success:function(i){0===i.errno?n.initWonUsers(i.data):n.initWonUsers()},error:function(){n.initWonUsers()}})},bindEvent:function(){$("#chri-icon").on("click",function(n){n.stopPropagation(),_hmt.push(["_trackEvent","首页","点击圣诞运营ICON"]),t||s.initWonUserList(),s.showMessageBox()}),$("#chri-close").on("click",function(n){n.stopPropagation(),$("#overlay-bg").hide()})},showMessageBox:function(){$("#overlay-bg").show()}};$(function(){s.init()})});
;/*!translation:widget/translate/output/mouseover.js*/
define("translation:widget/translate/output/mouseover",function(t,e){var i=(t("translation:widget/translate/common/environment"),{overTarget:null,isOverFlag:!1,isover:function(t){var e,i=$(t.target),s=i.offset(),o=s.left,n=s.top,r=t.text||i.attr("data-hover-tip-text"),a=$("#hover-tips"),l=i.attr("data-hover-tip-offset"),h=0,v=7;i.parents(".sample-output").length>0||i.parents("#zonedword-wrap").length>0||(this.overTarget=t.target,this.isOverFlag=!0,l&&(e=l.split("|"),2===e.length?(h=parseInt(e[0],10),v=parseInt(e[1],10)):1===e.length&&(h=parseInt(e[0],10))),a.show().css({visibility:"hidden"}).find(".tips-content").text(r),o=o-a.outerWidth()/2+i.outerWidth()/2+h,n=n-a.outerHeight()/2-i.outerHeight()/2-v,a.offset({top:n,left:o}).css({visibility:"visible"}).show(),(i.hasClass("setting-btn")||i.hasClass("collection-btn"))&&$("#hover-tips").css("top",-75))},isout:function(){$("#hover-tips").find(".tips-content").text(""),$("#hover-tips").hide(),this.isOverFlag=!1,this.overTarget=null}});e.isover=function(t){i.isover(t)},e.isout=function(){i.isout()},e.getOverTarget=function(){return i.overTarget}});
;/*!translation:widget/translate/dictionary/simplemeans.js*/
define("translation:widget/translate/dictionary/simplemeans",function(t,e){var n=(t("translation:widget/translate/common/environment"),t("translation:widget/common/tools/template")),a=t("translation:widget/translate/common/soundURIGenerator"),o=t("translation:widget/translate/output/mouseover");n.helper("uriComponentTrimAndEncode",function(t){return encodeURIComponent($.trim(t))});var i,s,r,u=!0,p=8,c={buildSimpleMeans:function(t){{var e,a=t.data,o={};t.to}o.tplData=a;var i=$(".select-from-language .language-selected").attr("data-lang"),s=$(".select-to-language .language-selected").attr("data-lang");if(("en"===i&&"th"===s||"th"===i&&"en"===s)&&(o.tplData.show_th_detail=!0),o.tplData.show_sound=!1,("en"===i||"zh"===i)&&(o.tplData.show_sound=!0),a.tags){var r=[];a.tags.core&&a.tags.core.length>0&&""!==a.tags.core[0]&&(r=r.concat(a.tags.core)),a.tags.other&&a.tags.other.length>0&&""!==a.tags.other[0]&&(r=r.concat(a.tags.other)),r.length>0&&(r=r.slice(0,6),o.tplData.coreTags=r.join(" / "))}"zh"===i&&"en"===s&&(o.tplData.isZh2En=!0,_hmt.push(["_trackEvent","首页","Web中英词典释义卡片展现次数"])),o.tplData.symbols?e=n("tplSimplemeans",o):o.tplData.content&&(e=n("tplOtherSimplemeans",o)),$(".dictionary-wrap").html(e),"英"!==$(".phonetic-transcription span").eq(0).text()&&$(".simple-dict").addClass("simple-dict-ztoe"),$(".simple-dict .op-repeat").length>0&&(_hmt.push(["_trackEvent","首页","web端复读按钮出现次数"]),this.bindRepeatEvents()),_hmt.push(["_trackEvent","首页","web端词典卡片出现次数"])},bindEvents:function(){var t=this;$(".translate-wrap").on("click",".dictionary-wrap .op-sound",function(){t.timer&&clearTimeout(t.timer),t.clickSound({target:this})}).on("mouseover",".dictionary-wrap .op-sound",function(){t.isoverSound({target:this})}).on("mouseout",".dictionary-wrap .op-sound",function(){t.isoutSound()}).on("click",".dictionary-wrap .op-repeat",function(){t.repeatSound({target:this})}).on("click",".dictionary-wrap .dict-second-trans",function(){_hmt.push(["_trackEvent","首页","Web中英词典卡片发起二次翻译次数"])}).off("click.sound").on("click.sound","a",function(){var e=$(this);(e.attr("href").match(/[\.\/]/g)||e.hasClass("collection-btn"))&&t.shutdownAudio()})},clickSound:function(t){var e=$(t.target);this.judgeStopRepeat();var n=a.generateURI({lan:e.attr("data-sound-lan"),text:e.attr("data-sound-text")});BTPM.setUrl(n);var o;e.addClass("op-sound-active"),o&&clearTimeout(o),o=setTimeout(function(){e.removeClass("op-sound-active")},2e3),_hmt.push(["_trackEvent","首页","web端简明释义TTS"])},repeatSound:function(t){var e=this,n=$(t.target);if(n.hasClass("op-repeat-running"))o.isover({target:t.target,text:"复读"}),e.shutdownRepeat(),_hmt.push(["_trackEvent","首页","web端复读按钮停止点击"]);else{if(e.shutdownRepeat(),p=8,n.addClass("op-repeat-running"),r=a.generateURI({lan:n.attr("data-sound-lan"),text:n.attr("data-sound-text")}),BTPM.setUrl(r),p--,o.isover({target:t.target,text:"停止复读"}),n.attr("data-hover-tip-text","停止复读"),"IE"===BTPM.stage){var c=n.siblings("b").text();if(c&&c.length>0){c=c.match(/\[(.*)\]/)[1];var d=e.getRepeatDuration(c);i=setInterval(function(){return 1>p?void e.shutdownRepeat():(BTPM.setUrl(r),void p--)},d)}}else u=!0,$(BTPM).off("ended.repeating").on("ended.repeating",function(){return u?1>p?void e.shutdownRepeat():void(s=setTimeout(function(){BTPM.setUrl(r),p--},1200)):void 0});_hmt.push(["_trackEvent","首页","web端复读按钮播放点击"])}},shutdownRepeat:function(t){$(".op-repeat").removeClass("op-repeat-running").attr("data-hover-tip-text","复读"),t&&t.nopause||BTPM.doPause(),"IE"===BTPM.stage?clearInterval(i):(clearTimeout(s),u=!1,$(BTPM).off("ended.repeating"))},getRepeatDuration:function(t){t=t.replace(/[\s:ˌ']|(\(\w*\))/g,"");var e,n=t.length;return e=4>=n?2e3:n>5&&10>=n?3e3:n>10&&18>=n?4e3:5e3},bindRepeatEvents:function(){var t=this;$(".container").off("click.repeatthing").on("click.repeatthing","a",function(){var e=$(this);$(".op-repeat").hasClass("op-repeat-running")&&!e.hasClass("op-repeat")&&((e.attr("href").match(/[\.\/]/g)||e.hasClass("collection-btn"))&&t.shutdownRepeat(),_hmt.push(["_trackEvent","首页","web端其他方式停止复读"]))})},judgeStopRepeat:function(){this.isNotInRepeating()||(this.shutdownRepeat({nopause:!0}),_hmt.push(["_trackEvent","首页","web端发音按钮停止复读"]))},translateStopRepeat:function(){return this.isNotInRepeating()?!1:(this.shutdownRepeat(),_hmt.push(["_trackEvent","首页","web端重新翻译停止复读"]),!0)},isoverSound:function(t){var e=this;this.timer=setTimeout(function(){e.clickSound({target:t.target})},500)},isoutSound:function(){clearTimeout(this.timer)},isNotInRepeating:function(){return!$(".op-repeat")||!$(".op-repeat").hasClass("op-repeat-running")},shutdownAudio:function(){BTPM.doPause()}};e.buildSimpleMeans=function(t){c.buildSimpleMeans(t)},e.bindEvents=function(){c.bindEvents()},e.judgeStopRepeat=function(){c.judgeStopRepeat()},e.translateStopRepeat=function(){c.translateStopRepeat()},e.shutdownAudio=function(){c.shutdownAudio()}});
;/*!translation:widget/translate/details/collins.js*/
define("translation:widget/translate/details/collins",function(t,e){var n=t("translation:widget/common/tools/template"),o=t("translation:widget/translate/dictionary/simplemeans"),a=t("translation:widget/translate/common/soundURIGenerator"),i={buildCollins:function(t){var e=t.data,o={};if(e.menus)for(var a=e.menus.length,i=0;a>i;i++){var r=e.menus[i];if(r.entry)for(var s=r.entry.length,u=1,l=0;s>l;l++){var m=r.entry[l];"mean"===m.type&&m.value&&m.value.length>0&&(m.idxid=u++)}}else if(e.entry)for(var c=e.entry.length,u=1,i=0;c>i;i++){var r=e.entry[i];"mean"===r.type&&r.value&&r.value.length>0&&(r.idxid=u++)}o.tplData=e;var d=n("tplCollins",o);$("#transDetailsCont").append(d),_hmt.push(["_trackEvent","首页","Web柯林斯词典Tab展现量"])},bindEvents:function(){var t=this;$(".translate-wrap").on("mouseover",".mean-gramar",function(){t.mouseOverGramear({target:this})}).on("mouseout",".mean-gramar",function(){t.mouseOutGramear()}).on("click",".collins-item .op-sound",function(){t.clickSound({target:this})}).on("mouseover",".collins-item .op-sound",function(){t.mouseOverSound({target:this})}).on("mouseout",".collins-item .op-sound",function(){t.mouseOutSound()})},mouseOverGramear:function(t){var e=$(t.target),n=e.position(),o=n.left,a=n.top+20;e.parent().parent().find(".mean-gramar-info").css({left:o,top:a}).show()},mouseOutGramear:function(){$(".mean-gramar-info").hide()},clickSound:function(t){o.judgeStopRepeat(),this.timer&&clearTimeout(this.timer);var e=$(t.target),n="en",i=e.parents("p").text(),r=a.generateURI({lan:n,text:encodeURIComponent($.trim(i))});BTPM.setUrl(r);var s;e.addClass("op-sound-active"),s&&clearTimeout(s),s=setTimeout(function(){e.removeClass("op-sound-active")},2e3),_hmt.push(["_trackEvent","首页","Web柯林斯词典Tab下发音按钮的发音次数"])},mouseOverSound:function(t){var e=this;this.timer=setTimeout(function(){e.clickSound({target:t.target})},500)},mouseOutSound:function(){clearTimeout(this.timer)}};$(function(){i.bindEvents()}),e.buildCollins=function(t){i.buildCollins(t)}});
;/*!translation:widget/translate/details/hotLinkMiddle.js*/
define("translation:widget/translate/details/hotLinkMiddle",function(t,e){var i={init:function(){$(".hot-link-middle").length>0&&(_hmt.push(["_trackEvent","首页","web端中部文字链广告展现"]),this.bindEvents())},bindEvents:function(){$(".hot-link-middle a").on("click",function(){_hmt.push(["_trackEvent","首页","web端中部文字链广告点击"])})},setNegative:function(){$(".dictionary-output").length>0||$(".keywords-outter").length>0||$(".hot-link-middle").addClass("hot-link-result-editing")},removeNegative:function(){$(".hot-link-middle").removeClass("hot-link-result-editing")}};$(function(){i.init()}),e.setNegative=i.setNegative,e.removeNegative=i.removeNegative});
;/*!translation:widget/translate/details/detailsNav.js*/
define("translation:widget/translate/details/detailsNav",function(t,a){var e,n,i=t("translation:widget/common/tools/template"),s={buildNav:function(t){var a=t.res;a.from=t.from,a.to=t.to;var n=i("tplDetailsNav",a);return $("#transDetailsNav").html(n),0===$(".details-nav-li").size()?($("#detailsNav").hide(),void(e=0)):(e=$("#detailsNav li:first"),e.addClass("details-nav-cur"),void this.initNav())},bindEvents:function(){var t=this;$(document).on("click","#navsearchAgain",function(){var t,a;$("html, body").animate({scrollTop:"0px"},500);var e=document.getElementById("baidu_translate_input");if("undefined"!=typeof e.createTextRange){var n=e.createTextRange();t=0,a=e.value.length,n.moveStart("character",0),n.moveEnd("character",0),n.collapse(!0),n.moveEnd("character",a),n.moveStart("character",t),n.select()}else"undefined"!=typeof e.setSelectionRange&&(t=0,a=e.value.length,e.setSelectionRange(t,a));setTimeout(function(){e.focus()},500),_hmt.push(["_trackEvent","首页","web端点击继续查词"])}),$(window).on("scroll",function(){t.onScrollIng()}),$(window).resize(function(){$("#navsearchAgain").css("margin-right",.45*$(document).width())}),$(document).on("click",".details-nav-li",function(){t.clickNavItem({target:this})}),this.locateTab()},initNav:function(){n=$("#detailsNav").offset().top-18},onScrollIng:function(){if(e)if(n>=350&&$(window).scrollTop()>=n){$("#transDetailsCont").addClass("tab-fixed"),$("#navsearchAgain").css("margin-right",.45*$(document).width()).show(),$("#detailsNav").addClass("details-nav-fixed");var t=$(window).height();$("#transDetailCont").css({"min-height":t-285+"px"}),$("#detailsNav").css({"padding-left":$(".main .inner").offset().left+"px"})}else $("#detailsNav").css({"padding-left":0}),$("#navsearchAgain").hide(),$("#transDetailsCont").removeClass("tab-fixed"),$("#detailsNav").removeClass("details-nav-fixed")},clickNavItem:function(t){var a=t.target;if(!$(a).hasClass("details-nav-cur")){var i=$(a).attr("data-dict"),s="点击"+i+"TAB";_hmt.push(["_trackEvent","首页",s]);var l=$(window).height();e.removeClass("details-nav-cur"),$(a).addClass("details-nav-cur"),e=$(a),this.switchTab(e),$("#transDetailsCont").css({"min-height":l-285+"px"}),$(window).scrollTop()>n&&$("html, body").animate({scrollTop:n},0)}},switchTab:function(t){var a=$(t).attr("data-ref"),e="#cont-"+a;$("#transDetailsCont .details-cont-item").hide(),$(e).show()},locateTab:function(){function t(t){var a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),e=window.location.search.substring(1).match(a);return null!==e?e[2]:null}var a=t("mod"),e=["edict","phrase","sample","baike","synant","zdict","collins","hanying","general"];$.inArray(a,e)>=0&&setTimeout(function(){$("html, body").animate({scrollTop:n}),$("#dict-tab-"+a).trigger("click")},800)}};$(function(){s.bindEvents()}),a.buildNav=function(t){s.buildNav(t)}});
;/*!translation:widget/translate/details/sample.js*/
define("translation:widget/translate/details/sample",function(t,e){var a,n,l,i,s=t("translation:widget/common/tools/template"),o=t("translation:widget/translate/dictionary/simplemeans"),r=t("translation:widget/translate/common/soundURIGenerator"),u=t("translation:widget/translate/common/environment"),g=["《柯林斯高阶英汉双解学习词典》","《汉英大词典》","百度翻译例句库"],p={buildSample:function(t){var e=t.data;a=t.from,n=t.to,i=t.query;var o={};if(o.tplData={},o.tplData.to_lang=n,e["double"]=e["double"].replace(/\\'/g,"'"),e.single=e.single.replace(/\\'/g,"'"),e["double"]=e["double"].replace(/[‘|’]/g,"'"),e.single=e.single.replace(/[‘|’]/g,"'"),e["double"]){var r=this.getDoubleSample(e["double"]);o.tplData["double"]=r["double"],o.tplData.senData=r.senData,l=o}if(e.single){e.single=$.parseJSON(e.single),e.senData2=[];for(var u=0,g=e.single.length;g>u;u++){var p,d="";"zh"===n?p=e.single[u][0]:"en"===n&&(p=e.single[u][1]);for(var m=0,h=p.length;h>m;m++)d+=p[m][0],p[m][3]&&(d+=p[m][3]);d=encodeURIComponent(d),e.senData2[u]=d;var c=e.single[u][1];if(/^http\:\/\//.test(c)){c=c.replace(/^http\:\/\//,"");var v=c.indexOf("/");e.single[u][2]=v>0?c.substr(0,v):c}else e.single[u][2]=e.single[u][1],e.single[u][1]="#"}o.tplData.single=e.single,o.tplData.senData2=e.senData2}if(e.tag&&e.tag instanceof Array){var f=e.tag.length;f&&f>1&&(o.tplData.tag=e.tag,_hmt.push(["_trackEvent","首页","web端双语例句子TAB出现"]))}var b=s("tplSample",o);$("#transDetailsCont").append(b),_hmt.push(["_trackEvent","首页","web端例句展现次数"])},getDoubleSample:function(t){var e={};e["double"]=$.parseJSON(t),e.senData=[];for(var a=!0,l=0,i=e["double"].length;i>l;l++){var s,o="";"zh"===n?s=e["double"][l][0]:"en"===n&&(s=e["double"][l][1]);for(var r=0,u=s.length;u>r;r++)o+=s[r][0],s[r][4]&&(o+=s[r][4]);o=encodeURIComponent(o),e.senData[l]=o,a&&$.inArray(e["double"][l][2],g)<0&&(e["double"][l].isFirstNetSt=!0,a=!1);var p=e["double"][l][2];if(/^https?\:\/\//.test(p)){p=p.replace(/^https?\:\/\//,"");var d=p.indexOf("/");e["double"][l][3]=d>0?p.substr(0,d):p}else e["double"][l][3]=e["double"][l][2],e["double"][l][2]="#"}return e},bindEvents:function(){var t=this;$(".translate-wrap").on("click",".item-sample .op-sound",function(){t.clickSound({target:this})}).on("mouseover",".item-sample .op-sound",function(){t.mouseOverSound({target:this})}).on("mouseout",".item-sample .op-sound",function(){t.mouseOutSound()}).on("mouseover",".sample-wrap span[high-light-id]",function(){t.mouseOverHighlight({target:this})}).on("mouseout",".sample-wrap span[high-light-id]",function(){t.mouseOutHighlight({target:this})}).on("click",".sample-tagitem",function(){t.clickTagItem({target:this})}).on("dblclick.sample",".sample-wrap .sample-source, .sample-wrap .sample-target",function(){t.getHighlightQueryAndSave($(this))})},clickSound:function(t){o.judgeStopRepeat(),this.timer&&clearTimeout(this.timer);var e=$(t.target),a=r.generateURI({lan:e.attr("data-sound-lan"),text:e.attr("data-sound-text")});BTPM.setUrl(a);var n;e.addClass("op-sound-active"),n&&clearTimeout(n),n=setTimeout(function(){e.removeClass("op-sound-active")},2e3),_hmt.push(["_trackEvent","首页","web端点击双语例句TTS"])},mouseOverSound:function(t){var e=this;this.timer=setTimeout(function(){e.clickSound({target:t.target})},500)},mouseOutSound:function(){clearTimeout(this.timer)},mouseOverHighlight:function(t){var e=$(t.target),a=e.attr("high-light-id");if(""!==a){var n=e.parent().parent();n.find("span").each(function(){$(this).attr("high-light-id")===a&&$(this).addClass("high-light-bg")})}},mouseOutHighlight:function(t){var e=$(t.target),a=e.parent().parent();a.find("span").removeClass("high-light-bg")},clickTagItem:function(t){var e=$(t.target);if(!e.hasClass("sample-current")){if(e.addClass("sample-current").siblings().removeClass("sample-current"),e.hasClass("sample-all")){var a=s("tplSampleTagcont",l);$("#transDetailsCont .double-sample").html(a)}else{var n=e.text();this.getTagSampleDataAndRender({tag:n})}_hmt.push(["_trackEvent","首页","web端点击双语例句子TAB"])}},getTagSampleDataAndRender:function(t){var e=this,l={from:a,to:n,query:i,stTag:t.tag};$.ajax({url:"/transextra",data:l,type:"POST",dataType:"JSON",success:function(t){if(0===t.errno&&t.data&&t.data.st){var a=t.data.st,l={};l.tplData=e.getDoubleSample(a),l.tplData.to_lang=n;var i=s("tplSampleTagcont",l);$("#transDetailsCont .double-sample").html(i)}}})},getHighlightQueryAndSave:function(t){var e="";$.each(t.find(".high-light-bg"),function(t,a){e+=$(a).text()});var a="sample";u.set("dbClickHighlightZone",{query:$.trim(e),area:a})}};$(function(){p.bindEvents()}),e.buildSample=function(t){p.buildSample(t)}});
;/*!translation:widget/translate/details/zhenDict.js*/
define("translation:widget/translate/details/zhenDict",function(t,a){var i=t("translation:widget/common/tools/template"),n={buildDict:function(t){var a=t.data,n={};n.tplData=a;var e=i("tplZhenDict",n);$("#transDetailsCont").append(e)}};a.buildDict=function(t){n.buildDict(t)}});
;/*!translation:widget/translate/details/general.js*/
define("translation:widget/translate/details/general",function(e,a){var t={setGeneralGap:function(e){var a=$("#cont-general");if(a){a.show();var t=[],n=e.word_name,r=a.find(".item-word");$.each(r,function(){var e=$(this);t.push(e.width()),e.text().toLowerCase()===n.toLowerCase()&&e.addClass("item-current")});var i=Math.max.apply(Math,t);a.find(".item-mean").css("left",i+58),a.hide()}}};a.setGeneralGap=function(e){t.setGeneralGap(e)}});
;/*!translation:widget/translate/details/detailsCont.js*/
define("translation:widget/translate/details/detailsCont",function(a,t){var i=a("translation:widget/common/tools/template"),e=a("translation:widget/translate/details/sample"),n=a("translation:widget/translate/details/collins"),l=a("translation:widget/translate/details/zhenDict"),d=a("translation:widget/translate/details/general"),s={buildCont:function(a){a.hasLiju&&e.buildSample({data:a.res.liju_result,from:a.from,to:a.to,query:a.query});var t=a.res.dict_result;if(a.hasDetailMeans&&(t.collins?n.buildCollins({data:t.collins}):t.synthesize_means&&l.buildDict({data:t.synthesize_means})),t.cizu||t.cizuxiyu){var i;t.cizu&&t.cizu.length>0?i=t.cizu:t.cizuxiyu&&t.cizuxiyu.cizu.length>0&&(i=t.cizuxiyu.cizu),i&&this.buildCizu({data:i})}(t.tongyici||t.fanyici)&&this.buildTongFan({data:{tongyici:t.tongyici,fanyici:t.fanyici}}),t.zdict&&this.buildZdict({data:t.zdict}),t.edict&&this.buildEdict({data:t.edict}),t.baike_means&&0!==t.baike_means.length&&this.buildBaike({data:t.baike_means}),t.general_knowledge&&t.general_knowledge.similar_words&&this.buildGeneral({data:t.general_knowledge}),$("#transDetailsCont .details-cont-item:first").show()},buildCizu:function(a){var t=a.data,e={};e.tplData=t;var n=i("tplCizudict",e);$("#transDetailsCont").append(n)},buildTongFan:function(a){var t=a.data,e={};e.tplData=t;var n=i("tplSynant",e);$("#transDetailsCont").append(n)},buildZdict:function(a){var t=a.data,e={};e.tplData={},e.tplData.word=t.word,t.simple?e.tplData.simple=t.simple:t.detail&&t.detail.chenyu?e.tplData.chenyu=t.detail.chenyu:t.detail&&t.detail.means&&(e.tplData.simple=t.detail);var n=i("tplChinesemean",e);$("#transDetailsCont").append(n)},buildEdict:function(a){var t=a.data,e={};e.tplData=t.item;var n=i("tplEnglishmean",e);$("#transDetailsCont").append(n)},buildBaike:function(a){var t=a.data,e={};e.tplData=t;var n=i("tplBaikemean",e);$("#transDetailsCont").append(n)},buildGeneral:function(a){var t=a.data,e={};e.tplData=t;var n=i("tplGeneralmean",e);$("#transDetailsCont").append(n),d.setGeneralGap(t)}};t.buildCont=function(a){s.buildCont(a)}});
;/*!translation:widget/translate/details/details.js*/
define("translation:widget/translate/details/details",function(t,a){var i=t("translation:widget/common/tools/template");t("translation:widget/translate/details/hotLinkMiddle");var e=t("translation:widget/translate/details/detailsNav"),n=t("translation:widget/translate/details/detailsCont"),s={init:function(t){var a=i("tplDetails");$("#transDetails").html(a),e.buildNav({res:t.data,from:t.from,to:t.to}),n.buildCont({res:t.data,hasLiju:t.hasLiju,hasDetailMeans:t.hasDetailMeans,from:t.from,to:t.to,query:t.query})}};a.init=function(t){s.init(t)}});
;/*!translation:widget/translate/input/sameHeightHandler.js*/
define("translation:widget/translate/input/sameHeightHandler",function(t,e){var i={};i.dom={$inputWrap:$(".input-wrap"),$outputWrap:$(".output-wrap"),$intputContent:$(".textarea-wrap")},i.sameHeight=function(){var t=this.dom;t.$outputContent=t.$outputWrap.find(".ordinary-wrap .output-bd");var e="padding-bottom";if(t.$intputContent.css(e,0),t.$outputContent.css(e,0),t.$outputWrap.removeAttr("style"),$(".output-blank").get(0)&&!$(".dictionary-wrap").get(0))return void t.$outputWrap.outerHeight(t.$inputWrap.outerHeight());var i=52,a=56,r=t.$intputContent.outerHeight()+i,u=t.$outputContent.outerHeight()+a;if(!(134>r&&134>u)){var n=r-u;switch(!0){case n>0:t.$outputContent.css(e,n+"px");break;case 0>n:t.$intputContent.css(e,-n+"px")}}},i.sameHeightWhileEditingResult=function(){var t=$(".input-wrap"),e=$(".output-wrap"),i=e.find(".textarea-wrap"),a=t.find(".textarea-wrap"),r="padding-bottom";if(a.css(r,0),i.css(r,0),e.removeAttr("style"),$(".output-blank").get(0)&&!$(".dictionary-wrap").get(0))return void e.outerHeight(t.outerHeight());var u=a.parents(".trans-input-wrap").outerHeight(),n=i.parents(".ordinary-wrap").outerHeight();if(!(134>u&&134>n)){var o=$("#baidu_translate_input").outerHeight(),p=$("#baidu_translate_output_edit").outerHeight(),s=e.find(".output-bd").outerHeight();if(n>u){var g=u-n;82>o&&(g-=82-o)}else if(u>n){var g=u-n;78>p&&(g+=78-p),112>s&&(g+=112-s)}switch(!0){case g>0:i.css(r,g+"px");break;case 0>g:a.css(r,-g+"px")}}},e.sameHeight=function(){var t=$(".output-wrap .textarea-wrap").length>0;return t?void i.sameHeightWhileEditingResult():void i.sameHeight()},e.sameHeightWhileEditingResult=function(){i.sameHeightWhileEditingResult()}});
;/*!translation:widget/translate/output/transclipboard.js*/
define("translation:widget/translate/output/transclipboard",function(t,o){var e,a,n=(t("translation:widget/translate/common/environment"),t("translation:widget/translate/output/mouseover")),r=!1,i=navigator.userAgent,c=!0;if(i.indexOf("MSIE 8.0")>0?r=!0:e=t("translation:widget/translate/common/tools/ZeroClipboard"),navigator.plugins&&navigator.plugins.length){var s=navigator.plugins["Shockwave Flash"];s||(c=!1)}else if(window.ActiveXObject)try{var p=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");l||u||p||(c=!1)}catch(v){c=!1}var d={init:function(){if(r)return void this.bindIe8Events();if(c===!1)return void $(".ordinary-wrap .op-copy").off("click").on("click",function(){alert("当前浏览器暂不支持，请手动复制")});var t=$("#clip-swf-src").attr("src");e.config({swfPath:t,forceHandCursor:!0,hoverClass:"op-copy-mouseover"});var o=$(".ordinary-wrap .op-copy")[0];a=new e(o),a.setText(""),this.bindCommonBrowserEvents(),this.zclipTran=a},bindCommonBrowserEvents:function(){var t=this;a.on("copy",function(){t.execCopying()}),a.on("aftercopy",function(){t.aftercopy()})},execCopying:function(){var t=this.getCopyedText();a.setText(t),_hmt.push(["_trackEvent","首页","web端点击复制按钮"])},aftercopy:function(){var t=$(".ordinary-wrap .op-copy"),o=t[0];t.addClass("op-copy-hover"),setTimeout(function(){t.removeClass("op-copy-hover");var o=n.getOverTarget();o&&$(o).hasClass("op-copy")&&!$(o).hasClass("op-copy-mouseover")&&n.isout()},2e3);var e=$(".op-double-lang span"),a=e.hasClass("op-checked")?"已复制双语结果":"已复制";n.isover({target:o,text:a})},getCopyedText:function(){var t,o=$(".op-double-lang span").hasClass("op-checked")?!0:!1;t=$(".output-wrap .output-bd").find(o?".ordinary-output":".target-output");var e="";return t.each(function(){e+=$.trim($(this).html())+"<br />"}),"ara"===$(".select-to-language .language-selected").attr("data-lang")&&(e=e.replace(/(<\/span>)/gi,"&nbsp;$1")),e=e.replace(/<(?!br \/)[^<>]*>/gi,"").replace(/<br \/>/gi,"\r\n"),e=e.replace(/&nbsp;/gim," "),e=e.replace(/&gt;/gim,">"),e=e.replace(/&lt;/gim,"<"),e=e.replace(/\r\n$/gim,""),e=$.trim(e)},bindIe8Events:function(){var t=this,o=$(".ordinary-wrap .op-copy");o.on("click",function(){var o=t.getCopyedText();window.clipboardData&&(window.clipboardData.setData("text",o),t.aftercopy(),_hmt.push(["_trackEvent","首页","web端点击复制按钮"]))}).on("mouseover",function(){o.addClass("op-copy-mouseover")}).on("mouseout",function(){o.removeClass("op-copy-mouseover")})},destroy:function(){this.zclipTran&&this.zclipTran.destroy()}};o.init=function(){d.init()},o.zclipTran=function(){return d.zclipTran}});
;/*!translation:widget/translate/output/jpHandler.js*/
define("translation:widget/translate/output/jpHandler",function(t,e){var n=(t("translation:widget/translate/common/environment"),t("translation:widget/translate/common/string")),a={execData:function(t){this.hasJpPinyin=!1;for(var e=t.length,n=0;e>n;++n)if(t[n].result&&t[n].result.length>0){this.hasJpPinyin=!0;break}},getNewJpData:function(t){for(var e=[],a=t.length,r=0;a>r;++r){var s,i=0,l=t[r].src,u=n.getByte(l);e[r]=[];for(var o=0,c=t[r].result.length;c>=o;o++){var p,f;if(o===c){if(p=u,p!==i){var h=n.cutByByte(l,i,p),g={src:h,dst:""};e[r].push(g)}}else{if(s=0===r?t[r].result[o][2][0]:t[r].result[o][4][0],p=parseInt(s.split("|")[0],10),f=parseInt(s.split("|")[1],10)+p,p!==i){var h=n.cutByByte(l,i,p),g={src:h,dst:""};e[r].push(g)}var v={src:t[r].result[o][6],dst:t[r].result[o][1]};e[r].push(v),i=f}}}return e}};e.execData=function(t){a.execData(t)},e.getNewJpData=a.getNewJpData,e.hasJpPinyin=function(){return a.hasJpPinyin}});
;/*!translation:widget/translate/output/lmHandler.js*/
define("translation:widget/translate/output/lmHandler",function(t,a){var n=(t("translation:widget/translate/common/environment"),{execData:function(t){this.hasLmData=!1,this.lmDataNew=[];var a=[],n=0,r=t.length;a[n]=[];for(var e=0;r>e;e++)" "!==t[e].src_str&&(" "!==t[e].trg_str&&(this.hasLmData=!0),"\n"===t[e].src_str?a[++n]=[]:a[n].push({src:t[e].src_str,trg:t[e].trg_str}));this.lmDataNew=a}});a.execData=function(t){n.execData(t)},a.getNewLmData=function(){return n.lmDataNew},a.hasLmData=function(){return n.hasLmData}});
;/*!translation:widget/translate/output/editResults.js*/
define("translation:widget/translate/output/editResults",function(t,i){var e=t("translation:widget/common/tools/template"),a=t("translation:widget/common/cookie"),n=t("translation:widget/translate/input/sameHeightHandler"),o=t("translation:widget/translate/details/hotLinkMiddle"),d=t("translation:widget/common/util"),u={bindEvents:function(){var t=this;$(".output-wrap").on("click",".op-edit",function(){t.clickEditBtn()}).on("click",".edit-revoke",function(){t.clickRevokeBtn()}).on("click",".edit-confirm-able",function(){t.clickEditConfirm()}).on("input","#baidu_translate_output_edit",function(){t.onEditInput()}).on("keyup","#baidu_translate_output_edit",function(){t.onEditInput()}).on("cut","#baidu_translate_output_edit",function(){t.onEditInput()}).on("paste","#baidu_translate_output_edit",function(){t.onEditInput()}).on("click",".edit-cancel",function(){t.cancelEdit()}).on("click",".output-textarea-clear-btn",function(){t.clearEdit()})},clickEditBtn:function(){this.buildEditWrap(),this.afterBuildEdit(),o.setNegative(),_hmt.push(["_trackEvent","首页","web端修改此翻译图标"])},clickEditConfirm:function(){for(var t=$(".output-wrap"),i="",e=$("#original-output").find("p"),a=0;a<$(e).size();a++)i+=$(e).eq(a).text()+"\r\n";var n=$(t).find("#baidu_translate_output_edit").val(),d=n.split("\n");$("#original-output").addClass("has-edited");var u={action:"update",from:$(".select-from-language .language-selected").attr("data-lang"),to:$(".select-to-language .language-selected").attr("data-lang"),query:$("#baidu_translate_input").val(),result:n,oldresult:i};$.ajax({url:"countactivity",type:"POST",dataType:"json",data:u,success:function(){}}),this.afterEdit({value:d,isModify:1}),o.removeNegative(),_hmt.push(["_trackEvent","首页","web端确认修改"])},clickRevokeBtn:function(){for(var t=[],i=$("#original-output").find("p"),e=0;e<i.size();e++)t.push($(i).eq(e).text());this.revokeEdit({value:t}),o.removeNegative(),_hmt.push(["_trackEvent","首页","web端撤销修改"])},onEditInput:function(){var t=$(".output-wrap").find(".target-output").text(),i=$("#baidu_translate_output_edit"),e=$(".output-wrap");this.afterBuildEdit(),i.val()?i.val()!==t?e.find(".edit-confirm").addClass("edit-confirm-able"):i.val()===t&&e.find(".edit-confirm").removeClass("edit-confirm-able"):e.find(".edit-confirm").removeClass("edit-confirm-able")},cancelEdit:function(){for(var t=[],i=$(".output-wrap").find(".target-output"),e=0;e<i.size();e++)t.push(i.eq(e).text());this.afterEdit({value:t}),o.removeNegative(),_hmt.push(["_trackEvent","首页","web端取消"])},clearEdit:function(){$("#baidu_translate_output_edit").val(""),this.afterBuildEdit();var t=$("#baidu_translate_output_edit");t[0].focus&&t[0].focus(),this.setHeightFromRight(),this.onEditInput()},buildEditWrap:function(){var t=$(".output-wrap"),i=t.find(".ordinary-wrap"),a=i.find(".output-bd"),n=i.find(".output-hd");t.find(".source-output").hide(),t.find(".target-output").hide(),t.find(".luoma-output").length>0&&t.find(".luoma-output").hide(),t.find(".japan-output").length>0&&t.find(".japan-output").hide(),n.hide(),$("embed").each(function(){$(this).attr("id").indexOf("Clipboard")&&$(this).hide()}),i.css("background-color","#fff");var o=e("tplEditOutputTextarea");a.append(o),$("#baidu_translate_output_edit").focus();for(var d=t.find(".target-output"),u=d.size(),r="",p=0;u-1>p;p++)r+=d.eq(p).text()+"\r\n";r+=d.eq(u-1).text(),a.find(".textarea").val($.trim(r)),this.setHeightFromRight();var s=!1;$("#original-output").hasClass("has-edited")&&(s=!0);var l=e("tplOpOutputTextarea",{hasEdited:s});$("#original-output").removeClass("has-edited"),$(".trans-right .output-wrap .dictionary-wrap").css("margin-top","0"),i.after(l)},hideEditBubble:function(){"block"===$(".edit-res-bubble").css("display")&&($(".edit-res-bubble").hide(),a.setCookie("HIDEEDITRESBUBBLE",1,{expires:2592e6}))},afterBuildEdit:function(){{var t=$("#baidu_translate_output_edit"),i=parseInt(t.attr("data-height"),10),e=t.parents(".textarea-wrap");$(".output-wrap"),$(".ordinary-wrap")}e.height(i),t.height(i);var a;a=$("#baidu_translate_output_edit")[0].scrollHeight,$("#baidu_translate_output_edit")[0].scrollHeight&&parseInt($("#baidu_translate_output_edit")[0].scrollHeight,10)>=i&&($(e).height($("#baidu_translate_output_edit")[0].scrollHeight),$(t).height($(e).height())),this.setHeightFromRight()},setHeightFromRight:function(){n.sameHeightWhileEditingResult()},revokeEdit:function(t){var i=t.value;$(".op-zh-pingyin-btn").show(),$(".op-lm-pingyin-btn").show(),$(".op-jp-pingyin-btn").show(),this.afterEdit({value:i})},afterEdit:function(t){var i=t.value,e=$(".output-wrap"),a=e.find(".ordinary-wrap"),o=a.find(".output-hd");e.find(".output-textarea-clear-btn").remove(),e.find(".textarea-wrap").remove(),e.find(".op-edit-operate").remove(),$(".op-double-lang").find("span").hasClass("op-checked")?e.find(".source-output").show():e.find(".source-output").hide(),$(".op-zh-pingyin-btn").find("span").hasClass("op-checked")&&($(".op-zh-pingyin-btn").find("span").removeClass("op-checked").addClass("op-check"),e.find(".luoma-output").hide(),$(".op-zh-pingyin-btn").hide()),$(".op-lm-pingyin-btn").find("span").hasClass("op-checked")&&($(".op-lm-pingyin-btn").find("span").removeClass("op-checked").addClass("op-check"),e.find(".luoma-output").hide(),$(".op-lm-pingyin-btn").hide()),$(".op-jp-pingyin-btn").find("span").hasClass("op-checked")&&($(".op-jp-pingyin-btn").find("span").removeClass("op-checked").addClass("op-check"),e.find(".japan-output").hide(),$(".op-jp-pingyin-btn").hide()),e.find(".target-output").remove();for(var u="",r=0;r<i.length;r++){var p=d.encodeHTML(i[r]),s=['<p class="ordinary-output target-output"><span>',p,"</span></p>"].join("");u+=s}if($(e).find(".output-bd").eq(0).append(u),$(".ordinary-wrap .op-sound").length>0){var l=i.join("");$(".ordinary-wrap .op-sound").attr("data-sound-text",encodeURIComponent(l))}t.isModify&&$(e).find(".target-output").css("color","#4d90f0"),$(".trans-right .output-wrap .dictionary-wrap").css("margin-top","32px"),o.show(),$("embed").each(function(){$(this).attr("id").indexOf("Clipboard")&&$(this).show()}),a.css("background-color","#f0f0f0"),n.sameHeight()}};i.bindEvents=function(){u.bindEvents()},i.hideEditBuddle=function(){u.hideEditBuddle()}});
;/*!translation:widget/translate/output/editTips.js*/
define("translation:widget/translate/output/editTips",function(t,a){var e=(t("translation:widget/translate/common/environment"),t("translation:widget/translate/common/string")),i=[],n={bindEvents:function(){$(document).on("click",$.proxy(this.clickDocument,this)),$(".output-wrap").on("click",".edit-tip a",$.proxy(this.listItemClicked,this)).on("click",".target-output > span[space]",$.proxy(this.editSpanClicked,this))},clickDocument:function(t){var a=t.target;$(a).hasClass("ordinary-span-edit")||"block"===$(a).parents(".edit-tip").css("display")||($(".output-wrap .target-output span").removeClass("ordinary-span-edit"),"block"===$(".edit-tip").css("display")&&$(".edit-tip").hide())},listItemClicked:function(t){this.listItemSelected({target:t.target}),_hmt.push(["_trackEvent","首页","web端点击某条多候选翻译结果"])},listItemSelected:function(t){var a,e=t.target,i=$(".target-output .ordinary-span-edit");return $(e).hasClass("edit-input")?void $(".edit-input").focus():(a=$.trim($(e).hasClass("edit-submit")?$(".edit-input").val():$(e).text()),this.checkSpanChange({target:$(i),newText:a}),void $(i).attr("tabcount",-1))},checkSpanChange:function(t){var a=t.target,e=t.newText,n=$(a).attr("right-pos"),r=i[n].oritext;$.trim(e)!==$.trim(r)?$(a).addClass("edited"):$(a).removeClass("edited"),$(a).text(/^\s+/g.test(r)&&!/^\s+/g.test(e)?" "+e:e),$(".target-output span").removeClass("ordinary-span-edit"),$(".edit-tip").hide();var s=$(".output-wrap .output-bd").find(".target-output"),o="";0!==s.length&&(s.each(function(){o+=$(this).text()+"\r\n"}),o=$.trim(o),$(".ordinary-wrap .op-sound").length>0&&o&&$(".ordinary-wrap .op-sound").attr("data-sound-text",encodeURIComponent(o)))},editSpanClicked:function(t){this.execSpanClicked({target:t.target})},execSpanClicked:function(t){var a=t.target,e=$(a),n=e.attr("right-pos"),r=e.text(),s=e.attr("tabcount"),o=$(".select-from-language .language-selected").attr("data-lang"),d=$(".select-to-language .language-selected").attr("data-lang");e.hasClass("ordinary-span-edit")||("-1"!==s&&(i[n]={oritext:r}),$(a).attr("tabcount",-1).addClass("ordinary-span-edit").focus().siblings("span").removeClass("ordinary-span-edit"),$(a).parents("p").siblings().find("span").removeClass("ordinary-span-edit"),i[n]&&i[n].data?this.showEditTipBox({target:a,data:i[n].data}):"zh"==o&&"yue"==d||"en"==o&&"ara"==d||"yue"==o&&"zh"==d||"ara"==o&&"en"==d||"zh"==o&&"wyw"==d||"wyx"==o&&"zh"==d?this.showEditTipBox({target:a,data:[]}):this.getMultiTransResult({target:a,text:r}))},showEditTipBox:function(t){{var a=$(t.target),e=a.attr("right-pos"),n=t.data,r=a.position(),s=a.outerHeight(),o="";i[e].oritext?i[e].oritext:a.text()}if(0!==n.length){for(var d=0,p=n.length;p>d;++d)o+='<a href="javascript:void(0);" title="'+n[d]+'">'+n[d]+"</a>";$(".edit-tip").html(o).show().css({left:r.left,top:r.top+s-1})}},getMultiTransResult:function(t){var a=this,e=t.target,n=t.text,r=this.getOriginText(e),s={from:$(".select-from-language .language-selected").attr("data-lang"),to:$(".select-to-language .language-selected").attr("data-lang"),query:r,raw_trans:n,count:5};$.ajax({url:"/multitransapi",type:"POST",dataType:"json",data:s,success:function(t){if(0===t.err_no){a.showEditTipBox({target:e,data:t.data.cands});var r=$(e).attr("right-pos");i[r]={oritext:n,data:t.data.cands}}else a.showEditTipBox({target:e,data:[]})}})},getOriginText:function(t){for(var a=$(t).parent(),i=a.prev(),n=i.text(),r=$(t).attr("right-pos").split(","),s="",o=0,d=r.length;d>o;o++){var p=r[o].split("|"),l=parseInt(p[0],10),u=parseInt(p[1],10),c=e.cutByByte(n,l,l+u);s+=c}return s}};a.bindEvents=function(){n.bindEvents()}});
;/*!translation:widget/translate/output/fanyiModSwitch.js*/
define("translation:widget/translate/output/fanyiModSwitch",function(e,t){var o=e("translation:widget/translate/common/environment"),s=e("translation:widget/translate/input/sameHeightHandler"),a=e("translation:widget/common/cookie"),n={init:function(){var e=a.getCookie("DOUBLE_LANG_SWITCH");"1"===e&&o.set("doubleLangChecked",!0),this.bindEvents()},bindEvents:function(){var e=this;$(".output-wrap").on("click",".op-double-lang",function(){e.doubleLangClicked({target:this})}).on("click",".op-jp-pingyin-btn",function(){e.switchJapan({target:this})}).on("click",".op-lm-pingyin-btn",function(){e.switchLuoma({target:this})}).on("click",".op-zh-pingyin-btn",function(){e.switchZhong({target:this})})},doubleLangClicked:function(e){var t=e.target,a=$(t).find("span"),n=!1;a.hasClass("op-check")?(this.doubleLangNeedChecked(),a.removeClass("op-check").addClass("op-checked"),n=!0,o.set("doubleLangChecked",!0)):a.hasClass("op-checked")&&(this.doubleLangNeedShutdown(),a.removeClass("op-checked").addClass("op-check"),o.set("doubleLangChecked",!1)),s.sameHeight()},doubleLangNeedChecked:function(){a.setCookie("DOUBLE_LANG_SWITCH",1,{expires:2592e6}),$(".source-output").show(),$(".output-wrap .op-copy").attr("data-hover-tip-text","复制双语结果"),_hmt.push(["_trackEvent","首页","web端打开双语对照"])},doubleLangNeedShutdown:function(){a.setCookie("DOUBLE_LANG_SWITCH",0,{expires:2592e6}),$(".source-output").hide(),$(".output-wrap .op-copy").attr("data-hover-tip-text","复制"),_hmt.push(["_trackEvent","首页","web端关闭双语对照"])},switchJapan:function(e){var t=$(".japan-output"),o=$(".target-output"),n=$(e.target).find("span");n.hasClass("op-checked")?(t.hide(),o.show(),a.setCookie("JAPAN_PINYIN_SWITCH",0,{expires:2592e6}),n.removeClass("op-checked").addClass("op-check"),_hmt.push(["_trackEvent","首页","web端关闭日语假名对照"])):(t.show(),o.hide(),a.setCookie("JAPAN_PINYIN_SWITCH",1,{expires:2592e6}),n.removeClass("op-check").addClass("op-checked"),_hmt.push(["_trackEvent","首页","web端开启日语假名对照"])),s.sameHeight()},switchLuoma:function(e){var t=$(".luoma-output"),o=$(".target-output"),n=$(e.target).find("span");n.hasClass("op-checked")?(t.hide(),o.show(),a.setCookie("LUOMA_PINYIN_SWITCH",0,{expires:2592e6}),n.removeClass("op-checked").addClass("op-check"),_hmt.push(["_trackEvent","首页","web端关闭韩语罗马音对照"])):(t.show(),o.hide(),a.setCookie("LUOMA_PINYIN_SWITCH",1,{expires:2592e6}),n.removeClass("op-check").addClass("op-checked"),_hmt.push(["_trackEvent","首页","web端开启韩语罗马音对照"])),s.sameHeight()},switchZhong:function(e){var t=$(".luoma-output"),o=$(".target-output"),n=$(e.target).find("span");n.hasClass("op-checked")?(t.hide(),o.show(),a.setCookie("CHINA_PINYIN_SWITCH",0,{expires:2592e6}),n.removeClass("op-checked").addClass("op-check"),_hmt.push(["_trackEvent","首页","web端关闭中文拼音对照"])):(t.show(),o.hide(),a.setCookie("CHINA_PINYIN_SWITCH",1,{expires:2592e6}),n.removeClass("op-check").addClass("op-checked"),_hmt.push(["_trackEvent","首页","web端开启中文拼音对照"])),s.sameHeight()}};t.bindEvents=function(){n.bindEvents()},t.init=function(){n.init()}});
;/*!translation:widget/translate/output/yellow.js*/
define("translation:widget/translate/output/yellow",function(t,a){var e=t("translation:widget/translate/common/environment"),n=t("translation:widget/translate/common/string"),i={bindEvents:function(){var t=this;$(".output-wrap").on("mouseover",".target-output > span[space]",function(){t.onFloatingYellow({target:this})}).on("mouseout",".target-output > span[space]",function(){t.offFloatingYellow({target:this})}).on("mouseover",".japan-output-item",function(){t.onJpItemFloating({target:this})}).on("mouseout",".japan-output-item",function(){t.offJpItemFloating({target:this})}).on("mouseover",".luoma-output-item",function(){t.onLuomaItemFloating({target:this})}).on("mouseout",".luoma-output-item",function(){t.offLuomaItemFloating({target:this})})},textEscape:function(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/\n|\r/g,"<br>"),t=t.replace(/<([ ]+)[^<>]*>/gi,"#"),t=t.replace(/\\#/gi," ")},onFloatingYellow:function(t){var a=t.target,i=$(a);i.addClass("high-light-bg");var o,s,g,l,r=[];if(e.get("doubleLangChecked")){var u=i.parent();o=u.prev(),s=o.text(),l=i.attr("right-pos").split(",")}else o=$(".textarea-bg-text"),s=$("#baidu_translate_input").val(),l=i.attr("left-pos").split(",");var p=($(".select-from-language .language-selected").attr("data-lang"),$(".select-to-language .language-selected").attr("data-lang"),l.length);if(1===p){var h=l[0].split("|"),f=parseInt(h[0],10),c=parseInt(h[1],10),m=n.cutByByte(s,0,f),v=n.cutByByte(s,f,f+c),d=s.substr(m.length+v.length);m=this.textEscape(m),v=this.textEscape(v),d=this.textEscape(d),g=m+'<span class="high-light-bg">'+v+"</span>"+d}else if(p>1){for(var b=0,x=[],y=0;p>y;y++)x.push(parseInt(l[y].split("|")[0]));for(var I=0;p>I;I++)for(var C=0;p-I>C;C++)if(x[C]>x[C+1]){var F=x[C];x[C]=x[C+1],x[C+1]=F;var E=l[C];l[C]=l[C+1],l[C+1]=E}for(var y=0,B=l.length;B>y;y++){var h=l[y].split("|"),f=parseInt(h[0],10),c=parseInt(h[1],10),v=n.cutByByte(s,f,f+c),m=n.cutByByte(s,0,f),d=s.substr(m.length+v.length);if(m=this.textEscape(m),v=this.textEscape(v),d=this.textEscape(d),0!==y){var j=r.pop(),w=n.cutByByte(j,0,f-b);w=this.textEscape(w),r.push(w),r.push('<span class="high-light-bg">'+v+"</span>"),r.push(d),b=f+c}else r=[m,'<span class="high-light-bg">'+v+"</span>",d],b=f+c}g=r.join("")}o.html(g)},offFloatingYellow:function(t){var a=t.target,n=$(a);if(n.removeClass("high-light-bg"),e.get("doubleLangChecked")){var i=n.parent(),o=i.prev(),s=o.text();o.text(s)}else $(".textarea-bg-text").html("")},onJpItemFloating:function(t){var a=$(t.target);a.find(".japan-output-japan").addClass("high-light-bg"),a.find(".japan-ouput-pinyin").addClass("high-light-bg")},offJpItemFloating:function(t){var a=$(t.target);a.find(".japan-output-japan").removeClass("high-light-bg"),a.find(".japan-ouput-pinyin").removeClass("high-light-bg")},onLuomaItemFloating:function(t){var a=$(t.target);a.find(".luoma-output-kor").addClass("high-light-bg"),a.find(".luoma-ouput-pinyin").addClass("high-light-bg")},offLuomaItemFloating:function(t){var a=$(t.target);a.find(".luoma-output-kor").removeClass("high-light-bg"),a.find(".luoma-ouput-pinyin").removeClass("high-light-bg")}};a.bindEvents=function(){i.bindEvents()}});
;/*!translation:widget/translate/output/fanyiClickBtn.js*/
define("translation:widget/translate/output/fanyiClickBtn",function(t,n){var e=(t("translation:widget/translate/common/environment"),t("translation:widget/translate/common/soundURIGenerator")),o=t("translation:widget/translate/dictionary/simplemeans"),i={bindEvents:function(){var t=this;$(".output-wrap").on("click",".op-sound",function(){t.soundClicked({target:this})}).on("mouseover",".op-sound",function(){t.soundOver({target:this})}).on("mouseout",".op-sound",$.proxy(this.soundOut,this))},soundClicked:function(t){o.judgeStopRepeat(),this.timer&&clearTimeout(this.timer);var n=e.generateURI({lan:$(t.target).attr("data-sound-lan"),text:$(t.target).attr("data-sound-text")});BTPM.setUrl(n);var i;$(".ordinary-wrap .op-sound").addClass("op-sound-active"),i&&clearTimeout(i),i=setTimeout(function(){$(".ordinary-wrap .op-sound").removeClass("op-sound-active")},2e3),_hmt.push(["_trackEvent","首页","web端译文TTS点击"])},soundOver:function(t){var n=this;this.timer=setTimeout(function(){n.soundClicked({target:t.target})},500)},soundOut:function(){this.timer&&clearTimeout(this.timer)}};n.bindEvents=function(){i.bindEvents()}});
;/*!translation:widget/translate/output/fanyi.js*/
define("translation:widget/translate/output/fanyi",function(t,a){var n=t("translation:widget/common/tools/template"),e=t("translation:widget/translate/common/environment"),i=t("translation:widget/translate/common/string"),l=t("translation:widget/translate/config/sound"),r=t("translation:widget/translate/output/transclipboard"),o=t("translation:widget/translate/output/jpHandler"),s=t("translation:widget/translate/output/lmHandler"),p=t("translation:widget/translate/output/editResults"),u=t("translation:widget/translate/output/editTips"),d=t("translation:widget/translate/output/fanyiModSwitch"),g=t("translation:widget/translate/output/yellow"),c=t("translation:widget/translate/output/fanyiClickBtn"),m=t("translation:widget/translate/input/sameHeightHandler"),v=t("translation:widget/common/cookie"),D=t("translation:widget/common/util"),w={init:function(){this.bindEvents()},bindEvents:function(){p.bindEvents(),u.bindEvents(),d.init(),g.bindEvents(),c.bindEvents()},normaltrans:function(t){for(var a=t.data.data,p=t.data.jp_pinyin,u=t.data.phonetic,d={},g=$(".select-to-language .language-selected").attr("data-lang"),c=$(".select-from-language .language-selected").attr("data-lang"),w=e.get("rtl"),f=$.inArray(g,w)>=0,y=$.inArray(c,w)>=0,h=$.inArray(g,["ara","ru","el"])>=0,C="",I=a.length,k=[],L=0;I>L;L++){var H=a[L].dst;k.push(H);for(var N=(a[L].src,0),b=a[L].result.length;b>N;N++){items=a[L].result[N][5].toString().split("|");var S=parseInt(items[0],10),_=parseInt(items[1],10);a[L].result[N][6]=h?a[L].result[N][1]:i.cutByByte(H,S,S+_)}}C+=k.join("\r\n");for(var A="",E=k.length,N=0;E>N;N++)tempOutput=D.encodeHTML(k[N]),A+="<p>"+tempOutput+"</p>";if($("#original-output").length<=0){var T='<div style="display:none;" id="original-output">'+A+"</div>";$("body").append(T)}else $("#original-output").empty(),$("#original-output").append(A),$("#original-output").removeClass("has-edited");if(d.tplData={},d.tplData.data=a,d.tplData.targetLang=g,p){o.execData(p);var j=o.hasJpPinyin();if(j){var B=o.getNewJpData(p);d.tplData.jpData=B;var O=v.getCookie("JAPAN_PINYIN_SWITCH"),P=!1;"1"===O&&(P=!0),d.tplData.japanChecked=P}}if(u){s.execData(u);var M=s.hasLmData();if(M&&!p){var W=s.getNewLmData();if(d.tplData.lmData=W,"kor"===g){var x=v.getCookie("LUOMA_PINYIN_SWITCH"),J=!1;"1"===x&&(J=!0),d.tplData.luomaChecked=J}else if("zh"===g){var R=v.getCookie("CHINA_PINYIN_SWITCH"),U=!1;"1"===R&&(U=!0),d.tplData.chinaChecked=U}}}var Y=v.getCookie("DOUBLE_LANG_SWITCH"),z=!1;"1"===Y&&(z=!0),d.tplData.doubleLangChecked=z,d.tplData.dir=f?"rtl":"ltr",d.tplData.srcDir=y?"rtl":"ltr",d.tplData.spell="",i.getByte(C)<=l.getMaxSoundLength(g)&&(d.tplData.spell=encodeURIComponent(C)),d.tplData.spellLang="",l.isLangSound(g)&&(d.tplData.spellLang="yue"==g?"cte":g),h&&(d.tplData.needSpace="yes"),n.config("compress",!0);var G=n("tplOrdinaryResult",d);$(".output-wrap .ordinary-wrap").remove(),$(".output-wrap").removeClass("output-blank"),$(".output-wrap").append(G);var q=r.zclipTran();q&&q.destroy(),r.init(),m.sameHeight()}};$(function(){w.init()}),a.normaltrans=function(t){w.normaltrans(t)}});
;/*!translation:widget/translate/output/adcards.js*/
define("translation:widget/translate/output/adcards",function(a,t){var e,n=(a("translation:widget/translate/common/environment"),a("translation:widget/common/tools/template")),r=a("translation:widget/common/cookie"),p={bindEvents:function(){$(".translate-wrap").on("click",".trans-ad-app-control",function(){var a=$(".trans-ad-app-wrap").hasClass("trans-ad-app-wrap-click")?1:0;$(".trans-ad-app-wrap").toggleClass("trans-ad-app-wrap-click"),_hmt.push(["_trackEvent","首页","web端二维码点击"]),0===a&&_hmt.push(["_trackEvent","首页","web端收拢APP二维码点击"]),1===a&&_hmt.push(["_trackEvent","首页","web端展开APP二维码点击"])}),$("#sideAdData").length>0?(e="sideAd",$(".translate-wrap").on("click",".showad-close-btn",function(a){$(".trans-side-ad-wrap").hide();var t=(new Date).getTime(),e=Math.floor(t/864e5);r.setCookie("sideAdClose",e),_hmt.push(["_trackEvent","首页","web端侧边栏广告关闭点击"]),a.preventDefault(),a.stopPropagation()}).on("click",".side-ad-link",function(){_hmt.push(["_trackEvent","首页","web端侧边栏图文广告链接点击"])})):e="appAd"},hideAppQr:function(){"appAd"===e?$(".trans-ad-app-wrap").hide():"sideAd"===e&&$(".trans-side-ad-wrap").hide()},showAppQr:function(){if("appAd"===e){if($(".trans-ad-app-wrap").length<=0){var a=n("tplAppQr");$("#transOtherRight").append(a)}$(".trans-ad-app-wrap").show()}else if("sideAd"===e){if($(".trans-side-ad-wrap").length>0&&"block"===$(".trans-side-ad-wrap").css("display"))return;var t=r.getCookie("sideAdClose");if(t){t=parseInt(t,10);var p=(new Date).getTime(),s=Math.floor(p/864e5);if(s===t)return}if($(".trans-side-ad-wrap").length<=0){var i=$("#sideAdData"),d={path:i.attr("data-path"),url:i.attr("data-url"),title:i.attr("data-title"),showad:i.attr("data-showad")||0},a=n("tplSideAd",d);$("#transOtherRight").append(a),_hmt.push(["_trackEvent","首页","web端侧边栏广告生成"])}$(".trans-side-ad-wrap").show(),_hmt.push(["_trackEvent","首页","web端侧边栏广告总展现"])}}};$(function(){p.bindEvents()}),t.hideAppQr=function(){p.hideAppQr()},t.showAppQr=function(){p.showAppQr()}});
;/*!translation:widget/translate/dictionary/dictionary.js*/
define("translation:widget/translate/dictionary/dictionary",function(n,t){var i=(n("translation:widget/translate/common/environment"),n("translation:widget/common/tools/template")),a=n("translation:widget/translate/dictionary/simplemeans"),o={init:function(){this.bindEvents()},bindEvents:function(){a.bindEvents()},buildDictionary:function(n){var t,o=n.to,e=n.simpleMeansData;t=i("tplDictionary"),$(".dictionary-wrap").remove(),$("#transOtherResutl").append(t),e&&a.buildSimpleMeans({data:e,to:o})}};$(function(){o.init()}),t.buildDictionary=function(n){o.buildDictionary(n)}});
;/*!translation:widget/translate/keywords/keywords.js*/
define("translation:widget/translate/keywords/keywords",function(t,n){var e=t("translation:widget/common/tools/template"),i=t("translation:widget/translate/common/environment"),r={build:function(t){var n=t.data.splice(0,10),i=t.from,r=t.to,o=!1,a="",h={};"zh"===i&&"en"===r?(o=!0,_hmt.push(["_trackEvent","首页","Web中英方向重点词汇卡片展现次数"]),h.direction="zh2en"):(_hmt.push(["_trackEvent","首页","Web英中方向重点词汇卡片展现次数"]),h.direction="en2zh"),$.each(n,function(t,n){n.href="/#"+i+"/"+r+"/"+encodeURIComponent(n.word)}),h.dataArray=n,h.meanNeedHighlight=o,a=e("tpl-keywords",h),$("#transOtherResutl").html(a)},init:function(){this.bindEvent()},bindEvent:function(){var t=this;$(".translate-wrap").on("click",".keywords-inner .keywords-word",function(){var t=$(this).attr("data-direction");_hmt.push("zh2en"===t?["_trackEvent","首页","Web中英方向重点词汇二次翻译次数"]:["_trackEvent","首页","Web英中方向重点词汇二次翻译次数"])}).on("dblclick.keywords",".keywords-inner .highlight",function(){t.getHighlightQueryAndSave($(this))}).on("mouseover.keywords",".keywords-inner .highlight",function(){_hmt.push(["_trackEvent","首页","Web重点词汇卡片highlight次数"])})},getHighlightQueryAndSave:function(t){var n=t.text(),e="keywords";i.set("dbClickHighlightZone",{query:$.trim(n),area:e})}};$(function(){r.init()}),n.build=function(t){r.build(t)}});
;/*!translation:widget/translate/output/bottomBanner.js*/
define("translation:widget/translate/output/bottomBanner",function(n,e){var t=n("translation:widget/translate/common/environment"),a={bindEvents:function(){$(window).on("scroll",function(){var n=location.hash;if(!($(".spread-slide a").length<=0||n===t.get("preHash"))){var e=$(window).height(),a=$(".spread-slide").offset().top,r=$(window).scrollTop();e+r>a&&($(".dictionary-wrap").length>0||$(".output-detaildict-tab").children().length>1)&&(_hmt.push(["_trackEvent","web端翻译—banner总展现","web端翻译—非首屏banner展现"]),t.set("preHash",n))}})},sendIndexBannerLog:function(n){var e=n&&n.source,a=location.hash;$(".spread-slide a").length<=0||("clear"===e?_hmt.push(["_trackEvent","web端翻译—banner总展现","web端翻译—首屏banner展现"]):a!==t.get("preHash")&&(_hmt.push(["_trackEvent","web端翻译—banner总展现","web端翻译—首屏banner展现"]),t.set("preHash",a)))}};e.bindEvents=function(){a.bindEvents()},e.sendIndexBannerLog=function(n){a.sendIndexBannerLog(n)}});
;/*!translation:widget/translate/favo/favoHelper.js*/
define("translation:widget/translate/favo/favoHelper",function(r,e){var t={parseNormalResult:function(){var r=$(".output-wrap .output-bd").find(".target-output"),e="";return 0===r.length?e:(r.each(function(){e+=$(this).html().replace(/<br( \/)?>/gi,"&lt;br$1&gt;")+"<br />"}),e=e.replace(/<(?!br \/)[^<>]*>/gi,"").replace(/<br \/>/gi,"\r\n"),e=e.replace(/&nbsp;/gim," "),$.trim(e))},parseDictResult:function(){var r=$(".dictionary-wrap .dictionary-output"),e="";if(0===r.length)return e;var e;return r.each(function(){e+=$(this).find(".dictionary-title").html(),e+=$(this).find(".dictionary-comment").html()}),e=e.replace(/<(?!\/(div|p))[^<>]*>/gi,"").replace(/<\/(div|p)>/gi,"\r\n"),e=e.replace(/&gt;/gim,">"),e=e.replace(/&lt;/gim,"<"),e=e.replace("详细释义>>",""),e=e.replace(/&nbsp;/gim," "),$.trim(e)},parseZonedWordResult:function(r){var e,t="";return 1===r?(e=$(".zonedword-result .dictionary-output"),t+=e.html(),t=t.replace(/<(?!\/(div|p))[^<>]*>/gi,"").replace(/<\/(div|p)>/gi,"\r\n"),t=t.replace(/&gt;/gim,">"),t=t.replace(/&lt;/gim,"<"),t=t.replace("详细释义>>","")):(e=$(".zonedword-result .output-bd").find(".target-output"),e.each(function(){t+=$(this).html().replace(/<br( \/)?>/gi,"&lt;br$1&gt;")+"<br />"}),t=t.replace(/<(?!br \/)[^<>]*>/gi,"").replace(/<br \/>/gi,"\r\n")),t=t.replace(/&nbsp;/gim," "),$.trim(t)}};e.parseNormalResult=function(){return t.parseNormalResult()},e.parseDictResult=function(){return t.parseDictResult()},e.parseZonedWordResult=function(r){return t.parseZonedWordResult(r)}});
;/*!translation:widget/translate/favo/favo.js*/
define("translation:widget/translate/favo/favo",function(t,i,e){function r(t){this.pos=t.pos||"input",this.$btn=$(t.target),this.ts=0,this.handles={change:[]}}var n=t("translation:widget/login/login"),s=t("translation:widget/translate/output/mouseover"),o=t("translation:widget/translate/common/environment"),a=t("translation:widget/translate/favo/favoHelper");r.prototype={constructor:r,init:function(t){var i=t.query.replace(/<br( \/)?>/gi,"&lt;br$1&gt;"),e=t.from+"2"+t.to,r=+new Date;return"input"===this.pos&&r-this.ts<300&&i===this.query&&e===this.direction?void(this.ts=r):(this.ts=r,this.resetBtn(),this.query=i,this.direction=e,this.dictJSON=t.dictJSON||"",this.type=t.type||"",this.$btn.show(),this.check(),this.bindEvent(),this)},resetBtn:function(){this.query="",this.direction="",this.saved=!1,this.id=null,this.dictJSON="",this.$btn.off("click.favo").attr({"data-hover-tip-text":"收藏结果",title:"收藏结果"}).removeClass("op-favo-cur").hide()},bindEvent:function(){var t=this;this.$btn.on("click.favo",function(){var i=o.get("account");i.user_id?(t.saved?t.deleteItem():t.add(),!i.add_name&&window.confirm("嗨，你的账户需要先添加个名字喔!")&&window.open("https://passport.baidu.com/v2/?ucenteradduname")):n.instance&&n.instance.show()})},check:function(){var t=o.get("account");if(t.user_id){var i=this;!function(t,e){$.ajax({url:"/pcnewcollection?req=check",type:"POST",data:{fanyi_src:i.query,direction:i.direction},datatype:"json",success:function(r){0===r.error?i.favorIsSaved({id:r.id,firstScreen:!0,reqQurey:t,reqDirection:e}):i.favorIsNotSaved({reqQurey:t,reqDirection:e})},error:function(){i.favorIsNotSaved({reqQurey:t,reqDirection:e})}})}(this.query,this.direction)}},favorIsSaved:function(t){if(this.query===t.reqQurey&&this.direction===t.reqDirection){var i=this.$btn;this.saved=!0,this.id=t.id;var e=t.firstScreen||!1;e||(i.attr("data-hover-tip-text","已收藏"),s.isover({target:i[0]}),setTimeout(function(){s.isout()},2e3)),i.attr({"data-hover-tip-text":"取消收藏",title:"取消收藏"}).addClass("op-favo-cur")}},favorIsNotSaved:function(t){if(this.query===t.reqQurey&&this.direction===t.reqDirection){this.saved=!1,this.id=null;var i=this.$btn;i.attr({"data-hover-tip-text":"收藏结果"}).removeClass("op-favo-cur"),t.firstScreen&&(i.attr("data-hover-tip-text","已取消收藏"),s.isover({target:i[0]}),setTimeout(function(){s.isout(),i.attr("data-hover-tip-text","收藏结果")},2e3))}},add:function(){var t={fanyi_src:this.query,direction:this.direction};"input"===this.pos?(t.fanyi_dst=a.parseNormalResult(),t.dict=this.dictJSON?a.parseDictResult():"",t.dict_json=this.dictJSON):(t.type=this.type,t.fanyi_dst=a.parseZonedWordResult(this.type));var i=o.get("maxCollectionCount");if(this.query.length>i||t.fanyi_dst.length>i)return void alert("囧, 原文和译文要是在"+i+"字以下就好啦 ^_^");_hmt.push("input"===this.pos?["_trackEvent","首页","web端输入框收藏结果点击次数"]:["_trackEvent","首页","web端划词框收藏结果点击次数"]);var e=this;!function(i,r){$.ajax({url:"/pcnewcollection?req=add",type:"POST",data:t,datatype:"json",success:function(t){0===t.error?(e.favorIsSaved({id:t.id,reqQurey:i,reqDirection:r}),e.trigger("change")):e.favorIsNotSaved({reqQurey:i,reqDirection:r})}})}(this.query,this.direction)},deleteItem:function(){if(void 0!==this.id&&null!==this.id){_hmt.push("input"===this.pos?["_trackEvent","首页","web端输入框取消收藏点击次数"]:["_trackEvent","首页","web端划词框取消收藏点击次数"]);var t=this;!function(i,e){$.ajax({url:"/pcnewcollection?req=del",type:"POST",data:{id:t.id},datatype:"json",success:function(r){0===r.error&&(t.favorIsNotSaved({firstScreen:!0,reqQurey:i,reqDirection:e}),t.trigger("change"))}})}(this.query,this.direction)}},on:function(t,i){return this.handles[t]&&"[object Function]"===Object.prototype.toString.call(i)?(this.handles[t].push(i),this):void 0},off:function(t){return this.handles[t]=[],this},trigger:function(t){var i=this;$.each(this.handles[t],function(t,e){e.call(i)})}},e.exports=r});
;/*!translation:widget/translate/input/inputFavo.js*/
define("translation:widget/translate/input/inputFavo",function(t,a,n){var e=t("translation:widget/translate/favo/favo"),o=new e({pos:"input",target:$(".input-operate .op-favo")[0]});n.exports=o});
;/*!translation:widget/translate/output/output.js*/
define("translation:widget/translate/output/output",function(t,e){var i=t("translation:widget/translate/common/environment"),s=t("translation:widget/common/tools/template"),a=t("translation:widget/translate/output/fanyi"),n=t("translation:widget/translate/output/adcards"),r=t("translation:widget/translate/output/mouseover"),o=t("translation:widget/translate/dictionary/dictionary"),u=t("translation:widget/translate/keywords/keywords"),l=t("translation:widget/translate/details/details"),c=t("translation:widget/translate/details/hotLinkMiddle"),d=t("translation:widget/translate/output/bottomBanner"),p=t("translation:widget/translate/input/inputFavo"),m={init:function(){this.bindEvents()},bindEvents:function(){$(".translate-wrap").on("mouseover",".data-hover-tip",function(){r.isover({target:this})}).on("mouseout",".data-hover-tip",function(){r.isout()}).on("copy",".output-bd",$.proxy(this.outputTextIsCopy,this)),d.bindEvents()},clickDocument:function(t){var e=t.target;$(e).hasClass("ordinary-span-edit")||"block"===$(e).parents(".edit-tip").css("display")||($(".output-wrap .target-output span").removeClass("ordinary-span-edit"),"block"===$(".edit-tip").css("display")&&$(".edit-tip").hide())},outputTextIsCopy:function(t){var e="";if(document.getSelection){var i=document.getSelection();e="string"==typeof i?i:i.toString()}else document.selection&&(e=document.selection.createRange().text);e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.originalEvent&&t.originalEvent.clipboardData?(t.originalEvent.clipboardData.setData("text/plain",e),t.preventDefault()):t.clipboardData&&(t.clipboardData.setData("text/plain",e),t.preventDefault()))},checkResponse:function(t){var e=t.res;return t.error?void(999===t.error?(this.clearOutputWrap(),a.normaltrans({data:[{dst:e.query,src:e.query,result:[]}]},t.query)):this.showTimeout()):void this.execResponse(t)},showTimeout:function(){var t={message:"非常抱歉，翻译结果响应超时，请稍后再试!"},e=s("tplLongTextPrompt",t);$(".output-wrap").html(e)},execResponse:function(t){var e,s,r,c=t.res,m=t.from,_=t.to,y=i.get("detectLang"),g=m===y,h=!1,w=!1,f="";if(_hmt.push(["_trackEvent","首页","web端总共query数"]),c){if(this.clearOutputWrap(),!c.dict_result||"en"!==_&&"zh"!==_&&"jp"!==_&&"th"!==_)s=!1,r=!1,d.sendIndexBannerLog();else if(c.dict_result.tongyici&&(c.dict_result.tongyici=null),c.dict_result.fanyici&&(c.dict_result.fanyici=null),c.dict_result.cizuxiyu&&(c.dict_result.cizuxiyu=null),c.dict_result.cizu&&(c.dict_result.cizu=null),c.dict_result.content)g&&(s=c.dict_result,f=JSON.stringify(c.dict_result)),r=!1;else{c.dict_result.simple_means&&g&&(s=c.dict_result.simple_means,c.dict_result.simple_means.symbols&&c.dict_result.simple_means.symbols.length>0&&(f=JSON.stringify({simple_means:{symbols:c.dict_result.simple_means.symbols}})),c.dict_result.sim_words&&(s.sim_words=c.dict_result.sim_words),c.dict_result.net_means&&(s.net_means=c.dict_result.net_means));for(var v in c.dict_result)if(c.dict_result[v]instanceof Object&&!$.isEmptyObject(c.dict_result[v])&&0!==c.dict_result[v].length)switch(v){case"collins":case"synthesize_means":case"tongyici":case"fanyici":case"zdict":case"edict":case"cizu":r=!0;break;case"cizuxiyu":c.dict_result[v].cizu&&c.dict_result[v].cizu.length>0&&(r=!0);break;case"baike_means":c.dict_result[v].content&&(r=!0);break;case"simple_means":("zh"===m&&"en"===_||"en"===m&&"zh"===_)&&(r=!0)}}return e=s?!0:!1,!c.liju_result||"en"!==_&&"zh"!==_||!c.liju_result["double"]&&!c.liju_result.single||(w=!0),c.trans_result&&a.normaltrans({data:c.trans_result}),c.trans_result&&c.trans_result.keywords&&c.trans_result.keywords.length>0&&("zh"===m&&"en"===_||"en"===m&&"zh"===_)&&!e&&(h=!0),e&&(o.buildDictionary({simpleMeansData:s,to:_}),n.showAppQr()),h&&(u.build({data:c.trans_result.keywords,from:m,to:_}),n.showAppQr()),p.init({from:m,to:_,query:t.query,dictJSON:f}),void((w||r)&&(l.init({hasDetailMeans:r,hasLiju:w,data:c,from:m,to:_,query:t.query}),n.showAppQr()))}},clearOutputWrap:function(){n.hideAppQr(),$(".textarea-bg-text").html(""),r.isout(),c.removeNegative(),i.get("needLongtextTip")===!0?($(".output-wrap .output-mod").remove(),i.set("needLongtextTip",!1)):$(".output-wrap").empty().addClass("output-blank"),$("#transOtherResutl, #transDetails").empty()}};$(function(){m.init()}),e.checkResponse=function(t){m.checkResponse(t)},e.clearOutputWrap=function(t){m.clearOutputWrap(t)}});
;/*!translation:widget/translate/translang/langoften.js*/
define("translation:widget/translate/translang/langoften",function(e,t){var n=(e("translation:widget/translate/common/environment"),e("translation:widget/common/cookie"));e("translation:widget/common/tools/json2");var a={setFromOften:function(){var e=this,t=$(".from-language-list");this.setLangOften({langOften:"from_lang_often",langOftenList:t,getLanguageOftenFunc:e.getFromOften})},setToOften:function(){var e=this,t=$(".to-language-list");this.setLangOften({langOften:"to_lang_often",langOftenList:t,getLanguageOftenFunc:e.getToOften})},setLangOften:function(e){var t,a={value:"",text:""},l=e.langOften,g=e.langOftenList,f=e.getLanguageOftenFunc,o=n.getCookie(l);o?(/%/.test(o)&&(o=unescape(o)),t=JSON.parse(o)):t=[];var i=g.find(".data-lang");for(i.each(function(){var e=$(this);if(e.hasClass("lang-selected")){a={value:e.attr("value"),text:$.trim(e.text())};for(var n=0;n<t.length;n++)a.value===t[n].value&&t.splice(n,1);return t.push(a),!1}});t.length>3;)t.shift();t.length>0&&(n.setCookie(l,escape(JSON.stringify(t.reverse())),{expires:2592e6}),f.call(this))},setDefault:function(e){var t=e.langOften,a=n.getCookie(t);if(!a||!/%/.test(a)){var l=[{value:"en",text:"英语"},{value:"zh",text:"中文"}];n.setCookie(t,escape(JSON.stringify(l.reverse())),{expires:2592e6})}},getFromOften:function(){var e=$(".from-language-list").find(".language-often");this.getLangOften({langOften:"from_lang_often",currlang:$(".select-from-language").find(".language-selected").attr("data-lang"),langOftenList:e})},getToOften:function(){var e=$(".to-language-list").find(".language-often");this.getLangOften({langOften:"to_lang_often",currlang:$(".select-to-language").find(".language-selected").attr("data-lang"),langOftenList:e})},getLangOften:function(e){var t=e.langOftenList,a=t.find(".language-often-text"),l=e.langOften,g=e.currlang;if(n.getCookie(l)){var f=n.getCookie(l);/%/.test(f)&&(f=unescape(f));var l=JSON.parse(f);t.find(".data-lang").parent("li").remove();for(var o="",i=0;i<l.length;i++){var s=l[i];o+=t.find(".lang-selected").length<=0&&s.value===g?'<li><a href="javascript:void(0);" value='+s.value+' class="data-lang lang-selected">'+s.text+"</a></li>":'<li><a href="javascript:void(0);" value='+s.value+' class="data-lang">'+s.text+"</a></li>"}a.length<=0&&(o+='<li class="language-often-text">-常用语种</li>'),t.append(o)}},showOftenBubble:function(){n.getCookie("HIDEOFTENLANGBUBBLE")?$(".often-lang-bubble").hide():$(".often-lang-bubble").show()},hideOftenBubble:function(){$(".often-lang-bubble").hide(),n.setCookie("HIDEOFTENLANGBUBBLE",1,{expires:2592e7})},bindEvents:function(){var e=this;$(".from-language-list").on("click",".often-lang-bubble",function(){e.hideOftenBubble()})}};$(function(){a.setDefault({langOften:"from_lang_often"}),a.setDefault({langOften:"to_lang_often"}),a.getFromOften(),a.getToOften()}),t.setFromOften=function(){a.setFromOften()},t.setToOften=function(){a.setToOften()}});
;/*!translation:widget/translate/translang/tolang.js*/
define("translation:widget/translate/translang/tolang",function(a,t){var e=a("translation:widget/common/tools/template"),n=a("translation:widget/translate/common/environment"),l=a("translation:widget/translate/translang/transbtn"),s=a("translation:widget/translate/translang/langoften"),g={toBtnClicked:function(){"none"===$(".to-language-list").css("display")&&this.reRenderToList(),$(".to-language-list").toggle(0,function(){"block"===$(".to-language-list").css("display")?$(".select-to-language .arrow-down").addClass("lang-arrow-up"):"none"===$(".to-language-list").css("display")&&$(".select-to-language .arrow-down").removeClass("lang-arrow-up")})},reRenderToList:function(){var a=n.get("langMap"),t=$(".select-from-language .language-selected").attr("data-lang"),l=a[t],s=$(".select-to-language .language-selected").attr("data-lang");$(".to-language-list .data-lang").each(function(){var a,t=$(this),n=t.attr("value"),g={value:n,text:t.text(),isSelected:n===s?!0:!1};if(l&&l.length>0&&$.inArray(n,l)<0){if(t.hasClass("new-lang-disable"))return;a=e("tplLangItemDisable",g)}else{if(!t.hasClass("new-lang-disable"))return;a=e("tplLangItem",g)}var o=t.parent();t.remove(),o.html(a)})},hideToWrap:function(){"block"===$(".to-language-list").css("display")&&($(".to-language-list").hide(),$(".select-to-language .arrow-down").removeClass("lang-arrow-up"))},tolangChange:function(a){var t=a.lang,e=this;$(".to-language-list .data-lang").each(function(){var n=$(this);return n.attr("value")===t?(e.tolangItemSelect({target:n,trans:a.trans}),!1):void 0})},tolangItemSelect:function(a){var t=a.target,e=t.attr("value"),n=t.text();$(".select-to-language .language-selected").attr("data-lang",e).text(n),$(".to-language-list .lang-selected").removeClass("lang-selected"),t.addClass("lang-selected"),this.hideToWrap(),a.trans&&l.doTrans(),s.setToOften()}};t.toBtnClicked=function(){g.toBtnClicked()},t.tolangChange=function(a){g.tolangChange(a)},t.tolangItemSelect=function(a){g.tolangItemSelect(a)},t.hideToWrap=function(a){g.hideToWrap(a)}});
;/*!translation:widget/translate/translang/exchange.js*/
define("translation:widget/translate/translang/exchange",function(a,n){var t,e=a("translation:widget/translate/common/environment"),g=a("translation:widget/translate/translang/fromlang"),l=a("translation:widget/translate/translang/tolang"),s={clickExchangeBtn:function(){var a=$(".from-to-exchange");if(!a.hasClass("language-btn-disable")){var n=$.trim($("#baidu_translate_input").val()).replace(/<br( \/)?>/gi,"&lt;br$1&gt;");n&&e.set("langChangedByUser",!0),this.animateExchange(),this.animateFromToBtn()}},animateExchange:function(){function a(a,e,l,s){t&&(clearTimeout(t),t=null);var c=Math.abs(a-e)/l,i=s/l,o=function(n){g.css(a>e?{"background-position":a-c*(n-1)+"px"}:{"background-position":a+c*(n-1)+"px"})};n(l,i,o)}function n(a,e,g){a>0&&(t=setTimeout(function(){g(a),n(a-1,e,g)},e))}var e=$(".from-to-exchange"),g=e.find(".exchange-mask");1===parseInt(e.attr("aflag"),10)?(a(-2,-202,8,200),e.attr("aflag",0)):(a(-202,-2,8,200),e.attr("aflag",1))},animateFromToBtn:function(){var a=this;$(".select-from-language .select-inner").animate({left:"241px"},400),$(".select-to-language .select-inner").animate({left:"-241px"},400,function(){a.execExchange()})},execExchange:function(a){var n=$(".select-from-language .language-selected"),t=$.trim(n.text()),e=n.attr("data-lang"),s=$(".select-to-language .language-selected"),c=$.trim(s.text()),i=s.attr("data-lang");$(".select-inner").stop(!0,!0),n.has("span").length>0&&(t=n.find("span").text()),n.text(c).attr("data-lang",i),s.text(t).attr("data-lang",e),$(".select-inner").css({left:0}),g.fromlangChange({lang:i}),l.tolangChange({lang:e,trans:!a})},judgeExchangeShow:function(){"auto"===$(".select-from-language .language-selected").attr("data-lang")?this.disableExchangeBtn():this.enableExchangeBtn()},enableExchangeBtn:function(){var a=$(".from-to-exchange");a.hasClass("language-btn-disable")&&a.removeClass("language-btn-disable").addClass("language-btn")},disableExchangeBtn:function(){var a=$(".from-to-exchange");a.hasClass("language-btn")&&a.removeClass("language-btn").addClass("language-btn-disable")}};n.clickExchangeBtn=function(){s.clickExchangeBtn()},n.execExchange=function(a){s.execExchange(a)},n.judgeExchangeShow=function(){s.judgeExchangeShow()}});
;/*!translation:widget/translate/input/processlang.js*/
define("translation:widget/translate/input/processlang",function(a,t){{var n=(a("translation:widget/translate/input/textarea"),a("translation:widget/translate/common/environment")),e=a("translation:widget/translate/translang/exchange"),g=(a("translation:widget/translate/translang/tolang"),["ara","de","en","spa","it","fra","pt","ru","th","kor"]);n.get("langList")}t.getLang=function(a){var t=$(".select-from-language .language-selected"),r=$(".select-to-language .language-selected"),l=($(".from-language-list").find(".data-lang"),t.attr("data-lang")),s=r.attr("data-lang");return n.set("detectLang",a),n.get("fromLangIsAuto")?l=a:a!==s||n.get("langChangedByUser")||("zh"===s&&$.inArray(l,g)>=0?(e.execExchange(!0),s=l,l=a,$(".trans-prompt").hide()):"zh"===l&&$.inArray(s,g)>=0&&(e.execExchange(!0),s=l,l=a,$(".trans-prompt").hide())),n.set("langChangedByUser",!1),{fromLang:l,toLang:s}}});
;/*!translation:widget/translate/input/soundicon.js*/
define("translation:widget/translate/input/soundicon",function(n,t){var o=n("translation:widget/translate/config/sound"),e=n("translation:widget/translate/common/string"),i=n("translation:widget/translate/input/textarea"),s={soundBtn:$(".input-wrap .op-sound"),fromSelect:$(".select-from-language .language-selected"),show:function(){var n=this.fromSelect.attr("data-lang");this.removeDisableSoundBtn();var t=o.getMaxSoundLength(n),s=e.getByte(i.getVal());return!o.isLangSound(n)||s>t?(this.showDisableSoundIcon(),void this.hideSoundBtn()):void this.showSoundBtn()},removeDisableSoundBtn:function(){$(".op-sound-disable").remove()},showDisableSoundIcon:function(){this.soundBtn.after('<div class="op-sound-disable"><div>')},showSoundBtn:function(){this.soundBtn.css("display","block")},hideSoundBtn:function(){this.soundBtn.css("display","none")},getElem:function(){return $(".input-wrap .op-sound")}};t.show=function(){s.show()},t.hide=function(){s.hideSoundBtn(),s.removeDisableSoundBtn()},t.getElem=function(){return s.getElem()}});
;/*!translation:widget/translate/input/hash.js*/
define("translation:widget/translate/input/hash",function(a,t){var e=a("translation:widget/translate/common/hash");t.setHash=function(a){var t=a.query,n=a.from||$(".select-from-language .language-selected").attr("data-lang"),l=a.to||$(".select-to-language .language-selected").attr("data-lang");e.set(n,l,t)}});
;/*!translation:widget/translate/input/longtext.js*/
define("translation:widget/translate/input/longtext",function(t,n){var p=t("translation:widget/translate/config/trans"),i={showTip:function(t){var n,i=t.query,o="百度翻译字数限制为"+p.MAX_QUERY_COUNT+'字, "',e='"及其后面没有被翻译!';i.length>3&&(i=i.substr(0,3)),n=o+i+e;var r='<div class="long-text-prompt-wrap"><p>'+n+"</p></div>";$(".long-text-prompt-wrap").length<=0&&$(".output-wrap").prepend($(r))},hideTip:function(){$(".output-wrap > .long-text-prompt-wrap").remove()}};n.showTip=function(t){i.showTip(t)},n.hideTip=function(){i.hideTip()}});
;/*!translation:widget/translate/history/storage.js*/
define("translation:widget/translate/history/storage",function(r,t){function n(){var r=localStorage.pcTransHistory;return r&&(r=JSON.parse(r)),r}function e(r){r=JSON.stringify(r),localStorage.pcTransHistory=r}function o(r){return r.length<a?r.length:a}var a=10;t.isSupport=function(){try{return window.localStorage?(window.localStorage.isSupport="true",!0):!1}catch(r){return!1}}(),t.setHistory=function(r,t,o,i){for(var l=n()||[],u=l.length,c=0;u>c;c++)r===l[c][0]&&(l.splice(c,1),u--);var s=[r,t,o,i];l.push(s),u>=a&&l.shift(0),e(l)},t.getHistory=function(){var r=n();if(r){var t=o(r);return{data:r,len:t}}return null},t.deleteFromStorge=function(r){var t=n();if(t){var a,i;for(a=0,i=t.length;i>a;a++)if(r===t[a][0]){t.splice(a,1);break}e(t);var l=o(t);return l?{data:t,len:l}:null}return null},t.deleteAllStorge=function(){localStorage.removeItem("pcTransHistory")}});
;/*!translation:widget/translate/history/history.js*/
define("translation:widget/translate/history/history",function(t,i){var e=t("translation:widget/common/tools/template"),o=t("translation:widget/translate/common/environment"),n=t("translation:widget/translate/input/textarea"),r=t("translation:widget/translate/history/storage"),a=$(".history-wrap"),s=$(".history-wrap .history-items"),h=null,l={init:function(){r.isSupport&&this.bindEvent()},bindEvent:function(){var t=this;a.on("click",".history-remove-all",function(i){i.preventDefault(),i.stopPropagation(),r.deleteAllStorge(),t.renderHistory({data:null}),_hmt.push(["_trackEvent","首页","Web点击历史记录清空按钮"])}).on("click",".history-edit-btn",function(t){t.preventDefault(),t.stopPropagation(),a.addClass("history-editing")}).on("click",".history-complete",function(t){t.preventDefault(),t.stopPropagation(),a.removeClass("history-editing")}).on("click",".history-item",function(i){i.preventDefault(),i.stopPropagation();var e=$(this);if(a.hasClass("history-editing")){var o=e.text(),n=r.deleteFromStorge(o);return t.renderHistory({data:n}),void _hmt.push(["_trackEvent","首页","Web点击历史记录删除按钮"])}_hmt.push(["_trackEvent","首页","Web点击历史记录条"]),window.location.href=e.attr("href")}).on("click",".history-item-remove",function(i){i.preventDefault(),i.stopPropagation();var e=$(this).parent(),o=e.text(),n=r.deleteFromStorge(o);t.renderHistory({data:n}),_hmt.push(["_trackEvent","首页","Web点击历史记录删除按钮"])}).on("click",".history-tip-setting",function(t){t.preventDefault(),t.stopPropagation(),$(".translate-setting .setting-options").show(),_hmt.push(["_trackEvent","首页","历史记录框-点此设置"])}),$(document).on("click.history",function(t){var i=$(t.target);i.hasClass("history-wrap")||i.parents(".history-wrap").length>0||a.removeClass("history-editing")})},onInput:function(){if(r.isSupport){var t=$.trim(n.getVal());try{t?a.hide():this.showHistory()}catch(i){a.hide()}}},showHistory:function(){if(!o.get("isInHistoryMode"))return void a.hide();var t=r.getHistory();this.renderHistory({data:t,forceQuitEditingPattern:!0})},renderHistory:function(t){var i=t.data;if(t.forceQuitEditingPattern&&a.removeClass("history-editing"),i&&i.data.length){for(var o,n=i.data,r=i.len,h=[],l=r-1;l>=0;l--){var d=n[l];if(d instanceof Array){o="/#"+encodeURIComponent(d[2])+"/"+encodeURIComponent(d[3])+"/"+encodeURIComponent(d[0]);var c={url:o,word:d[0],mean:d[1],from:d[2]};h.push(c)}}var u=e("tplHistoryItem",{list:h});return s.html(u),void a.removeClass("history-none").show()}s.html(""),a.addClass("history-none").removeClass("history-editing").show()},addNewItemToHistory:function(t,i,e){if(r.isSupport){var o=$.trim(n.getVal());if(o===e){var a="";r.setHistory(e,a,t,i)}}},hide:function(){a.hide()}};i.init=function(){l.init()},i.add=function(t,i,e){h&&(clearTimeout(h),h=null),h=setTimeout(function(){l.addNewItemToHistory(t,i,e)},2e3)},i.onHistoryInput=function(){l.onInput()},i.hideHistory=function(){l.hide()}});
;/*!translation:widget/translate/input/translate.js*/
define("translation:widget/translate/input/translate",function(t,a){var n=t("translation:widget/translate/input/prompt"),e=t("translation:widget/translate/input/textarea"),r=t("translation:widget/common/util"),s=t("translation:widget/translate/output/output"),i=t("translation:widget/translate/config/trans"),o=t("translation:widget/translate/input/processlang"),l=t("translation:widget/translate/common/string"),u=t("translation:widget/translate/input/soundicon"),g=t("translation:widget/translate/input/hash"),c=t("translation:widget/translate/common/environment"),d=t("translation:widget/translate/input/longtext"),p=t("translation:widget/common/sendLog"),y=t("translation:widget/translate/dictionary/simplemeans"),f=t("translation:widget/translate/history/history"),h=t("translation:widget/translate/details/festivalLink"),m={onTrans:function(t){y.translateStopRepeat()||y.shutdownAudio();var a=(e.getElem(),e.getVal()),n=this,s=t&&t.transtype;if(r.isUrl(a))return void this.translateWebPage(a);if(a.length>0&&p.sendIndexDisplayLog({action:"query"}),this.isQueryValid(a)){var i=a;i.length>50&&(i=l.cutByByte(i,0,50));var o={query:i};$.ajax({url:"/langdetect",type:"POST",data:o,success:function(t){0===t.error&&t.lan?n.langIsDeteced(t.lan,a,s):n.reponseQuery(a)}})}},isQueryValid:function(t){return t?!0:!1},processQuery:function(t){var a=t;if(l.getByte(t)>i.MAX_QUERY_COUNT){c.set("needLongtextTip",!0);var n=t;a=l.cutByByte(t,0,i.MAX_QUERY_COUNT),n=l.cutByByte(n,i.MAX_QUERY_COUNT,i.MAX_QUERY_COUNT+9),d.showTip({query:n})}return a},langIsDeteced:function(t,a,e){null===t?this.reponseQuery(t,a):(n.show(t),this.translateQyery(t,a,e))},translateWebPage:function(t){var a="/";"https:"===location.protocol&&(a="http://fanyi.baidu.com/"),document.location.href=[a+"transpage?","query="+encodeURIComponent(t),"&source=url","&ie=utf8","&from="+$(".select-from-language .language-selected").attr("data-lang"),"&to="+$(".select-to-language .language-selected").attr("data-lang"),"&render=1"].join("")},textareaFocus:function(){e.focus()},translateQyery:function(t,a,n){var e=o.getLang(t,a);u.show();var r=this,a=this.processQuery(a),s={from:e.fromLang,to:e.toLang,query:a,transtype:n,simple_means_flag:3};this.translateXHR&&4!==this.translateXHR.readyState&&this.translateXHR.abort(),this.translateXHR=$.ajax({type:"POST",url:"/v2transapi",data:s}).done(function(t){c.set("isInRtTransState",!0),r.translateSuccess(t,e.fromLang,e.toLang,a)})},translateSuccess:function(t,a,n,r){return e.getVal()?(r&&encodeURIComponent(r).length<i.MAX_URL_COUNT&&f.add(a,n,r),f.hideHistory(),h.hideFestivalLink(),s.checkResponse({res:t,from:a,to:n,query:r}),void g.setHash({query:r})):void c.set("isInRtTransState",!1)},reponseQuery:function(){}};a.onTranslate=function(t){m.onTrans(t)}});
;/*!translation:widget/translate/translang/transbtn.js*/
define("translation:widget/translate/translang/transbtn",function(n,t){var a=n("translation:widget/translate/input/translate"),r={transBtnClicked:function(){this.doTrans()},doTrans:function(){a.onTranslate({transtype:"translang"})}};t.transBtnClicked=function(){r.transBtnClicked()},t.doTrans=function(){r.doTrans()}});
;/*!translation:widget/translate/input/dir.js*/
define("translation:widget/translate/input/dir",function(t,r){var a=t("translation:widget/translate/common/environment");r.changeDir=function(t){t&&($.inArray(t,a.get("rtl"))>=0?($(".input-wrap").attr("dir","rtl"),$(".textarea-clear-btn").css({"float":"left",margin:"0 10px 0 0"})):($(".input-wrap").attr("dir","ltr"),$(".textarea-clear-btn").css({"float":"right",margin:"0 0 0 10px"})))}});
;/*!translation:widget/translate/translang/fromlang.js*/
define("translation:widget/translate/translang/fromlang",function(a,e){var t=a("translation:widget/translate/common/environment"),n=a("translation:widget/translate/translang/transbtn"),l=a("translation:widget/translate/input/dir"),s=a("translation:widget/translate/translang/tolang"),r=a("translation:widget/translate/translang/langoften"),o={fromBtnClicked:function(){$(".from-language-list").toggle(0,function(){"block"===$(".from-language-list").css("display")?$(".select-from-language .arrow-down").addClass("lang-arrow-up"):"none"===$(".from-language-list").css("display")&&$(".select-from-language .arrow-down").removeClass("lang-arrow-up")})},hideFromWrap:function(){"block"===$(".from-language-list").css("display")&&($(".from-language-list").hide(),$(".select-from-language .arrow-down").removeClass("lang-arrow-up"))},fromlangChange:function(a){var e=a.lang,t=this;$(".from-language-list a").each(function(){var n=$(this);return n.attr("value")===e?(t.fromlangItemSelect({target:n,trans:a.trans,isDetected:a.isDetected}),!1):void 0})},fromlangItemSelect:function(a){var e=a.target,t=e.attr("value"),o=e.text();a.isDetected&&(o="检测到<span>"+o+"</span>"),$(".select-from-language .language-selected").attr("data-lang",t).html(o),"auto"===t?this.autoItemSelected({isDetected:a.isDetected}):this.normalItemSelected({isDetected:a.isDetected}),l.changeDir(t),$(".from-language-list .lang-selected").removeClass("lang-selected"),e.addClass("lang-selected"),this.hideFromWrap();var g=$(".select-to-language .language-selected").attr("data-lang");if(t===g){var i="en"===t?"zh":"en";s.tolangChange({lang:i})}a.trans&&n.doTrans(),r.setFromOften()},autoItemSelected:function(a){a.isDetected||t.set("fromLangIsAuto",!0),$(".from-to-exchange .exchange-mask").css({"background-position":"-2px 50%"});var e=$(".from-to-exchange");e.hasClass("language-btn")&&e.removeClass("language-btn").addClass("language-btn-disable"),e.attr("aflag",0)},normalItemSelected:function(a){a.isDetected||t.set("fromLangIsAuto",!1);var e=$(".from-to-exchange");e.hasClass("language-btn-disable")&&e.removeClass("language-btn-disable").addClass("language-btn")}};e.fromBtnClicked=function(){o.fromBtnClicked()},e.hideFromWrap=function(){o.hideFromWrap()},e.fromlangChange=function(a){o.fromlangChange(a)},e.fromlangItemSelect=function(a){o.fromlangItemSelect(a)}});
;/*!translation:widget/translate/input/prompt.js*/
define("translation:widget/translate/input/prompt",function(t,n){var a=t("translation:widget/translate/common/environment"),o=t("translation:widget/common/util"),r=t("translation:widget/translate/translang/fromlang"),e=(t("translation:widget/translate/translang/exchange"),{tpl:{promptTpl:['<span class="prompt-text">您输入的可能是:</span>','<a href="###" class="prompt-link source-lang" data-lang="$${lang}">$${langText}</a>'].join("")},hidePrompt:function(){$(".trans-prompt").hide()},showPrompt:function(t){var n=$(".select-from-language .language-selected"),e=a.get("langList"),i=e.hasOwnProperty(t);if(a.get("fromLangIsAuto")&&i)return r.fromlangChange({lang:t,isDetected:!0}),void this.hidePrompt();if($(".trans-correct").is(":hidden"))if(n.attr("data-lang")!==t&&e.hasOwnProperty(t)){var s=o.formatString(this.tpl.promptTpl,{lang:t,langText:e[t]});$(".trans-prompt .prompt-wrap").html(s).parent().show(),this.sendShowPromptLog()}else this.hidePrompt()},onPrompt:function(t){r.fromlangChange({lang:t,trans:!0}),this.hidePrompt()},sendShowPromptLog:function(){_hmt.push(["_trackEvent","首页","web端语种检测提示出现次数"])}});n.hide=function(){e.hidePrompt()},n.show=function(t){e.showPrompt(t)},n.onPrompt=function(t){e.onPrompt(t)}});
;/*!translation:widget/translate/input/correct.js*/
define("translation:widget/translate/input/correct",function(t,r){var e,n=t("translation:widget/translate/common/environment"),o=t("translation:widget/common/util"),c=(t("translation:widget/translate/input/prompt"),t("translation:widget/translate/input/translate")),i="http://correctxt.baidu.com/correctxt?callback=?";"https:"===location.protocol&&(i="https://correctxt.baidu.com/correctxt?callback=?");var s={tpl:['<span class="correct-text">您是不是要找:</span>','<a href="###" class="correct-link correct-query">$${correctxt}</a>'].join(""),showCorrect:function(){$(".trans-correct").show()},hideCorrect:function(){$(".trans-correct").hide()},isQueryInCheck:function(){return n.get("queryInCheck")},isEnglishQuery:function(t){return/^[a-z ]+$/gim.test(t)},setQueryIsInCheck:function(){n.set("queryInCheck",!0),setTimeout(function(){n.set("queryInCheck",!1)},200)},setLastInput:function(t){var r=this;return!this.isEnglishQuery(t)||t.length>20?void $(".trans-correct").hide():(clearTimeout(e),void(e=setTimeout(function(){var e=n.get("lastquery");t!==e&&(n.set("lastquery",t),r.ajaxCorrect(t))},300)))},getCorrect:function(t){if(this.setLastInput(t),!this.isQueryInCheck()){if(!this.isEnglishQuery(t)||t.length>20)return void $(".trans-correct").hide();var r=n.get("lastquery");t!==r&&(this.setQueryIsInCheck(t),n.set("lastquery",t),this.ajaxCorrect(t))}},ajaxCorrect:function(t){var r={text:decodeURIComponent(t),ie:"utf-8",version:"0",from:"FanyiWeb"};$.getJSON(i,r,$.proxy(this.renderCorrect,this))},renderCorrect:function(t){if(t.success&&t.origtxt!==t.correctxt){var r=o.formatString(this.tpl,{correctxt:t.correctxt});$(".trans-prompt").hide(),$(".trans-correct").html(r),this.showCorrect(),_hmt.push(["_trackEvent","首页","web端query纠错出现次数"])}else this.hideCorrect()},onCorrect:function(t){$("#baidu_translate_input").val(t),c.onTranslate(),this.hideCorrect()}};r.hide=function(){s.hideCorrect()},r.show=function(t){s.getCorrect(t)},r.onCorrect=function(t){s.onCorrect(t)}});
;/*!translation:widget/translate/input/urlQueryHandler.js*/
define("translation:widget/translate/input/urlQueryHandler",function(r,t){var l={};l.tpl=['<div class="url-tip">',"点击翻译按钮，可以对您输入的网站进行全文翻译。","</div>"].join(""),l.dealUrlQuery=function(){$(".operate-btn").css("display","none"),$(".ordinary-wrap").length>0?$(".ordinary-wrap").html(this.tpl):($(".output-wrap").html(this.tpl),$(".url-tip").css({margin:"10px"}))},t.dealUrlQuery=function(){l.dealUrlQuery()}});
;/*!translation:widget/translate/input/inputSug.js*/
define("translation:widget/translate/input/inputSug",function(t,e){function n(){d=!1,m.empty().hide()}function a(t,e){if(d){m.empty().show(),t.length>4&&(t=t.slice(0,4)),$.each(t,function(t,n){n.kRest=n.k.substr(e.length),n.queryInK=n.k.substr(0,e.length)});var n=f("tplSugItem",{data:t,query:e});m.html(n)}}function s(){return"none"!==m.css("display")?m.find(".sug-item").size():0}function i(){var t=m.find(".sug-item-selected");return t.index(".sug-item")}function u(t){if(38===t.which||40===t.which){var e=s();if(e>0){var a=i(),u=0,r=$(".sug-item");t.preventDefault(),t.stopPropagation(),38===t.which?u=-1===a?e-1:(a+e-1)%e:40===t.which&&(u=(a+e+1)%e),r.removeClass("sug-item-selected");var o=r.eq(u);o.addClass("sug-item-selected");var l=o.attr("data-sug-title");h.val(l),p.onTranslate()}}if(13===t.which){d=!1;var o=$(".sug-item-selected");if(o.size()>0)return t.preventDefault(),t.stopPropagation(),o.trigger("click"),void(v=!0);if("none"!==m.css("display"))return y=!0,t.preventDefault(),t.stopPropagation(),void n()}}function r(){return v}function o(t){v=t}function l(){return y}function g(t){y=t}function c(t){t=t.replace(/(^\s*)|(\s*$)/g,"");for(var e=/^[a-zA-Z]+([\-'][a-zA-Z]+)*$/,n=t.split(/\s+/),a=0,s=n.length;s>a;a++)if(!e.test(n[a]))return!1;return!0}var d,f=t("translation:widget/common/tools/template"),p=t("translation:widget/translate/input/translate"),h=$("#baidu_translate_input"),m=$("#sug-wrap"),v=!1,y=!1,w={init:function(){this.sugIdx=0,m.on("click",".sug-item",function(){var t=$(this).attr("data-sug-title"),e=$(this).index()+1;h.val(t),p.onTranslate(),n(),_hmt.push(["_trackEvent","首页","Web Sug点击"]),_hmt.push(["_trackEvent","首页","Web Sug 第"+e+"条点击"])}),m.on("mouseenter",".sug-item",function(){var t=$(".sug-item");t.removeClass("sug-item-selected"),$(this).addClass("sug-item-selected")}).on("mouseleave",".sug-item",function(){var t=$(".sug-item");t.removeClass("sug-item-selected")}),$(document).on("click",function(t){var e=$(t.target);"none"===m.css("display")||e.hasClass("trans-input-wrap")||e.parents(".trans-input-wrap").length>0||n()})},loadSug:function(){var t=this,e=$(".select-from-language .language-selected").attr("data-lang"),s=$(".select-to-language .language-selected").attr("data-lang");if(("en"===e||"auto"===e)&&"zh"===s||("zh"===e||"auto"===e)&&"en"===s){var i=h.val();i=c(i)?i.replace(/^\s*/,"").replace(/\s+/g," "):$.trim(i),i?(t.sugIdx++,d=!0,function(e){$.ajax({url:"/sug",type:"POST",dataType:"json",data:{kw:i},success:function(n){if(!n.errno&&n.data.length>0){if(e!==t.sugIdx)return;a(n.data,i)}else m.empty().hide()},error:function(){m.empty().hide()}})}(t.sugIdx)):n()}}};$(function(){w.init()}),e.loadSug=function(){w.loadSug()},e.clearAndHideSug=n,e.onTextAreaKeyDown=u,e.getTranslatedByKeyDown=r,e.setTranslatedByKeyDown=o,e.getCloseSugByEnter=l,e.setCloseSugByEnter=g});
;/*!translation:widget/translate/input/clear.js*/
define("translation:widget/translate/input/clear",function(t,n){var e=t("translation:widget/translate/input/textarea"),a=t("translation:widget/translate/input/soundicon"),i=t("translation:widget/translate/input/correct"),r=t("translation:widget/translate/input/prompt"),l=t("translation:widget/translate/output/output"),u=t("translation:widget/translate/output/bottomBanner"),o=t("translation:widget/translate/input/hash"),s=t("translation:widget/translate/input/inputSug"),c=t("translation:widget/translate/input/inputFavo"),p={clearBtn:$(".textarea-clear-btn"),clearInput:function(){r.hide(),a.hide(),c.resetBtn(),this.hideIcon(),i.hide(),e.empty(),s.clearAndHideSug(),$(".textarea-bg-text").html("")},clearAll:function(){l.clearOutputWrap(),this.clearInput(),this.setEmptyHash(),u.sendIndexBannerLog({source:"clear"})},showIcon:function(){this.clearBtn.show()},hideIcon:function(){this.clearBtn.hide()},getElem:function(){return this.clearBtn},setEmptyHash:function(){o.setHash({query:""})}};n.clearAll=function(){p.clearAll()},n.clearInputAndOutput=function(){p.clearInput(),l.clearOutputWrap()},n.show=function(){p.showIcon()},n.hide=function(){p.hideIcon()},n.getElem=function(){return p.getElem()}});
;/*!translation:widget/translate/input/textarea.js*/
define("translation:widget/translate/input/textarea",function(t,n){var i=$("#baidu_translate_input"),e=t("translation:widget/translate/input/sameHeightHandler"),a=t("translation:widget/translate/input/correct"),r=t("translation:widget/translate/input/urlQueryHandler"),o=t("translation:widget/common/util"),s=t("translation:widget/translate/input/clear"),u=t("translation:widget/translate/history/history"),l=t("translation:widget/translate/details/festivalLink"),h={dom:{inputWrap:$(".input-wrap"),textareaBg:$(".textarea-bg")},init:function(){this.initHeight(),this.bindEvent()},initHeight:function(){i.attr({"data-height":i.height()})},bindEvent:function(){i.on("focus",$.proxy(this.onFocus,this)).on("blur",$.proxy(this.onBlur,this)),$(".textarea-wrap .textarea-bg .prompt-text").on("click",function(){i.focus()}),$(window).on("resize.textarea",function(){e.sameHeight()})},onFocus:function(){this.dom.inputWrap.addClass("input-wrap-focus"),u.onHistoryInput(),l.onInput()},onBlur:function(){this.dom.inputWrap.removeClass("input-wrap-focus")},empty:function(){i.val("")},resize:function(){var t=i.attr("data-height"),n=i,a=n.parents(".textarea-wrap"),r=n.parents(".input-wrap");a.height(t),n.height(t),r.outerHeight("auto");var o;o=$("#baidu_translate_input")[0].scrollHeight,$("#baidu_translate_input")[0].scrollHeight&&parseInt($("#baidu_translate_input")[0].scrollHeight,10)>=t&&(a.height($("#baidu_translate_input")[0].scrollHeight),n.height(a.height())),e.sameHeight()},showPlaceholder:function(){this.dom.textareaBg.show()},hidePlaceholder:function(){this.dom.textareaBg.hide()},hasQuery:function(t){s.show(),this.hidePlaceholder(),this.resize(),a.show(t),o.isUrl(t)&&r.dealUrlQuery()},noQuery:function(){s.clearAll()}};n.init=function(){h.init()},n.resize=function(){h.resize()},n.empty=function(){h.empty(),h.resize(),h.showPlaceholder(),i.focus()},n.getVal=function(){return $.trim(i.val())},n.getElem=function(){return i},n.focus=function(){i.focus()},n.hasQuery=function(t){h.hasQuery(t)},n.noQuery=function(){h.noQuery()}});
;/*!translation:widget/translate/details/festivalLink.js*/
define("translation:widget/translate/details/festivalLink",function(i,n){var t=i("translation:widget/translate/input/textarea"),a={init:function(){a.adjustMargin(),a.bindEvents()},bindEvents:function(){_hmt.push(["_trackEvent","首页","web端时效文字链展示"]),$("#festival-link").on("click",function(){_hmt.push(["_trackEvent","首页","web端时效文字链点击"])})},adjustMargin:function(){$(".history-wrap").css("margin-bottom","10px"),$(".hot-link-middle").css("margin-top","15px")},showFestivalLink:function(){$("#festival-link-container").show()},hideFestivalLink:function(){$("#festival-link-container").hide()},onInput:function(){var i=$.trim(t.getVal());i?a.hideFestivalLink():a.showFestivalLink()}};n.hideFestivalLink=a.hideFestivalLink,n.onInput=a.onInput,n.init=a.init});
;/*!translation:widget/translate/input/fontSize.js*/
define("translation:widget/translate/input/fontSize",function(t,e){function s(t,e){var s=t[0],a=t.height(),n=s.scrollHeight,l=t.css("overflow");if(a>=n){t.height(e),t.css("overflow","hidden");var i=s.scrollHeight;return t.height(a),t.css("overflow",l),i}return n}function a(){var t=parseInt(i.css("line-height"),10),e=s(i,t);return h=Math.ceil(e/t),h>1}function n(){i[0].offsetHeight;var t=i.text();v&&"10.0"===v[1]?i.removeClass("small-font").text(t):i.removeClass("small-font"),o.removeClass("small-font"),r.removeClass("small-font"),i[0].offsetHeight,f=!0}function l(){i[0].offsetHeight;var t=i.text();v&&"10.0"===v[1]?i.addClass("small-font").text(t):i.addClass("small-font"),o.addClass("small-font"),r.addClass("small-font"),i[0].offsetHeight,f=!1}var i=$("#baidu_translate_input"),o=$(".output-wrap"),r=$("#textarea-bg-text"),f=!0,h=0,c=/MSIE\s([\d.]+)/,v=window.navigator.userAgent.match(c),d={switchFontSize:function(){var t=a();if(t){if(f){var e=i.val(),s=e.length;2===h&&e.indexOf("\n")===s-1&&s>1||l()}}else n(),t=a(),t&&l();return t}};e.switchFontSize=d.switchFontSize});
;/*!translation:widget/translate/input/autoRequest.js*/
define("translation:widget/translate/input/autoRequest",function(t){var a=t("translation:widget/translate/common/hash"),n=t("translation:widget/common/util"),e=t("translation:widget/translate/input/textarea"),r=t("translation:widget/translate/translang/fromlang"),i=t("translation:widget/translate/translang/tolang"),s=t("translation:widget/translate/input/translate"),l=t("translation:widget/translate/common/environment"),o=t("translation:widget/translate/input/hash"),g=t("translation:widget/translate/config/trans"),u=t("translation:widget/translate/input/clear"),c=t("translation:widget/translate/input/fontSize"),d={};d.init=function(){this.compatibleTrans(),this.bindEvent()},d.bindEvent=function(){$(window).on("hashchange",$.proxy(this.onHashChange,this))},d.onHashChange=function(t){if(t.preventDefault(),l.get("isInRtTransState")===!0)return void l.set("isInRtTransState",!1);var e=a.get(),r=$(".select-from-language .language-selected").attr("data-lang"),i=$(".select-to-language .language-selected").attr("data-lang"),s=$.trim($("#baidu_translate_input").val()),o=e.query;o=n.decodeHTML(o),o&&(/firefox/i.test(navigator.userAgent)===!0&&(o=o.replace(/%0A/gi,"\r\n"),o=unescape(o)),(e.from!==r||e.to!==i||e.query!==s)&&this.request(!1,s))},d.request=function(t){var l,o=a.get(),g=o.from,d=o.to,h=e.getElem();l=t?h.val():o.query,l.length>0?(l=l.replace(/\\r\\n/gi,"\n"),l=n.decodeHTML(l),/firefox/i.test(navigator.userAgent)===!0&&(l=l.replace(/%0A/gi,"\r\n"),l=unescape(l)),t||h.val(l),c.switchFontSize(),e.hasQuery(l)):u.clearInputAndOutput(),e.focus();var m=!1;g&&r.fromlangChange({lang:g,trans:m}),d&&i.tolangChange({lang:d,trans:m}),s.onTranslate()},d.compatibleTrans=function(){var t=l.get("remote"),a=$.trim(t.query),s=$.trim(t.lang),u=/(.+)2(.+)/i,c=u.test(s)===!0,d=c?s.match(u)[1]:!1,h=c?"auto"!==s.match(u)[2]?s.match(u)[2]:common.server.locale:!1;if(d&&h){i.tolangChange({lang:h,trans:!1}),r.fromlangChange({lang:d,trans:!1}),a=n.decodeHTML(a),o.setHash({from:d,to:h,query:a});var m=n.getIEVersion();(m&&8>m||encodeURIComponent(a).length>g.MAX_URL_COUNT)&&(a=a.replace(/\\r\\n/gi,"\r\n"),e.getElem().val(a),this.request(!0))}else this.request()},$(function(){d.init()})});
;/*!translation:widget/translate/input/sound.js*/
define("translation:widget/translate/input/sound",function(t,e){var n={timer:null,makeSound:function(t,e){var n=$(t);n.addClass("op-sound-active"),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){n.removeClass("op-sound-active")},2e3),BTPM.setUrl(e)}};e.makeSound=function(t,e){n.makeSound(t,e)}});
;/*!translation:widget/translate/input/rttrans.js*/
define("translation:widget/translate/input/rttrans",function(t,e){function n(){var t=$(".j-tips-container");1===t.size()&&t.hide()}var i=t("translation:widget/translate/common/environment"),r=t("translation:widget/common/util"),a=t("translation:widget/translate/input/textarea"),s=t("translation:widget/translate/common/string"),o=(t("translation:widget/common/cookie"),t("translation:widget/translate/input/translate")),l=(t("translation:widget/translate/input/urlQueryHandler"),{timer:null,prevQuery:"",onRtTrans:function(t,e){var n=a.getVal(),r=i.get("isInRealtimeMode"),s=this;if(!n||!r)return void(this.timer&&clearTimeout(this.timer));var o=8===t.which?500:200;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){s.doTrans(e)},o)},doTrans:function(t){var e=a.getVal();if(e&&!r.isUrl(e)){if($(".output-wrap").children().length<=0||"paste"===t)o.onTranslate({transtype:"realtime"}),n();else if(e!==this.prevQuery){if(s.getByte(e)>500&&s.getByte(this.prevQuery)>500)return;o.onTranslate({transtype:"realtime"}),n()}this.prevQuery=e}}});e.onRtTrans=function(t,e){l.onRtTrans(t,e)}});
;/*!translation:widget/translate/input/inputSoungUrlHandler.js*/
define("translation:widget/translate/input/inputSoungUrlHandler",function(t,n){var e=t("translation:widget/translate/input/textarea"),a=t("translation:widget/translate/common/soundURIGenerator"),r={getInputSoundUrl:function(){var t=$(".select-from-language .language-selected").attr("data-lang"),n=e.getVal(),r="";return"yue"===t&&(t="cte"),r=a.generateURI({lan:t,text:encodeURIComponent(n)})}};n.getInputSoundUrl=function(){return r.getInputSoundUrl()}});
;/*!translation:widget/translate/zonedword/selection.js*/
define("translation:widget/translate/zonedword/selection",function(e,t){var n=(e("translation:widget/translate/common/string"),{getSelectQuery:function(e){var t=e.target,n=t.selectionStart,o=t.selectionEnd,c="";return c=void 0!==n&&void 0!==o?$(t).val().substring(n,o):this.getText()},getText:function(){var e="";return document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange().text),e=e.toString(),e=e.replace(/^\s+/g,"").replace(/\s+$/g,"")},clearSelectionZone:function(e){if("undefined"!=typeof e.target.setSelectionRange)e.target.setSelectionRange(0,0);else if("undefined"!=typeof window.getSelection&&window.getSelection().rangeCount>0)window.getSelection().collapseToStart();else if("undefined"!=typeof document.body.createTextRange){var t=document.body.createTextRange();t.moveStart("character",0),t.moveEnd("character",0)}}});t.getText=function(e){return n.getSelectQuery(e)},t.clearSelectionZone=function(e){n.clearSelectionZone(e)}});
;/*!translation:widget/translate/zonedword/loading.js*/
define("translation:widget/translate/zonedword/loading",function(n,o){var i=(n("translation:widget/translate/common/string"),{show:function(){$(".zonedword-loading-tip").show()},hide:function(){$(".zonedword-loading-tip").hide(),$(".zonedword-error-tip").hide()}});o.show=function(){i.show()},o.hide=function(){i.hide()}});
;/*!translation:widget/translate/zonedword/dict.js*/
define("translation:widget/translate/zonedword/dict",function(t,o){var e=t("translation:widget/common/tools/template"),n=t("translation:widget/translate/zonedword/loading"),r={render:function(t){var o,r=t.data,d=t.top,a=t.left,i={};n.hide(),i.tplData=$.parseJSON(r),o=e("tplDictZonedword",i),$(".zonedword-result").html(o);var l,w,s=$(window).scrollTop(),p=$(window).height(),c=$("#zonedword-wrap").outerHeight();d-30>p-c?(w=d+s-60-c,l=w>0?w:d+s):l=d+s,$("#zonedword-wrap").css({top:l,left:a}).show()}};o.render=function(t){r.render(t)}});
;/*!translation:widget/translate/zonedword/fanyi.js*/
define("translation:widget/translate/zonedword/fanyi",function(t,n){var r=t("translation:widget/translate/zonedword/loading"),a=t("translation:widget/translate/common/environment"),o=t("translation:widget/common/tools/template"),e={render:function(t){var n=t.data,e=t.top,d=t.left,i={},l=a.get("rtl"),w=$.inArray(t.toLang,l)>=0;i.tplData={},i.tplData.data=n,i.tplData.dir=w?"rtl":"ltr",r.hide();var s=o("tplOrdinaryZonedword",i);$(".zonedword-result").html(s);var p,g,c=$(window).scrollTop(),f=$(window).height(),m=$("#zonedword-wrap").outerHeight();e-30>f-m?(g=e+c-60-m,p=g>0?g:e+c):p=e+c,$("#zonedword-wrap").css({top:p,left:d}).show()}};n.render=function(t){e.render(t)}});
;/*!translation:widget/translate/zonedword/zonedFavo.js*/
define("translation:widget/translate/zonedword/zonedFavo",function(t,n,o){var a=t("translation:widget/translate/favo/favo"),e=t("translation:widget/translate/input/inputFavo"),i=new a({pos:"zonedword",target:$("#zonedword-wrap .op-favo")[0]});i.on("change",function(){e.query===this.query&&e.direction===this.direction&&e.check()}),o.exports=i});
;/*!translation:widget/translate/zonedword/wordWrap.js*/
define("translation:widget/translate/zonedword/wordWrap",function(t,e){var n=t("translation:widget/translate/common/string"),o=t("translation:widget/translate/zonedword/selection"),a=t("translation:widget/translate/zonedword/loading"),n=t("translation:widget/translate/common/string"),r=t("translation:widget/translate/zonedword/dict"),i=t("translation:widget/translate/zonedword/fanyi"),s=t("translation:widget/translate/common/environment"),d=t("translation:widget/translate/zonedword/zonedFavo"),l=null,u={dom:{from:$(".select-from-language .language-selected"),to:$(".select-to-language .language-selected")},showWrap:function(t){var e=s.get("isInFanyiWordMode"),a=o.getText(t),r=this;e&&this.mouseClickFlag&&(this.setMousePosition(t),l&&clearTimeout(l),l=setTimeout(function(){var e=s.get("dbClickHighlightZone");if(void 0!==e&&""!==e.query?(a=e.query,s.set("zonewordQueryFrom",e.area),s.remove("dbClickHighlightZone"),o.clearSelectionZone(t)):s.remove("zonewordQueryFrom"),!(a.length<=0)){var i={query:n.cutByByte(a,0,50)};$.ajax({url:"/langdetect",type:"POST",data:i,success:function(t){r.renderWrap(t,a)}})}},10))},hideWrap:function(){$("#zonedword-wrap").hide()},renderWrap:function(t,e){if(0===t.error&&t.lan){var n=this.dom.from.attr("data-lang"),o=this.dom.to.attr("data-lang"),r=t.lan?t.lan:n,i=r===o?n:o;$(".zonedword-search-input").val(e).attr("data-dir",r+"2"+i),this.setDetailLink(r,i,e),a.show(),$(".zonedword-result").empty(),this.ajaxGetTrans({fromLang:r,toLang:i,query:e})}},ajaxGetTrans:function(t){var e=this,n={from:t.fromLang,to:t.toLang,query:t.query,source:"txt"};$.ajax("/transapi",{type:"POST",data:n,success:function(n){e.transResultIsReturn(n,t.fromLang,t.toLang,t.query)}})},transResultIsReturn:function(t,e,n,o){if(!t||!t.error){var a=this.getWrapPosition().top,l=this.getWrapPosition().left;t&&t.type&&(1===t.type?(r.render({data:t.result,top:a,left:l}),d.init({query:o,type:1,from:e,to:n})):2===t.type&&(i.render({data:t.data,top:a,left:l,fromLang:e,toLang:n}),d.init({query:o,type:2,from:e,to:n})),_hmt.push(["_trackEvent","首页","划词翻译结果框出现次数"]),"keywords"===s.get("zonewordQueryFrom")&&_hmt.push(["_trackEvent","首页","Web重点词汇卡片highlight出划词翻译框次数"]))}},rightClickHideWrap:function(t){this.mouseClickFlag=!1;var e=1===$("#zonedword-wrap").attr("data-switch")?!0:!1;e||$("#zonedword-wrap").hide(),t&&2!==t.button&&3!==t.button&&(this.mouseClickFlag=!0,o.clearSelectionZone(t))},setMousePosition:function(t){this.top=t.clientY+30,this.left=t.pageX},getWrapPosition:function(){{var t=0,e=0,n=$(window).width()-$("#zonedword-wrap").outerWidth();$(window).height()-$("#zonedword-wrap").outerHeight()}return t=this.left<0?0:this.left,t=this.left>n?n:this.left,e=this.top<0?0:this.top,{top:e,left:t}},setDetailLink:function(t,e,n){var o="/#"+t+"/"+e+"/"+encodeURIComponent(n);$(".zonedword-detail-link").attr("href",o)}};e.showWrap=function(t){u.showWrap(t)},e.rightClickHideWrap=function(t){u.rightClickHideWrap(t)},e.hideWrap=function(){u.hideWrap()}});
;/*!translation:widget/translate/input/events.js*/
define("translation:widget/translate/input/events",function(t,n){function e(t){r(t),c.onRtTrans(t)}function a(t){var n="paste";c.onRtTrans(t,n),S.switchFontSize()}function i(t){k.onTextAreaKeyDown(t)}function r(t){var n=$("#baidu_translate_input").val(),e=f[0];if(!("input"!==t.type&&("oninput"in e&&(!T||"keyup"!==t.type||8!==t.which&&46!==t.which)||"keyup"!==t.type||38===t.which||40===t.which||k.getCloseSugByEnter()||13===t.which&&k.getTranslatedByKeyDown()))){var a=S.switchFontSize();a?k.clearAndHideSug():_.getByte(n)<=24&&k.loadSug()}if(E.hideWrap(),m.onHistoryInput(),v.onInput(),n){if(13===t.which)return k.getCloseSugByEnter()&&k.setCloseSugByEnter(!1),k.getTranslatedByKeyDown()?k.setTranslatedByKeyDown(!1):w.onTranslate({transtype:"enter"}),void o();s.hasQuery(n)}else y.translateStopRepeat()||y.shutdownAudio(),h.clearAll()}function o(){var t=$(".j-tips-container");1===t.size()&&t.hide()}var s=t("translation:widget/translate/input/textarea"),u=t("translation:widget/translate/input/soundicon"),l=t("translation:widget/translate/input/sound"),p=t("translation:widget/translate/input/correct"),c=t("translation:widget/translate/input/rttrans"),d=t("translation:widget/translate/input/prompt"),w=t("translation:widget/translate/input/translate"),g=t("translation:widget/translate/input/inputSoungUrlHandler"),h=t("translation:widget/translate/input/clear"),m=t("translation:widget/translate/history/history"),v=t("translation:widget/translate/details/festivalLink"),f=s.getElem(),y=t("translation:widget/translate/dictionary/simplemeans"),S=t("translation:widget/translate/input/fontSize"),k=t("translation:widget/translate/input/inputSug"),_=t("translation:widget/translate/common/string"),E=t("translation:widget/translate/zonedword/wordWrap"),T="oninput"in f[0]&&"documentMode"in document&&9===document.documentMode;n.init=function(){var t=this;f.on("input",e).on("keyup",e).on("paste",a).on("keydown",i),h.getElem().on("click",function(t){t.preventDefault(),y.translateStopRepeat()||y.shutdownAudio(),h.clearAll(),S.switchFontSize(),k.clearAndHideSug(),_hmt.push(["_trackEvent","首页","web端点击清空输入框"])}),u.getElem().on("click",function(n){n.preventDefault(),y.judgeStopRepeat(),t.timer&&clearTimeout(t.timer);var e=g.getInputSoundUrl();l.makeSound(this,e),_hmt.push(["_trackEvent","首页","web端原文发音TTS"]),_hmt.push(["_trackEvent","首页","web端点击发音按钮"])}),u.getElem().on("mouseover",function(){var n=$(this);t.timer=setTimeout(function(){y.judgeStopRepeat();var t=g.getInputSoundUrl();l.makeSound(n,t),_hmt.push(["_trackEvent","首页","web端原文发音TTS"]),_hmt.push(["_trackEvent","首页","web端点击发音按钮"])},500)}),u.getElem().on("mouseout",function(){t.timer&&clearTimeout(t.timer)}),$(".trans-correct").on("click",".correct-query",function(t){t.preventDefault();var n=$(this).text();p.onCorrect(n),_hmt.push(["_trackEvent","首页","web端query纠错点击次数"])}),$(".trans-prompt").on("click",".source-lang",function(t){t.preventDefault();var n=$(this).attr("data-lang");d.onPrompt(n),_hmt.push(["_trackEvent","首页","web端点击语种检测提示"])}),$(".trans-input-wrap").on("click",".input-wrap",function(t){var n=$(t.target);(n.hasClass("input-wrap")||n.hasClass("textarea-wrap"))&&(t.preventDefault(),s.focus())})}});
;/*!translation:widget/translate/input/indexlog.js*/
define("translation:widget/translate/input/indexlog",function(n){var e=n("translation:widget/common/sendLog"),t=n("translation:widget/translate/common/hash"),r={init:function(){this.sendIndexLog(),this.bannerIndexDisplayLog()},sendIndexLog:function(){var n=encodeURIComponent(document.referrer);n||(n="noref");var t={referer:n},r=this.getQueryString("aldtype");r&&(t.op_type="ald"+r),e.sendIndexDisplayLog(t),_hmt.push(["_trackEvent","首页","web端PV"]);var a=parseInt(r,10);16047===a?_hmt.push(["_trackEvent","首页","web端泛需求阿拉丁导入PV"]):85===a?_hmt.push(["_trackEvent","首页","web端词典阿拉丁导入PV"]):23===a&&_hmt.push(["_trackEvent","首页","web端翻译阿拉丁导入PV"])},bannerIndexDisplayLog:function(){var n=t.get();if(!n||n&&!n.query){if($(".spread-slide a").length<=0)return;_hmt.push(["_trackEvent","web端翻译—banner总展现","web端翻译—首屏banner展现"])}},getQueryString:function(n){var e=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substring(1).match(e);return null!=t?t[2]:null}};$(function(){r.init()})});
;/*!translation:widget/translate/input/input.js*/
define("translation:widget/translate/input/input",function(t){var n=t("translation:widget/translate/input/events"),a=t("translation:widget/translate/input/textarea");t("translation:widget/translate/input/flash"),$(function(){n.init(),a.init(),alog("speed.set","drt",+new Date)}),t("translation:widget/translate/input/autoRequest"),t("translation:widget/translate/input/indexlog")});
;/*!translation:widget/translate/output/favor.js*/
define("translation:widget/translate/output/favor",function(t,e){var a=t("translation:widget/translate/common/environment"),r=t("translation:widget/translate/output/mouseover"),o=t("translation:widget/login/login"),n={checkfavor:function(t){var e=this,r=t.target,o=t.from,n=$(".select-from-language .language-selected").attr("data-lang")+"2"+$(".select-to-language .language-selected").attr("data-lang"),i=$.trim($("#baidu_translate_input").val()).replace(/<br( \/)?>/gi,"&lt;br$1&gt;"),d=t.category,c=t.firstScreen||!1;"zonedword"===o&&(n=$(".zonedword-wrap .zonedword-search-input").attr("data-dir"),i=$.trim($(".zonedword-wrap .zonedword-search-input").val()).replace(/<br( \/)?>/gi,"&lt;br$1&gt;"));var l={req:"check",fanyi_src:i,direction:n,datatype:"json",signature:a.get("token"),type:d};r||0!==d||"zonedword"===o?r||1!==d||"zonedword"===o?r||"zonedword"!==o||(r=$(".zonedword-wrap .op-favo")[0]):r=$(".dictionary-wrap .op-favo")[0]:r=$(".ordinary-wrap .op-favo")[0],$.ajax({url:"/pccollection",type:"POST",data:l,dataType:"json",success:function(t){if(0===t.error&&1===t["in"]){{t.category}e.favorIsSaved({id:t.result.id,from:o,target:r,firstScreen:c})}else e.favorIsNotSaved({from:o,target:r})}})},favorIsSaved:function(t){var e=(t.from,t.id),a=t.target,o=t.firstScreen||!1;o||($(a).attr("data-hover-tip-text","已收藏"),r.isover({target:a})),$(a).attr({"favo-id":e,"data-hover-tip-text":"取消收藏",title:"取消收藏"}).addClass("op-favo-cur"),setTimeout(function(){r.isout()},2e3)},favorIsNotSaved:function(t){var e=t.from,a=t.target;return"zonedword"==e?void $(".zonedword-wrap .op-favo").attr({"favo-id":""}).removeClass("op-favo-cur"):void $(a).attr({"favo-id":"","data-hover-tip-text":"收藏结果"}).removeClass("op-favo-cur")},favorBtnClick:function(t){var e=t.target,r=t.from,n=a.get("account");n.user_id?(this.execAdd({target:e,from:r}),!n.add_name&&window.confirm("嗨，你的账户需要先添加个名字喔!")&&window.open("https://passport.baidu.com/v2/?ucenteradduname")):o.instance&&o.instance.show()},execAdd:function(t){var e,a=t.target,o=$(a),n=t.from;o.hasClass("op-favo-cur")?(this.deleteFavor({id:o.attr("favo-id"),target:a}),_hmt.push(["_trackEvent","首页","web端总取消收藏"]),o.attr("data-hover-tip-text","已取消收藏"),r.isover({target:a}),setTimeout(function(){r.isout(),o.attr("data-hover-tip-text","收藏结果")},2e3)):("zonedword"===n?_hmt.push(["_trackEvent","首页","web端划词翻译添加收藏"]):o.parents(".dictionary-wrap").length>0?(e=1,_hmt.push(["_trackEvent","首页","web端词典结果添加收藏"])):(e=0,_hmt.push(["_trackEvent","首页","web端译文框添加收藏"])),this.realAdd({target:a,from:n,category:e}))},realAdd:function(t){var e,r=this,o=t.target,n=t.from,i="",d=t.category,c=$.trim($("#baidu_translate_input").val().replace(/<br( \/)?>/gi,"&lt;br$1&gt;")),l=$(".select-from-language .language-selected").attr("data-lang")+"2"+$(".select-to-language .language-selected").attr("data-lang");"zonedword"===n?(i="",l=$(".zonedword-wrap .zonedword-search-input").attr("data-dir"),c=$.trim($(".zonedword-wrap .zonedword-search-input").val()).replace(/<br( \/)?>/gi,"&lt;br$1&gt;"),$(".zonedword-result .dictionary-output").length>0?(d=1,e=$(".zonedword-result .dictionary-output"),e.each(function(){i+=$(this).find(".dictionary-title").html(),i+=$(this).find(".dictionary-comment").html()}),i=i.replace(/<(?!\/(div|p))[^<>]*>/gi,"").replace(/<\/(div|p)>/gi,"\r\n"),i=i.replace(/&gt;/gim,">"),i=i.replace(/&lt;/gim,"<"),i=i.replace("详细释义>>","")):(d=0,e=$(".zonedword-result .output-bd").find(".target-output"),e.each(function(){i+=$(this).html().replace(/<br( \/)?>/gi,"&lt;br$1&gt;")+"<br />"}),i=i.replace(/<(?!br \/)[^<>]*>/gi,"").replace(/<br \/>/gi,"\r\n"))):1===d?(e=$(".dictionary-wrap .dictionary-output"),e.each(function(){i+=$(this).find(".dictionary-title").html(),i+=$(this).find(".dictionary-comment").html()}),i=i.replace(/<(?!\/(div|p))[^<>]*>/gi,"").replace(/<\/(div|p)>/gi,"\r\n"),i=i.replace(/&gt;/gim,">"),i=i.replace(/&lt;/gim,"<"),i=i.replace("详细释义>>","")):(e=$(".output-wrap .output-bd").find(".target-output"),e.each(function(){i+=$(this).html().replace(/<br( \/)?>/gi,"&lt;br$1&gt;")+"<br />"}),i=i.replace(/<(?!br \/)[^<>]*>/gi,"").replace(/<br \/>/gi,"\r\n")),i=i.replace(/&nbsp;/gim," ");var s=a.get("maxCollectionCount");if(c.length>s||i.length>s)return void alert("囧, 原文和译文要是在"+s+"字以下就好啦 ^_^");var p={req:"add",fanyi_src:c,fanyi_dst:i,direction:l,datatype:"json",type:d,signature:a.get("token")};$.ajax("/pccollection",{type:"POST",data:p,success:function(t){0===t.error?r.favorIsSaved({id:t.id,from:n,target:o}):-6===t.error}})},deleteFavor:function(t){var e=t.target,r="/pccollection?req=del&id="+t.id+"&datatype=json&signature="+a.get("token");$.ajax({url:r,type:"get",dataType:"json",success:function(t){0===t.error&&$(e).removeClass("op-favo-cur").attr("data-hover-tip-text","已取消收藏")}})}};e.checkfavor=function(t){n.checkfavor(t)},e.favorBtnClick=function(t){n.favorBtnClick(t)}});
;/*!translation:widget/translate/setting/setting.js*/
define("translation:widget/translate/setting/setting",function(e){var t=e("translation:widget/translate/common/environment"),s=e("translation:widget/common/cookie"),i=e("translation:widget/login/login"),o=e("translation:widget/translate/history/history"),n={init:function(){this.initSetting(),this.bindEvents()},initSetting:function(){var e=s.getCookie("REALTIME_TRANS_SWITCH");e?"0"===e?($(".realtrans-switch").removeClass("setting-checked"),t.set("isInRealtimeMode",!1)):t.set("isInRealtimeMode",!0):e||(s.setCookie("REALTIME_TRANS_SWITCH",1,{expires:864e8}),t.set("isInRealtimeMode",!0));var i=s.getCookie("FANYI_WORD_SWITCH");i?"0"===i?($(".zonedword-switch").removeClass("setting-checked"),t.set("isInFanyiWordMode",!1)):t.set("isInFanyiWordMode",!0):i||(s.setCookie("FANYI_WORD_SWITCH",1,{expires:864e8}),t.set("isInFanyiWordMode",!0));var o=s.getCookie("HISTORY_SWITCH");o?"0"===o?($(".history-switch").removeClass("setting-checked"),t.set("isInHistoryMode",!1)):"1"===o&&t.set("isInHistoryMode",!0):(s.setCookie("HISTORY_SWITCH",1,{expires:864e8}),t.set("isInHistoryMode",!0));var n=s.getCookie("SOUND_SPD_SWITCH");n?"0"===n?($("#spd-slow").addClass("sound-spd-radio-checked"),t.set("soundSpdMode","slow")):"2"===n?($("#spd-fast").addClass("sound-spd-radio-checked"),t.set("soundSpdMode","fast")):($("#spd-normal").addClass("sound-spd-radio-checked"),t.set("soundSpdMode","normal")):(s.setCookie("SOUND_SPD_SWITCH",1,{expires:864e8}),$("#spd-normal").addClass("sound-spd-radio-checked"),t.set("soundSpdMode","normal"));var d=s.getCookie("SOUND_PREFER_SWITCH");d?"0"===d?($("#prefer-uk").addClass("sound-prefer-radio-checked"),t.set("soundPreferMode","uk")):($("#prefer-en").addClass("sound-prefer-radio-checked"),t.set("soundPreferMode","en")):(s.setCookie("SOUND_PREFER_SWITCH",1,{expires:864e8}),$("#prefer-en").addClass("sound-prefer-radio-checked"),t.set("soundPreferMode","en"))},bindEvents:function(){$(".setting-btn").on("click",$.proxy(this.settingBtnClick,this)),$(document).on("click",$.proxy(this.documentClick,this)),$(".collection-btn").on("click",$.proxy(this.collectionClick,this)),$(".realtrans-switch").on("click",$.proxy(this.setRealtransSwitch,this)),$(".translate-setting .zonedword-switch").on("click",$.proxy(this.setZonedwordSwitch,this)),$(".history-switch").on("click",$.proxy(this.setHistorySwitch,this)),$(".sound-spd-switch").on("click",".sound-spd-radio",$.proxy(this.soundSpdSwitch,this)),$(".sound-prefer-switch").on("click",".sound-prefer-radio",$.proxy(this.soundPreferSwitch,this))},settingBtnClick:function(){$(".translate-setting .setting-options").toggle(),$(".setting-btn").toggleClass("setting-btn-focus"),_hmt.push(["_trackEvent","首页","web端点击设置"])},hideSettingTips:function(){$(".setting-btn").removeClass("setting-btn-focus"),$(".setting-options").hide()},documentClick:function(e){var t=$(e.target);"block"===$(".setting-options").css("display")&&(t.hasClass("setting-btn")||t.hasClass("setting-options")||t.parents(".setting-options").length>0||this.hideSettingTips())},collectionClick:function(){var e=t.get("account");if(_hmt.push(["_trackEvent","首页","web端点击收藏夹"]),""===e.user_name&&""===e.user_id)i.instance&&i.instance.show();else{var s=$(".collection-btn").data("href");window.location.href=s}},setRealtransSwitch:function(){var e=$(".realtrans-switch");e.toggleClass("setting-checked");var i;e.hasClass("setting-checked")?(t.set("isInRealtimeMode",!0),i=1,_hmt.push(["_trackEvent","首页","web端实时翻译打开"])):(t.set("isInRealtimeMode",!1),i=0,_hmt.push(["_trackEvent","首页","web端实时翻译关闭"])),s.setCookie("REALTIME_TRANS_SWITCH",i,{expires:864e8})},setZonedwordSwitch:function(){var e=$(".zonedword-switch");e.toggleClass("setting-checked");var i;e.hasClass("setting-checked")?(i=1,t.set("isInFanyiWordMode",!0),_hmt.push(["_trackEvent","首页","web端划词翻译打开"])):(i=0,t.set("isInFanyiWordMode",!1),_hmt.push(["_trackEvent","首页","web端划词翻译关闭"])),s.setCookie("FANYI_WORD_SWITCH",i,{expires:864e8})},setHistorySwitch:function(){var e=$(".history-switch");e.toggleClass("setting-checked");var i;e.hasClass("setting-checked")?(i=1,t.set("isInHistoryMode",!0),_hmt.push(["_trackEvent","首页","设置-历史记录-开启"])):(i=0,t.set("isInHistoryMode",!1),_hmt.push(["_trackEvent","首页","设置-历史记录-关闭"])),o.onHistoryInput(),s.setCookie("HISTORY_SWITCH",i,{expires:864e8})},soundSpdSwitch:function(e){var i=$(e.target);if(!i.hasClass("sound-spd-radio-checked")){$(".sound-spd-switch .sound-spd-radio-checked").removeClass("sound-spd-radio-checked"),i.addClass("sound-spd-radio-checked");var o=i.attr("data-value");"slow"===o?(s.setCookie("SOUND_SPD_SWITCH",0,{expires:864e8}),_hmt.push(["_trackEvent","首页","设置-发音语速-较慢"])):"normal"===o?(s.setCookie("SOUND_SPD_SWITCH",1,{expires:864e8}),_hmt.push(["_trackEvent","首页","设置-发音语速-中速"])):(s.setCookie("SOUND_SPD_SWITCH",2,{expires:864e8}),_hmt.push(["_trackEvent","首页","设置-发音语速-较快"])),t.set("soundSpdMode",o)}},soundPreferSwitch:function(e){var i=$(e.target);if(!i.hasClass("sound-prefer-radio-checked")){$(".sound-prefer-switch .sound-prefer-radio-checked").removeClass("sound-prefer-radio-checked"),i.addClass("sound-prefer-radio-checked");var o=i.attr("data-value");"en"===o?(s.setCookie("SOUND_PREFER_SWITCH",1,{expires:864e8}),_hmt.push(["_trackEvent","首页","设置-英语发音偏好-美式"])):(s.setCookie("SOUND_PREFER_SWITCH",0,{expires:864e8}),_hmt.push(["_trackEvent","首页","设置-英语发音偏好-英式"])),t.set("soundPreferMode",o)}}};$(function(){n.init()})});
;/*!translation:widget/translate/translang/translang.js*/
define("translation:widget/translate/translang/translang",function(t){var n=(t("translation:widget/translate/common/environment"),t("translation:widget/translate/translang/fromlang")),a=t("translation:widget/translate/translang/tolang"),e=t("translation:widget/translate/translang/exchange"),l=t("translation:widget/translate/translang/transbtn"),c={init:function(){this.bindEvents()},bindEvents:function(){$(".trans-operation-wrapper").on("click",".select-from-language",$.proxy(this.clickFromBtn,this)).on("click",".select-to-language",$.proxy(this.clickToBtn,this)).on("click",".from-to-exchange",$.proxy(this.clickExchangeBtn,this)).on("click",".from-language-list .language-data a",$.proxy(this.clickFromItem,this)).on("click",".to-language-list .language-data a",$.proxy(this.clickToItem,this)).on("click",".from-language-list .language-often li a",$.proxy(this.clickFromOfen,this)).on("click",".to-language-list .language-often li a",$.proxy(this.clickToOfen,this)),$("#translate-button").on("click",$.proxy(this.clickTranslate,this)),$(".manual-trans-btn").on("click",function(){_hmt.push(["_trackEvent","首页","web端点击人工翻译按钮"])}),$(".manual-trans-btn .expert-logo").on("click",function(){_hmt.push(["_trackEvent","首页","web端点击人工翻译文字链左侧小人头像进入首页的次数"])}),$(document).on("click",$.proxy(this.clickBody,this))},clickFromBtn:function(){n.fromBtnClicked(),_hmt.push(["_trackEvent","首页","web端点击源语言button"])},clickToBtn:function(){a.toBtnClicked(),_hmt.push(["_trackEvent","首页","web端点击目标语言button"])},clickExchangeBtn:function(){e.clickExchangeBtn(),_hmt.push(["_trackEvent","首页","点击翻译方向切换箭头"])},clickFromItem:function(t){n.fromlangItemSelect({target:$(t.target),trans:!0}),_hmt.push(["_trackEvent","首页","web端点击源语言列表item"])},clickToItem:function(t){a.tolangItemSelect({target:$(t.target),trans:!0}),_hmt.push(["_trackEvent","首页","web端点击目标语言列表item"])},clickTranslate:function(){l.transBtnClicked(),_hmt.push(["_trackEvent","首页","web端翻译button点击次数"])},clickBody:function(t){var e=$(t.target);"block"===$(".from-language-list").css("display")&&(e.hasClass("select-from-language")||e.parents(".select-from-language").length>0||e.hasClass("from-language-list")||e.parents("from-language-list").length>0)||n.hideFromWrap(),"block"===$(".to-language-list").css("display")&&(e.hasClass("select-to-language")||e.parents(".select-to-language").length>0||e.hasClass("to-language-list")||e.parents("to-language-list").length>0)||a.hideToWrap()},clickFromOfen:function(){_hmt.push(["_trackEvent","首页","web端常用语种区域点击量（源语言）"])},clickToOfen:function(){_hmt.push(["_trackEvent","首页","web端常用语种区域点击量（目标语言）"])}};$(function(){c.init()})});
;/*!translation:widget/translate/zonedword/zonedword.js*/
define("translation:widget/translate/zonedword/zonedword",function(o){var t=o("translation:widget/translate/zonedword/wordWrap"),n=(o("translation:widget/translate/input/sound"),o("translation:widget/translate/common/soundURIGenerator")),e=o("translation:widget/translate/dictionary/simplemeans"),i=o("translation:widget/translate/common/Drag"),s=o("translation:widget/common/cookie"),r=o("translation:widget/translate/common/environment"),d={init:function(){this.bindEvents()},bindEvents:function(){var o=this;$(document).on("mouseup",".trans-input-wrap",this.zonedwordIsMouseUp).on("mouseup",".output-wrap",this.zonedwordIsMouseUp).on("mouseup","#transOtherResutl",this.zonedwordIsMouseUp).on("mouseup","#transDetails",this.zonedwordIsMouseUp).on("mousedown",".trans-input-wrap",$.proxy(this.zonedwordIsMouseDown,this)).on("mousedown",".output-wrap",$.proxy(this.zonedwordIsMouseDown,this)).on("mousedown","#transOtherResutl",$.proxy(this.zonedwordIsMouseDown,this)).on("mousedown","#transDetails",$.proxy(this.zonedwordIsMouseDown,this)).on("click",$.proxy(this.documentIsClick,this)),$("#zonedword-wrap").on("click",".zonedword-close",this.onCloseZonedword).on("click",".zonedword-setting-icon",this.toggleZoneWordOption).on("click",".zonedword-switch",this.switchZoneword).on("click",".zonedword-detail-link",this.onClickMore).on("click",".op-sound",function(){o.onClickSound({target:this})}).on("mouseover",".op-sound",function(){o.onSoundMouseOver({target:this})}).on("mouseout",".op-sound",$.proxy(this.onSoundMouseOut,this)).on("click",function(o){var t=$(o.target);t.hasClass("setting-options")||t.parents(".setting-options").length>0||$("#zonedword-wrap .setting-options").hide()}),this.bindDrag()},zonedwordIsMouseUp:function(o){var n=r.get("isInFanyiWordMode"),e=$(this),i=e.width(),s=e.height(),d=e.offset();n&&o.pageX>=d.left&&o.pageY>=d.top&&o.pageX<=d.left+i&&o.pageY<=d.top+s&&t.showWrap(o)},zonedwordIsMouseDown:function(o){t.rightClickHideWrap(o)},documentIsClick:function(o){var n=$(o.target);n.parents("#zonedword-wrap").length>0||($("#zonedword-wrap .setting-options").hide(),t.hideWrap())},onCloseZonedword:function(){t.hideWrap()},toggleZoneWordOption:function(o){o.preventDefault(),o.stopPropagation(),$("#zonedword-wrap .setting-options").toggle()},switchZoneword:function(o){o.preventDefault(),o.stopPropagation();var t=$(".zonedword-switch");t.toggleClass("setting-checked");var n;t.hasClass("setting-checked")?(n=1,r.set("isInFanyiWordMode",!0)):(n=0,r.set("isInFanyiWordMode",!1),_hmt.push(["_trackEvent","首页","Web点击划词翻译框关闭划词翻译功能"])),s.setCookie("FANYI_WORD_SWITCH",n,{expires:864e8})},onClickSound:function(o){e.judgeStopRepeat(),this.timer&&clearTimeout(this.timer);var t=$(o.target),i=n.generateURI({lan:t.attr("data-sound-lan"),text:t.attr("data-sound-text")});BTPM.setUrl(i);var s;t.addClass("op-sound-active"),s=setTimeout(function(){t.removeClass("op-sound-active"),clearTimeout(s)},2e3),"keywords"===r.get("zonewordQueryFrom")&&_hmt.push(["_trackEvent","首页","Web重点词汇卡片highlight出划词翻译框发音按钮的发音次数"])},onSoundMouseOver:function(o){var t=this;t.timer=setTimeout(function(){t.onClickSound.call(t,o),clearTimeout(t.timer)},500)},onSoundMouseOut:function(){this.timer&&clearTimeout(this.timer)},onClickMore:function(){t.hideWrap(),_hmt.push(["_trackEvent","首页","划词翻译框结果框“查看更多”"])},bindDrag:function(){new i(".zonedword-wrap",{moveId:".zonedword-title"})}};$(function(){d.init()})});
;/*!translation:widget/footer/banner/banner.js*/
define("translation:widget/footer/banner/banner",function(n,t){function i(){var n=f.length;n>0&&(a(),e(),r(n))}function a(){var n=s.find("a > img");n.each(function(){$(this).attr({src:$(this).attr("data-src")})})}function e(){f.eq(0).show()}function r(n){function t(){var t=f.eq(i);i>=n-1?i=0:i++;for(var a=f.eq(i),e=0;n>e;e++)f[e].style.visibility=e===i?"visible":"hidden";t.css("opacity",0),a.css("opacity",1)}var i=0;if(n>1){var a=null;a=setInterval(t,15e3)}}function c(){$(document).delegate(".spread-slide","click",function(n){var t=$(n.target).closest("a"),i=t.attr("data-index");o(i)})}function o(){_hmt.push(["_trackEvent","首页","web端底部banner点击次数"])}t.init=function(){i(),c()};var s=$(".spread-wrap"),f=s.find("a")});
;/*!translation:widget/footer/copyright/copyright.js*/
define("translation:widget/footer/copyright/copyright",function(t,e){function a(){$(".copyright").delegate('a[href^="http://tousu.baidu.com"]',"click",i),$(".foot-manual-link").on("click",function(){_hmt.push(["_trackEvent","首页","web端底部人工翻译点击"])})}function i(t){t.preventDefault();var e=t.target,a="",i="",r=document.charset||"utf-8";if($(".ordinary-wrap").length>0){var o=$(".ordinary-wrap").find(".target-output");o.each(function(){i+=$(this).text()})}else{var o=$(".dictionary-output");o.each(function(){i+=$(this).find(".dictionary-title").text(),i+=$(this).find(".dictionary-comment").text()})}i=i.replace(/&#160;/gi,""),i=i.replace(/\s/gi,""),a=$.trim($("#baidu_translate_input").val());var c={action:$(e).attr("href"),charset:"gbk",target:"_blank",method:"post",src:a,dst:i},d=n("tplFeedback",c);$("#form-feedback").length>0&&$("#form-feedback").remove(),$("body").append($(d)),/msie/i.test(navigator.userAgent)===!0&&(document.charset="gbk"),$("#form-feedback").first().submit(),document.charset=r}var n=t("translation:widget/common/tools/template");e.init=function(){a()}});
;/*!translation:widget/footer/extra/extra.js*/
define("translation:widget/footer/extra/extra",function(t,n){function o(){var t=$(".manual-spread");return t.length>0&&!t.hasClass("manual-spread-none")?void d.css("top",.7*$(window).height()):void d.css("top",.7*$(window).height()).show()}function a(){$(window).on("resize",o),r.on("click",e),s.on("click",i)}function e(t){if(t.preventDefault(),$("#feedback_check_qa").get(0))window.bds&&window.bds.qa&&window.bds.qa.ShortCut&&window.bds.qa.ShortCut.initRightBar&&window.bds.qa.ShortCut.initRightBar();else{var n="http://f3.baidu.com/feedback/js/feedback/feedback_fanyi.js";if("https:"===location.protocol){var o=$("#httpsFeedbackUrl").attr("src");n=o}var a="feedback_check_qa";c.loadScript(n,a)}_hmt.push(["_trackEvent","首页","web端意见反馈按钮点击"])}function i(t){t.preventDefault(),$("html, body").animate({scrollTop:0},250),_hmt.push(["_trackEvent","index","web端回到顶部按钮点击"])}var c=t("translation:widget/common/util");n.init=function(){o(),a()};var d=$(".extra-wrap"),r=d.find(".feedback-btn"),s=d.find(".backtotop-btn");$(window).on("scroll",function(){var t=$(document).scrollTop();t>0?s.css("display","block"):s.hide()})});
;/*!translation:widget/footer/follow/follow.js*/
define("translation:widget/footer/follow/follow",function(o,t){function i(){$("#follow-btns").on("click",l),$("#fdialog-wrap").on("click",e),$(".footer").removeClass("visibilit-hide")}function l(o){var t=$(o.target),i=t.attr("data-pos"),l=t.attr("title");if("undefined"!=typeof i){3!==+i&&a(+i);var e="Web翻译"+l+"点击";_hmt.push(["_trackEvent","follow icons",e])}}function a(o){$(".fdialog-cont").addClass("hide"),$(".cont-"+o).removeClass("hide"),$("#follow-dialog").removeClass("hide")}function e(o){var t=o.target;return t===this||t===$("#fdialog-close").get(0)?($("#follow-dialog").addClass("hide"),o.stopPropagation(),!1):void 0}t.init=function(){i()}});
;/*!translation:widget/footer/footer.js*/
define("translation:widget/footer/footer",function(){var n=$("#main-outer"),e=1+$(".header").innerHeight()+$(".footer").innerHeight(),i={init:function(){this.bindEvent(),this.documentIsChange()},bindEvent:function(){$(window).on("resize",this.documentIsChange).on("hashchange",this.documentIsChange)},documentIsChange:function(){n.css("min-height",$(window).height()-e),$(".footer").show()}};$(function(){i.init()})});
;/*!translation:widget/footer/manualBanner/manualBanner.js*/
define("translation:widget/footer/manualBanner/manualBanner",function(n,t){var a=n("translation:widget/common/cookie"),e=$(".manual-spread"),i={init:function(){var n=a.getCookie("MANUBANNER");n||(a.setCookie("MANUBANNER",1,{expires:2592e6}),e.removeClass("manual-spread-none"),$(".extra-wrap").hide(),_hmt.push(["_trackEvent","首页","web端底部人工翻译浮层展现量"]),this.bindEvent())},bindEvent:function(){e.on("click",".manual-spread-close",function(n){n.stopPropagation();var t=$(".spread-wrap"),a=t.width(),i=-a/2;e.css({width:a+"px",left:"50%","margin-left":i+"px",height:"70px",bottom:"88px",opacity:0,"z-index":-1}),setTimeout(function(){e.addClass("manual-spread-none")},500),$(".extra-wrap").show(),_hmt.push(["_trackEvent","首页","web端底部人工翻译浮层点击关闭的数量"])}).on("click",function(){window.open("http://pro.fanyi.baidu.com/activity?from=dbfc")})}};t.init=function(){i.init()}});