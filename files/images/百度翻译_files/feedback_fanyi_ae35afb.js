var bds=bds||{};bds.qa=bds.qa||{},bds.qa.ShortCut={base_url_path:"https://sp2.baidu.com/-uV1bjeh1BF3odCf",close_status:!1,scrollTop:0,product_id:60,scrollLeft:0,load_script_succ:!1,feedback_right_dialog:"",container_none:!0,short_cut_init:!1,container_exist:!1,issuePlaceholder:"亲爱的百度翻译用户：\n请在这里直接填写您遇到的问题或意见建议，您的意见是我们前进的动力（100字以内)",emailPlaceholder:"请留下联系方式，我们会及时向您反馈进展。",bindclick:0,SimpleDrag:"",init_drag:function(){function e(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a}function t(e,t,a){e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent?e.detachEvent("on"+t,a):e["on"+t]=null}var a=(document.all?!0:!1,function(e){return"string"==typeof e?document.getElementById(e):e}),i={create:function(){return function(){this.initialize.apply(this,arguments)}}},n=function(e,t){return function(){return t.apply(e,arguments)}},o=function(e,t){return function(a){return t.call(e,a||window.event)}};bds.qa.ShortCut.SimpleDrag=i.create(),bds.qa.ShortCut.SimpleDrag.prototype={initialize:function(t,i){this.Drag=a(t),this.beDrag=a(i),this._x=this._y=0,this._fM=o(this,this.Move),this._fS=n(this,this.Stop),e(this.Drag,"mousedown",o(this,this.Start))},Start:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,this._x=t.clientX-this.beDrag.offsetLeft,this._y=t.clientY-this.beDrag.offsetTop,e(document,"mousemove",this._fM),e(document,"mouseup",this._fS)},Move:function(e){this.beDrag.style.left=e.clientX-this._x+"px",this.beDrag.style.top=e.clientY-this._y+"px",this.Drag.style.left=e.clientX-this._x+1+"px",this.Drag.style.top=e.clientY-this._y+1+"px",this.beDrag.style.bottom="",this.beDrag.style.right=""},Stop:function(){t(document,"mousemove",this._fM),t(document,"mouseup",this._fS)}},new bds.qa.ShortCut.SimpleDrag("feedback-dialog-header","baidu_feedback_right_dialog")},hidwindow:function(){$("#popwindow").fadeOut("slow"),$("#popwindow").remove(),$("#feedback_right_post_form").remove(),$("#baidu_feedback_right_dialog").remove(),$("#feedback_right_dialog_canvas").remove(),$("#feedback_right_dialog_pagecanvas").remove(),$("#feedback_right_dialog_pagecanvas2").remove(),$("#feedbackdialog").remove()},hidwindowEnd:function(){$("#baidu_feedback_right_dialog").fadeOut("slow"),$("#baidu_feedback_right_dialog").remove(),$("#feedback_right_post_form").remove(),$("#popwindow").remove(),$("#feedback_right_dialog_canvas").remove(),$("#feedback_right_dialog_pagecanvas").remove(),$("#feedback_right_dialog_pagecanvas2").remove(),$("#feedbackdialog").remove()},popwindow:function(e,t){var a=document.getElementById("popwindow");if(a)$("#feedback_dialog_content").html(e);else{var i="display: block;position:fixed;_position:absolute;left:30%; top:30%;width:450px;z-index: 5015;background: none repeat scroll 0 0 #FFFFFF;border: 1px solid #999999;border-radius: 3px 3px 3px 3px;box-shadow: 0 0 9px #999999;padding: 0;";$("body").append('<div id="popwindow" style="'+i+'"><div class="feedback_alert_head"><div class="feedback_close_icon" id="feedback_close_icon" title="关闭"></div><h3 style="margin:0px;" id="feedback_close_title">发送反馈</h3></div><div class="feedback_alert_dlg-bd"><div id="feedback_dialog_content">'+e+'</div></div><div class="feedback_dialog_bottom"><div style="text-align:center;" class="feedback_dialog_bottom_center" style="text-align:center;"><a class="feedback_btn feedback_dialog_bottom_okay"><b>确定</b></a></div></div></div>'),$(".feedback_dialog_bottom_okay,#feedback_close_icon").on("click",function(){$("#popwindow").remove()})}200==t&&setTimeout(bds.qa.ShortCut.hidwindow,2e3)},popwindowEnd:function(){var e=document.getElementById("feedback-dialog-header").style.bottom;e==e.replace(/px/,""),document.getElementById("feedback-dialog-header").style.bottom=parseInt(e)-215+"px",document.getElementById("qa_feedback_body").style.height="auto",$(".feedback_action").css("height","auto"),$("#feedback-dialog-header").css("margin-top","1px"),$("#feedback-dialog-header").css("bottom","inherit"),$(".feedback-animate-toside").css("height","130px"),$(".feedback-footer").remove(),$(".feedback_action").css({"margin-top":"40px","margin-left":"0px","text-align":"center"}),$(".feedback_action").html('<div style="font-size:14px;float: left;width: 100%;margin-top: 30px;_margin-top: 0px;">发送成功</div>'),setTimeout(bds.qa.ShortCut.hidwindowEnd,2e3)},_identifyBrowser:function(){if(/msie/.test(navigator.userAgent.toLowerCase()))return!1;try{var e=document.createElement("canvas").getContext("2d");return e=null,!0}catch(t){return!1}},init_action_dialog:function(){var e=document.getElementById("baidu_feedback_right_dialog");if(bds.qa.ShortCut.container_exist=bds.qa.ShortCut._identifyBrowser()?!1:!0,!e){var t="",a="display: inline-block;padding: 6px 10px 6px;_padding: 3px 10px 3px;margin-bottom: 0;font-size: 13px;line-height: 18px;text-align: center;text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);vertical-align: middle;background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);background-repeat: repeat-x;border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);border: 1px solid #ccc;border-bottom-color: #bbb;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;-webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);-moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);cursor: pointer;filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);";bds.qa.ShortCut.container_exist?(input_file_html='<div style="float:left;margin-right:10px;cursor:pointer;width:58px;height:28px;background:url(\'https://sp2.baidu.com/-uV1bjeh1BF3odCf/feedback/images/upload_btn.png\');border:0px;display: inline-block;width: 58px;height: 28px;line-height: 28px;text-align: center;overflow: hidden;position: relative;"><input style="opacity:0;filter:alpha(opacity=0);font-size:100px;position:absolute;top:0;right:0;cursor:pointer;margin:0px;" type="file" id="feedback_jietu" name="issueimage" onchange="bds.qa.ShortCut.checkFileType(this)"></div><span id="feedback_jietu_txt" style="float:left;height:30px;line-height:30px;width:200px;overflow:hidden;">上传本地图片，图片大小不超过3M</span>',t='<div class="feedback-modal feedback-animate-toside" style="background-color:white;cursor:default;top:100%;left:100%;width: 375px;overflow:hidden;height: 358px;border: 1px solid #999999;border-radius: 3px 3px 3px 3px;box-shadow: 0 0 9px #999999;*border:1px solid #ddd;" data-html2canvas-ignore="true"><div class="feedback-header" id="feedback-dialog-header" unselectable="on" onselectstart="return false;" style="padding: 5px 10px;height:25px;border-bottom: 1px solid #ddd;background:#f5f5f5;padding-left:17px;cursor:move;text-align:left;bottom:326px;right:5px;-moz-user-select:none;position:fixed;*position:inherit;width:348px;*width:348px;"><a class="feedback-close" style="margin-top: 2px;float: right;font-size: 20px;font-weight: bold;line-height: 18px;color: #000000;text-shadow: 0 1px 0 #ffffff;cursor:pointer;" id="feedback-close_x">×</a><div id="feedback_js_loading" style="float:right;width: 150px;margin-right: 80px;"><img style="float: left;" src="'+bds.qa.ShortCut.base_url_path+'/feedback/js/feedback/loading.gif"/><div style="float: left;height: 30px;line-height: 30px;margin-left: 10px;" id="feedback_js_loading_title">截图功能加载中...</div></div><h3  style="line-height:27px;font-size:18px;font-weight:bold;margin: 0;color: #333;text-rendering: optimizelegibility;">发送反馈</h3></div><div class="feedback-body" id="qa_feedback_body" style="text-align:left;"><div class="feedback_action" style="margin-left:20px;margin-top:55px;_margin-top:15px;height:250px;"><form id="feedback_right_post_form" enctype="multipart/form-data" action="'+bds.qa.ShortCut.base_url_path+'/index.php/feedback/zx/getPost" method="post"><div style="margin-bottom:10px;"><span>问题类型：</span><span><input style="margin-right:5px;cursor:pointer;vertical-align:middle" type="radio" class="issuetype_radio" checked="true" name="issuetype" value="547"/><span style="cursor:pointer;vertical-align:middle" class="issuetype_radio_title">提建议</span></span><span><input style="margin-right:5px;cursor:pointer;vertical-align:middle;margin-left:10px;" type="radio" name="issuetype" class="issuetype_radio"  value="548"/><span style="cursor:pointer;vertical-align:middle" class="issuetype_radio_title">喜欢</span></span><span><input style="margin-right:5px;cursor:pointer;vertical-align:middle;margin-left:10px;" type="radio" name="issuetype" class="issuetype_radio"  value="549"/><span style="cursor:pointer;vertical-align:middle" class="issuetype_radio_title">不喜欢</span></span></div><div class="feedback_tip_title" style="float:left;" class="feedback_action_input" >反馈内容：<br/><span style="color:red">（*必填）</span></div><div class="feedback_textarea"><textarea maxlength="400" name="issuedesc" style="border:1px solid #ccc;margin-left: 0;padding: 4px;margin-bottom: 9px;font-size: 100%;vertical-align: top;font-size: 13px;line-height: 18px;width:270px;height:100px;resize:none;" class="feedback_des_content" id="feedback_des_content" data-exclude="true">'+bds.qa.ShortCut.issuePlaceholder+'</textarea></div><div class="email_block" style="height:30px;line-height:30px;margin-bottom:10px;clear:both;"><div style="float:left;">上传截图：</div><div>'+input_file_html+'</div></div><div class="email_block" style="height:30px;line-height:30px;margin-bottom:10px;clear:both;"><div style="float:left;">联系方式：</div><div><input type="text" class="feddback_email" style="margin-right:0px;height: 20px;line-height: 20px;width: 270px;border: 1px solid #ccc;color:#9A9A9A;padding: 4px;font-size: 13px;display: inline-block;" value="'+bds.qa.ShortCut.emailPlaceholder+'" name="email" id="feedback_email"></div><span style = "height: 20px;">百度翻译官方反馈QQ群:289656304</span></div><input type="hidden" name="type" value="'+bds.qa.ShortCut.product_id+'" id="feedback_type"/><input type="hidden" name="user_name" value="" id="feedback_user_name"/><input type="hidden" name="userAgent" value="" id="feedback_userAgent"/><input type="hidden" name="issuehtml" value="" id="feedback_issuehtml"/><input type="hidden" name="query" value="" id="feedback_query"/><input type="hidden" name="feedback_translate_output" value="" id="feedback_translate_output"/></form></div><div class="feedback-footer" style="width:345px;_width:346px;height:45px;_height:46px;line-height:40px;padding: 5px 14px 5px 15px;text-align: center;margin-bottom: 0;background-color: #f5f5f5;border-top: 1px solid #ddd;"><input type="button" class="feedback_btn" style="'+a+'" id="feedback_right_post_save" value="提交反馈"/></div></div></div>'):(bds.qa.ShortCut.container_exist=!1,t='<div class="feedback-modal feedback-animate-toside" style="background-color:white;cursor:default;top:100%;left:100%;width: 375px;overflow:hidden;height: 358px;border: 1px solid #999999;border-radius: 3px 3px 3px 3px;box-shadow: 0 0 9px #999999;*border:1px solid #ddd;" data-html2canvas-ignore="true"><div class="feedback-header" id="feedback-dialog-header" unselectable="on" onselectstart="return false;" style="padding: 5px 10px;height:25px;border-bottom: 1px solid #ddd;background:#f5f5f5;padding-left:17px;cursor:move;text-align:left;bottom:326px;right:5px;-moz-user-select:none;position:fixed;*position:inherit;width:348px;*width:348px;"><a class="feedback-close" style="margin-top: 2px;float: right;font-size: 20px;font-weight: bold;line-height: 18px;color: #000000;text-shadow: 0 1px 0 #ffffff;cursor:pointer;" id="feedback-close_x">×</a><div id="feedback_js_loading" style="float:right;width: 150px;margin-right: 80px;"><img style="float: left;" src="'+bds.qa.ShortCut.base_url_path+'/feedback/js/feedback/loading.gif"/><div style="float: left;height: 30px;line-height: 30px;margin-left: 10px;" id="feedback_js_loading_title">截图功能加载中...</div></div><h3  style="line-height:27px;font-size:18px;font-weight:bold;margin: 0;color: #333;text-rendering: optimizelegibility;">发送反馈</h3></div><div class="feedback-body" id="qa_feedback_body" style="text-align:left;"><div class="feedback_action" style="margin-left:20px;margin-top:55px;_margin-top:15px;height:250px;"><div style="margin-bottom:10px;"><span>问题类型：</span><span><input style="margin-right:5px;cursor:pointer;vertical-align:middle" type="radio" class="issuetype_radio" checked="true" name="issuetype" value="547"/><span style="cursor:pointer;vertical-align:middle" class="issuetype_radio_title">提建议</span></span><span><input style="margin-right:5px;cursor:pointer;vertical-align:middle;margin-left:10px;" type="radio" name="issuetype" class="issuetype_radio"  value="548"/><span style="cursor:pointer;vertical-align:middle;" class="issuetype_radio_title">喜欢</span></span><span><input style="margin-right:5px;cursor:pointer;vertical-align:middle;margin-left:10px;" type="radio" name="issuetype" class="issuetype_radio"  value="549"/><span style="cursor:pointer;vertical-align:middle;" class="issuetype_radio_title">不喜欢</span></span></div><div class="feedback_tip_title" style="float:left;" class="feedback_action_input" >反馈内容：<br/><span style="color:red">（*必填）</span></div><div class="feedback_textarea"><textarea maxlength="400" style="border:1px solid #ccc;margin-left: 0;padding: 4px;margin-bottom: 9px;font-size: 100%;vertical-align: top;font-size: 13px;line-height: 18px;width:270px;height:100px;resize:none;" id="feedback_des_content" data-exclude="true">'+bds.qa.ShortCut.issuePlaceholder+'</textarea></div><div class="email_block" style="height:30px;line-height:30px;margin-bottom:10px;clear:both;"><div style="float:left;width: 60px;text-align:right;">截图：</div><div><input type="button" class="feedback_btn" id="feedback_jietu" style="width:58px;height:28px;background:url(\'https://sp2.baidu.com/-uV1bjeh1BF3odCf/feedback/images/jietu_btn.jpg\');border:0px;margin-right:5px;cursor:pointer;float:left;"/><span>点我，可以在当前页面截图哦~<a target="_blank" href="http://f3.baidu.com/index.php/feedback/tiyan/steps">使用方法</a></span></div></div><div class="email_block" style="height:30px;line-height:30px;margin-bottom:10px;clear:both;"><div style="float:left;">联系方式：</div><div><input type="text" class="feddback_email" style="margin-right:0px;height: 20px;line-height: 20px;width: 270px;border: 1px solid #ccc;color:#9A9A9A;padding: 4px;font-size: 13px;display: inline-block;" value="'+bds.qa.ShortCut.emailPlaceholder+'" id="feedback_email"></div><span style = "height: 20px;">百度翻译官方反馈QQ群:289656304</span></div></div><div class="feedback-footer" style="width:345px;_width:346px;height:45px;_height:46px;line-height:40px;padding: 5px 14px 5px 15px;text-align: center;margin-bottom: 0;background-color: #f5f5f5;border-top: 1px solid #ddd;"><div class="feedback_btn" style="'+a+'" id="feedback_right_dialog_save">提交反馈</div></div></div>');var i=document.createElement("div");i.id="baidu_feedback_right_dialog",i.className="feedback_right_dialog",i.style.position="fixed",i.style.right="5px",i.style.bottom="5px",i.style.width="376px",i.style.height="359px",i.style.zIndex=5010,i.innerHTML=t;var n='<div id="baidu_feedback_right_dialog" style="font-size:12px;position:fixed;_position:absolute;right:5px;bottom:5px;width:376px;height:359px" class="feedback_right_dialog">'+t+"</div>";$("body").append(n)}},init_background_img:function(){},init_review_dialog:function(){},init_bind_action:function(){$(".feedback-modal textarea").focus(function(){$(this).val()==bds.qa.ShortCut.issuePlaceholder&&$(this).val("")}),$(".issuetype_radio_title").on("click",function(){$(this).prev(".issuetype_radio").attr("checked",!0)}),$(".feedback-modal textarea").keydown(function(){$(this).val()!=bds.qa.ShortCut.issuePlaceholder&&$(this).css("color","black")}),$(".feedback-modal .feddback_email").focus(function(){$(this).val()==bds.qa.ShortCut.emailPlaceholder&&$(this).val("")}),$(".feedback-modal .feddback_email").keydown(function(){$(this).val()!=bds.qa.ShortCut.emailPlaceholder&&$(this).css("color","black")});var e=document.getElementById("baidu_feedback_right_dialog");e.onselectstart=function(){return!1},$("#feedback-close_x").on("click",function(){$("#baidu_feedback_right_dialog").remove(),$("#feedback_right_dialog_canvas").remove(),$("#feedback_right_dialog_pagecanvas").remove(),$("#feedback_right_dialog_pagecanvas2").remove(),$("#feedbackdialog").remove(),$("#popwindow").remove(),bds.qa.ShortCut.close_status=!0})},load_repeat:function(){bds.qa.ShortCut.init_background_img(),bds.qa.ShortCut.init_action_dialog(),bds.qa.ShortCut.init_review_dialog(),bds.qa.ShortCut.init_bind_action(),bds.qa.ShortCut.close_status=!1,bds.qa.ShortCut.init_drag(),bds.qa.ShortCut.feedback_right_dialog.load(bds.qa.ShortCut.iFeedback)},load_first:function(){bds.qa.ShortCut.init(),bds.qa.ShortCut.init_drag(),bds.qa.ShortCut.imgLog("https://sp2.baidu.com/-uV1bjeh1BF3odCf/index.php/feedback/zx/clickcount/pro_id/"+bds.qa.ShortCut.product_id)},imgLog:function(e){var t="imglog__"+(new Date).getTime(),a=window[t]=new Image;a.onload=a.onerror=function(){window[t]=null},a.src=e,a=null},init:function(){!function(){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.media="screen",e.href=bds.qa.ShortCut.base_url_path+"/feedback/js/feedback/feedback.css?"+(new Date).getTime();var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var e=!1;bds.qa.ShortCut.init_action_dialog(),bds.qa.ShortCut.init_background_img(),bds.qa.ShortCut.init_review_dialog(),bds.qa.ShortCut.init_bind_action(),function(e,t,a){function i(t){l.logging&&e.console&&e.console.log&&e.console.log(t)}function n(e,t,a,i,n,o){var r,d,s,c,h=l.Util.getCSS(t,e,n);if(1===h.length&&(c=h[0],h=[],h[0]=c,h[1]=c),-1!==h[0].toString().indexOf("%"))s=parseFloat(h[0])/100,d=a.width*s,"backgroundSize"!==e&&(d-=(o||i).width*s);else if("backgroundSize"===e)if("auto"===h[0])d=i.width;else if(h[0].match(/contain|cover/)){var u=l.Util.resizeBounds(i.width,i.height,a.width,a.height,h[0]);d=u.width,r=u.height}else d=parseInt(h[0],10);else d=parseInt(h[0],10);return"auto"===h[1]?r=d/i.width*i.height:-1!==h[1].toString().indexOf("%")?(s=parseFloat(h[1])/100,r=a.height*s,"backgroundSize"!==e&&(r-=(o||i).height*s)):r=parseInt(h[1],10),[d,r]}function o(e,t){var a=[];return{storage:a,width:e,height:t,clip:function(){a.push({type:"function",name:"clip",arguments:arguments})},translate:function(){a.push({type:"function",name:"translate",arguments:arguments})},fill:function(){a.push({type:"function",name:"fill",arguments:arguments})},save:function(){a.push({type:"function",name:"save",arguments:arguments})},restore:function(){a.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){a.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){a.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return a.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){a.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){a.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){a.push({type:"variable",name:e,arguments:t})}}}function r(e){return{zindex:e,children:[]}}var d,s,l={};l.Util={},l.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),l.Util.parseBackgroundImage=function(e){var t,a,i,n,o,r,d,s,l=" \r\n	",c=[],h=0,u=0,p=function(){t&&('"'===a.substr(0,1)&&(a=a.substr(1,a.length-2)),a&&s.push(a),"-"===t.substr(0,1)&&(n=t.indexOf("-",1)+1)>0&&(i=t.substr(0,n),t=t.substr(n)),c.push({prefix:i,method:t.toLowerCase(),value:o,args:s})),s=[],t=i=a=o=""};p();for(var g=0,f=e.length;f>g;g++)if(r=e[g],!(0===h&&l.indexOf(r)>-1)){switch(r){case'"':d?d===r&&(d=null):d=r;break;case"(":if(d)break;if(0===h){h=1,o+=r;continue}u++;break;case")":if(d)break;if(1===h){if(0===u){h=0,o+=r,p();continue}u--}break;case",":if(d)break;if(0===h){p();continue}if(1===h&&0===u&&!t.match(/^url$/i)){s.push(a),a="",o+=r;continue}}o+=r,0===h?t+=r:a+=r}return p(),c},l.Util.Bounds=function(e){var t,a={};return e.getBoundingClientRect?(t=e.getBoundingClientRect(),a.top=t.top,a.bottom=t.bottom||t.top+t.height,a.left=t.left,a.width=t.width||t.right-t.left,a.height=t.height||t.bottom-t.top,a):void 0},l.Util.getCSS=function(e,i,n){function o(t,a){var i,n=e.runtimeStyle&&e.runtimeStyle[t],o=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(a)&&/^-?\d/.test(a)&&(i=o.left,n&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":a||0,a=o.pixelLeft+"px",o.left=i,n&&(e.runtimeStyle.left=n)),/^(thin|medium|thick)$/i.test(a)?a:Math.round(parseFloat(a))+"px"}var r,c=i.match(/^background(Size|Position)$/);if(d!==e&&(s=t.defaultView.getComputedStyle(e,null)),r=s[i],c)if(r=(r||"").split(","),r=r[n||0]||r[0]||"auto",r=l.Util.trimText(r).split(" "),"backgroundSize"!==i||r[0]&&!r[0].match(/cover|contain|auto/)){if(r[0]=-1===r[0].indexOf("%")?o(i+"X",r[0]):r[0],r[1]===a){if("backgroundSize"===i)return r[1]="auto",r;r[1]=r[0]}r[1]=-1===r[1].indexOf("%")?o(i+"Y",r[1]):r[1]}else;else if(/border(Top|Bottom)(Left|Right)Radius/.test(i)){var h=r.split(" ");h.length<=1&&(h[1]=h[0]),h[0]=parseInt(h[0],10),h[1]=parseInt(h[1],10),r=h}return r},l.Util.resizeBounds=function(e,t,a,i,n){var o,r,d=a/i,s=e/t;return n&&"auto"!==n?s>d^"contain"===n?(r=i,o=i*s):(o=a,r=a/s):(o=a,r=i),{width:o,height:r}},l.Util.BackgroundPosition=function(e,t,a,i,o){var r=n("backgroundPosition",e,t,a,i,o);return{left:r[0],top:r[1]}},l.Util.BackgroundSize=function(e,t,a,i){var o=n("backgroundSize",e,t,a,i);return{width:o[0],height:o[1]}},l.Util.Extend=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},l.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&!function(e,t){var i=e.length,n=0;if("number"==typeof t.length)for(var o=t.length;o>n;n++)e[i++]=t[n];else for(;t[n]!==a;)e[i++]=t[n++];return e.length=i,e}(t,e),t}(e.childNodes)}catch(n){i("html2canvas.Util.Children failed with exception: "+n.message),t=[]}return t},l.Util.Font=function(){var e={};return function(t,i,n){if(e[t+"-"+i]!==a)return e[t+"-"+i];var o,r,d,s=n.createElement("div"),l=n.createElement("img"),c=n.createElement("span"),h="Hidden Text";return s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=i,s.style.margin=0,s.style.padding=0,n.body.appendChild(s),l.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",l.width=1,l.height=1,l.style.margin=0,l.style.padding=0,l.style.verticalAlign="baseline",c.style.fontFamily=t,c.style.fontSize=i,c.style.margin=0,c.style.padding=0,c.appendChild(n.createTextNode(h)),s.appendChild(c),s.appendChild(l),o=l.offsetTop-c.offsetTop+1,s.removeChild(c),s.appendChild(n.createTextNode(h)),s.style.lineHeight="normal",l.style.verticalAlign="super",r=l.offsetTop-s.offsetTop+1,d={baseline:o,lineWidth:1,middle:r},e[t+"-"+i]=d,n.body.removeChild(s),d}}(),function(){l.Generate={};var e=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];l.Generate.parseGradient=function(t,a){var i,n,o,r,d,s,l,c,h,u,p,g,f=e.length;for(n=0;f>n&&!(o=t.match(e[n]));n+=1);if(o)switch(o[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(i={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},d=o[2].match(/\w+/g))for(s=d.length,n=0;s>n;n+=1)switch(d[n]){case"top":i.y0=0,i.y1=a.height;break;case"right":i.x0=a.width,i.x1=0;break;case"bottom":i.y0=a.height,i.y1=0;break;case"left":i.x0=0,i.x1=a.width}if(null===i.x0&&null===i.x1&&(i.x0=i.x1=a.width/2),null===i.y0&&null===i.y1&&(i.y0=i.y1=a.height/2),d=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=d.length,l=1/Math.max(s-1,1),n=0;s>n;n+=1)c=d[n].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),c[2]?(r=parseFloat(c[2]),r/="%"===c[3]?100:a.width):r=n*l,i.colorStops.push({color:c[1],stop:r});break;case"-webkit-gradient":if(i={type:"radial"===o[2]?"circle":o[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},d=o[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),d&&(i.x0=d[1]*a.width/100,i.y0=d[2]*a.height/100,i.x1=d[3]*a.width/100,i.y1=d[4]*a.height/100),d=o[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(s=d.length,n=0;s>n;n+=1)c=d[n].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),r=parseFloat(c[2]),"from"===c[1]&&(r=0),"to"===c[1]&&(r=1),i.colorStops.push({color:c[3],stop:r});break;case"-moz-linear-gradient":if(i={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},d=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),d&&(i.x0=d[1]*a.width/100,i.y0=d[2]*a.height/100,i.x1=a.width-i.x0,i.y1=a.height-i.y0),d=o[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(s=d.length,l=1/Math.max(s-1,1),n=0;s>n;n+=1)c=d[n].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),c[2]?(r=parseFloat(c[2]),c[3]&&(r/=100)):r=n*l,i.colorStops.push({color:c[1],stop:r});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(i={type:"circle",x0:0,y0:0,x1:a.width,y1:a.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},d=o[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),d&&(i.cx=d[1]*a.width/100,i.cy=d[2]*a.height/100),d=o[3].match(/\w+/),c=o[4].match(/[a-z\-]*/),d&&c)switch(c[0]){case"farthest-corner":case"cover":case"":h=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),u=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),g=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.max(h,u,p,g);break;case"closest-corner":h=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.cy,2)),u=Math.sqrt(Math.pow(i.cx,2)+Math.pow(i.y1-i.cy,2)),p=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.y1-i.cy,2)),g=Math.sqrt(Math.pow(i.x1-i.cx,2)+Math.pow(i.cy,2)),i.rx=i.ry=Math.min(h,u,p,g);break;case"farthest-side":"circle"===d[0]?i.rx=i.ry=Math.max(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=d[0],i.rx=Math.max(i.cx,i.x1-i.cx),i.ry=Math.max(i.cy,i.y1-i.cy));break;case"closest-side":case"contain":"circle"===d[0]?i.rx=i.ry=Math.min(i.cx,i.cy,i.x1-i.cx,i.y1-i.cy):(i.type=d[0],i.rx=Math.min(i.cx,i.x1-i.cx),i.ry=Math.min(i.cy,i.y1-i.cy))}if(d=o[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=d.length,l=1/Math.max(s-1,1),n=0;s>n;n+=1)c=d[n].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),c[2]?(r=parseFloat(c[2]),r/="%"===c[3]?100:a.width):r=n*l,i.colorStops.push({color:c[1],stop:r})}return i},l.Generate.Gradient=function(e,a){if(0!==a.width&&0!==a.height){var n,o,r,d,s=t.createElement("canvas"),c=s.getContext("2d");if(s.width=a.width,s.height=a.height,n=l.Generate.parseGradient(e,a))if("linear"===n.type){for(o=c.createLinearGradient(n.x0,n.y0,n.x1,n.y1),r=0,d=n.colorStops.length;d>r;r+=1)try{o.addColorStop(n.colorStops[r].stop,n.colorStops[r].color)}catch(h){i(["failed to add color stop: ",h,"; tried to add: ",n.colorStops[r],"; stop: ",r,"; in: ",e])}c.fillStyle=o,c.fillRect(0,0,a.width,a.height)}else if("circle"===n.type){for(o=c.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.rx),r=0,d=n.colorStops.length;d>r;r+=1)try{o.addColorStop(n.colorStops[r].stop,n.colorStops[r].color)}catch(h){i(["failed to add color stop: ",h,"; tried to add: ",n.colorStops[r],"; stop: ",r,"; in: ",e])}c.fillStyle=o,c.fillRect(0,0,a.width,a.height)}else if("ellipse"===n.type){var u=t.createElement("canvas"),p=u.getContext("2d"),g=Math.max(n.rx,n.ry),f=2*g;for(u.width=u.height=f,o=p.createRadialGradient(n.rx,n.ry,0,n.rx,n.ry,g),r=0,d=n.colorStops.length;d>r;r+=1)try{o.addColorStop(n.colorStops[r].stop,n.colorStops[r].color)}catch(h){i(["failed to add color stop: ",h,"; tried to add: ",n.colorStops[r],"; stop: ",r,"; in: ",e])}p.fillStyle=o,p.fillRect(0,0,f,f),c.fillStyle=n.colorStops[r-1].color,c.fillRect(0,0,s.width,s.height),c.drawImage(u,n.cx-n.rx,n.cy-n.ry,2*n.rx,2*n.ry)}return s}},l.Generate.ListAlpha=function(e){var t,a="";do t=e%26,a=String.fromCharCode(t+64)+a,e/=26;while(26*e>26);return a},l.Generate.ListRoman=function(e){var t,a=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],i=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],n="",o=a.length;if(0>=e||e>=4e3)return e;for(t=0;o>t;t+=1)for(;e>=i[t];)e-=i[t],n+=a[t];return n}}(),l.Parse=function(n,d){function s(){return Math.max(Math.max(dt.body.scrollWidth,dt.documentElement.scrollWidth),Math.max(dt.body.offsetWidth,dt.documentElement.offsetWidth),Math.max(dt.body.clientWidth,dt.documentElement.clientWidth))}function c(){return Math.max(Math.max(dt.body.scrollHeight,dt.documentElement.scrollHeight),Math.max(dt.body.offsetHeight,dt.documentElement.offsetHeight),Math.max(dt.body.clientHeight,dt.documentElement.clientHeight))}function h(e,t){var a=parseInt(ht(e,t),10);return isNaN(a)?0:a}function u(e,t,a,i,n,o){"transparent"!==o&&(e.setVariable("fillStyle",o),e.fillRect(t,a,i,n),rt+=1)}function p(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(e,t,a){return e.length>0?t+a.toUpperCase():void 0});case"uppercase":return e.toUpperCase();default:return e}}function g(e){return/^(normal|none|0px)$/.test(e)}function f(e,t,a,i){null!==e&&l.Util.trimText(e).length>0&&(i.fillText(e,t,a),rt+=1)}function m(e,t,a,i){var n=!1,o=ht(t,"fontWeight"),r=ht(t,"fontFamily"),d=ht(t,"fontSize");switch(parseInt(o,10)){case 401:o="bold";break;case 400:o="normal"}return e.setVariable("fillStyle",i),e.setVariable("font",[ht(t,"fontStyle"),ht(t,"fontVariant"),o,d,r].join(" ")),e.setVariable("textAlign",n?"right":"left"),"none"!==a?l.Util.Font(r,d,dt):void 0}function b(e,t,a,i,n){switch(t){case"underline":u(e,a.left,Math.round(a.top+i.baseline+i.lineWidth),a.width,1,n);break;case"overline":u(e,a.left,Math.round(a.top),a.width,1,n);break;case"line-through":u(e,a.left,Math.ceil(a.top+i.middle+i.lineWidth),a.width,1,n)}}function v(e,t,a,i){var n;if(st.rangeBounds)("none"!==a||0!==l.Util.trimText(t).length)&&(n=x(t,e.node,e.textOffset)),e.textOffset+=t.length;else if(e.node&&"string"==typeof e.node.nodeValue){var o=i?e.node.splitText(t.length):null;n=y(e.node),e.node=o}return n}function x(e,t,a){var i=dt.createRange();return i.setStart(t,a),i.setEnd(t,a+e.length),i.getBoundingClientRect()}function y(e){var t=e.parentNode,a=dt.createElement("wrapper"),i=e.cloneNode(!0);a.appendChild(e.cloneNode(!0)),t.replaceChild(a,e);var n=l.Util.Bounds(a);return t.replaceChild(i,a),n}function _(e,t,a){var i,n,o=a.ctx,r=ht(e,"color"),s=ht(e,"textDecoration"),c=ht(e,"textAlign"),h={node:t,textOffset:0};l.Util.trimText(t.nodeValue).length>0&&(t.nodeValue=p(t.nodeValue,ht(e,"textTransform")),c=c.replace(["-webkit-auto"],["auto"]),n=t.nodeValue.split(!d.letterRendering&&/^(left|right|justify|auto)$/.test(c)&&g(ht(e,"letterSpacing"))?/(\b| )/:""),i=m(o,e,s,r),d.chinese&&n.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),n.splice.apply(n,e))
}),n.forEach(function(e,t){var a=v(h,e,s,t<n.length-1);a&&(f(e,a.left,a.bottom,o),b(o,s,a,i,r))}))}function w(e,t){var a,i,n=dt.createElement("boundelement");return n.style.display="inline",a=e.style.listStyleType,e.style.listStyleType="none",n.appendChild(dt.createTextNode(t)),e.insertBefore(n,e.firstChild),i=l.Util.Bounds(n),e.removeChild(n),e.style.listStyleType=a,i}function k(e){var t=-1,a=1,i=e.parentNode.childNodes;if(e.parentNode){for(;i[++t]!==e;)1===i[t].nodeType&&a++;return a}return-1}function C(e,t){var a,i=k(e);switch(t){case"decimal":a=i;break;case"decimal-leading-zero":a=1===i.toString().length?i="0"+i.toString():i.toString();break;case"upper-roman":a=l.Generate.ListRoman(i);break;case"lower-roman":a=l.Generate.ListRoman(i).toLowerCase();break;case"lower-alpha":a=l.Generate.ListAlpha(i).toLowerCase();break;case"upper-alpha":a=l.Generate.ListAlpha(i)}return a+=". "}function S(e,t,a){var i,n,o,r=t.ctx,d=ht(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(d)){if(n=C(e,d),o=w(e,n),m(r,e,"none",ht(e,"color")),"inside"!==ht(e,"listStylePosition"))return;r.setVariable("textAlign","left"),i=a.left,f(n,i,o.bottom,r)}}function $(e){var t=n[e];return t&&t.succeeded===!0?t.img:!1}function E(e,t){var a=Math.max(e.left,t.left),i=Math.max(e.top,t.top),n=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height);return{left:a,top:i,width:n-a,height:o-i}}function T(e,t){var a;return t?"auto"!==e?(a=r(e),t.children.push(a),a):t:a=r(0)}function q(e,t,a,i,n){var o=h(t,"paddingLeft"),r=h(t,"paddingTop"),d=h(t,"paddingRight"),s=h(t,"paddingBottom");N(e,a,0,0,a.width,a.height,i.left+o+n[3].width,i.top+r+n[0].width,i.width-(n[1].width+n[3].width+o+d),i.height-(n[0].width+n[2].width+r+s))}function R(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:h(e,"border"+t+"Width"),color:ht(e,"border"+t+"Color")}})}function I(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return ht(e,"border"+t+"Radius")})}function M(e,t,a,i){var n=function(e,t,a){return{x:e.x+(t.x-e.x)*a,y:e.y+(t.y-e.y)*a}};return{start:e,startControl:t,endControl:a,end:i,subdivide:function(o){var r=n(e,t,o),d=n(t,a,o),s=n(a,i,o),l=n(r,d,o),c=n(d,s,o),h=n(l,c,o);return[M(e,r,l,h),M(h,c,s,i)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,a.x,a.y,i.x,i.y])},curveToReversed:function(i){i.push(["bezierCurve",a.x,a.y,t.x,t.y,e.x,e.y])}}}function L(e,t,a,i,n,o,r){t[0]>0||t[1]>0?(e.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(e),i[1].curveTo(e)):e.push(["line",o,r]),(a[0]>0||a[1]>0)&&e.push(["line",n[0].start.x,n[0].start.y])}function z(e,t,a,i,n,o,r){var d=[];return t[0]>0||t[1]>0?(d.push(["line",i[1].start.x,i[1].start.y]),i[1].curveTo(d)):d.push(["line",e.c1[0],e.c1[1]]),a[0]>0||a[1]>0?(d.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(d),d.push(["line",r[0].end.x,r[0].end.y]),r[0].curveToReversed(d)):(d.push(["line",e.c2[0],e.c2[1]]),d.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(d.push(["line",n[1].end.x,n[1].end.y]),n[1].curveToReversed(d)):d.push(["line",e.c4[0],e.c4[1]]),d}function A(e,t,a){var i=e.left,n=e.top,o=e.width,r=e.height,d=t[0][0],s=t[0][1],l=t[1][0],c=t[1][1],h=t[2][0],u=t[2][1],p=t[3][0],g=t[3][1],f=o-l,m=r-h,b=o-u,v=r-g;return{topLeftOuter:gt(i,n,d,s).topLeft.subdivide(.5),topLeftInner:gt(i+a[3].width,n+a[0].width,Math.max(0,d-a[3].width),Math.max(0,s-a[0].width)).topLeft.subdivide(.5),topRightOuter:gt(i+f,n,l,c).topRight.subdivide(.5),topRightInner:gt(i+Math.min(f,o+a[3].width),n+a[0].width,f>o+a[3].width?0:l-a[3].width,c-a[0].width).topRight.subdivide(.5),bottomRightOuter:gt(i+b,n+m,u,h).bottomRight.subdivide(.5),bottomRightInner:gt(i+Math.min(b,o+a[3].width),n+Math.min(m,r+a[0].width),Math.max(0,u-a[1].width),Math.max(0,h-a[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:gt(i,n+v,p,g).bottomLeft.subdivide(.5),bottomLeftInner:gt(i+a[3].width,n+v,Math.max(0,p-a[3].width),Math.max(0,g-a[2].width)).bottomLeft.subdivide(.5)}}function B(e,t,a,i,n){var o=ht(e,"backgroundClip"),r=[];switch(o){case"content-box":case"padding-box":L(r,i[0],i[1],t.topLeftInner,t.topRightInner,n.left+a[3].width,n.top+a[0].width),L(r,i[1],i[2],t.topRightInner,t.bottomRightInner,n.left+n.width-a[1].width,n.top+a[0].width),L(r,i[2],i[3],t.bottomRightInner,t.bottomLeftInner,n.left+n.width-a[1].width,n.top+n.height-a[2].width),L(r,i[3],i[0],t.bottomLeftInner,t.topLeftInner,n.left+a[3].width,n.top+n.height-a[2].width);break;default:L(r,i[0],i[1],t.topLeftOuter,t.topRightOuter,n.left,n.top),L(r,i[1],i[2],t.topRightOuter,t.bottomRightOuter,n.left+n.width,n.top),L(r,i[2],i[3],t.bottomRightOuter,t.bottomLeftOuter,n.left+n.width,n.top+n.height),L(r,i[3],i[0],t.bottomLeftOuter,t.topLeftOuter,n.left,n.top+n.height)}return r}function F(e,t,a){var i,n,o,r,d,s,l=t.left,c=t.top,h=t.width,u=t.height,p=I(e),g=A(t,p,a),f={clip:B(e,g,a,p,t),borders:[]};for(i=0;4>i;i++)if(a[i].width>0){switch(n=l,o=c,r=h,d=u-a[2].width,i){case 0:d=a[0].width,s=z({c1:[n,o],c2:[n+r,o],c3:[n+r-a[1].width,o+d],c4:[n+a[3].width,o+d]},p[0],p[1],g.topLeftOuter,g.topLeftInner,g.topRightOuter,g.topRightInner);break;case 1:n=l+h-a[1].width,r=a[1].width,s=z({c1:[n+r,o],c2:[n+r,o+d+a[2].width],c3:[n,o+d],c4:[n,o+a[0].width]},p[1],p[2],g.topRightOuter,g.topRightInner,g.bottomRightOuter,g.bottomRightInner);break;case 2:o=o+u-a[2].width,d=a[2].width,s=z({c1:[n+r,o+d],c2:[n,o+d],c3:[n+a[3].width,o],c4:[n+r-a[2].width,o]},p[2],p[3],g.bottomRightOuter,g.bottomRightInner,g.bottomLeftOuter,g.bottomLeftInner);break;case 3:r=a[3].width,s=z({c1:[n,o+d+a[2].width],c2:[n,o],c3:[n+r,o+a[0].width],c4:[n+r,o+d]},p[3],p[0],g.bottomLeftOuter,g.bottomLeftInner,g.topLeftOuter,g.topLeftInner)}f.borders.push({args:s,color:a[i].color})}return f}function O(e,t){var a=e.drawShape();return t.forEach(function(e,t){a[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),a}function P(e,t,a){"transparent"!==a&&(e.setVariable("fillStyle",a),O(e,t),e.fill(),rt+=1)}function D(e,t,a){var n,o,r=dt.createElement("valuewrap"),d=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];d.forEach(function(t){try{r.style[t]=ht(e,t)}catch(a){i("html2canvas: Parse: Exception caught in renderFormValue: "+a.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(r.style.lineHeight=ht(e,"height")),r.style.top=t.top+"px",r.style.left=t.left+"px",n="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value,n||(n=e.placeholder),o=dt.createTextNode(n),r.appendChild(o),ct.appendChild(r),_(e,o,a),ct.removeChild(r)}function N(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1)),rt+=1}function U(a,n){var o=e.getComputedStyle(a,n);if(o&&o.content&&"none"!==o.content&&"-moz-alt-content"!==o.content){var r=o.content+"",d=r.substr(0,1);d===r.substr(r.length-1)&&d.match(/'|"/)&&(r=r.substr(1,r.length-2));var s="url"===r.substr(0,3),c=t.createElement(s?"img":"span");return c.className=ut+"-before "+ut+"-after",Object.keys(o).filter(j).forEach(function(e){try{c.style[e]=o[e]}catch(t){i(["Tried to assign readonly property ",e,"Error:",t])}}),s?c.src=l.Util.parseBackgroundImage(r)[0].args[0]:c.innerHTML=r,c}}function j(t){return isNaN(e.parseInt(t,10))}function G(e,t){var a=U(e,":before"),i=U(e,":after");(a||i)&&(a&&(e.className+=" "+ut+"-before",e.parentNode.insertBefore(a,e),at(a,t,!0),e.parentNode.removeChild(a),e.className=e.className.replace(ut+"-before","").trim()),i&&(e.className+=" "+ut+"-after",e.appendChild(i),at(i,t,!0),e.removeChild(i),e.className=e.className.replace(ut+"-after","").trim()))}function V(e,t,a,i){var n=Math.round(i.left+a.left),o=Math.round(i.top+a.top);e.createPattern(t),e.translate(n,o),e.fill(),e.translate(-n,-o)}function W(e,t,a,i,n,o,r,d){var s=[];s.push(["line",Math.round(n),Math.round(o)]),s.push(["line",Math.round(n+r),Math.round(o)]),s.push(["line",Math.round(n+r),Math.round(d+o)]),s.push(["line",Math.round(n),Math.round(d+o)]),O(e,s),e.save(),e.clip(),V(e,t,a,i),e.restore()}function H(e,t,a){u(e,t.left,t.top,t.width,t.height,a)}function X(e,t,a,i,n){var o=l.Util.BackgroundSize(e,t,i,n),r=l.Util.BackgroundPosition(e,t,i,n,o),d=ht(e,"backgroundRepeat").split(",").map(function(e){return e.trim()});switch(i=J(i,o),d=d[n]||d[0]){case"repeat-x":W(a,i,r,t,t.left,t.top+r.top,99999,i.height);break;case"repeat-y":W(a,i,r,t,t.left+r.left,t.top,i.width,99999);break;case"no-repeat":W(a,i,r,t,t.left+r.left,t.top+r.top,i.width,i.height);break;default:V(a,i,r,{top:t.top,left:t.left,width:i.width,height:i.height})}}function Y(e,t,a){for(var n,o=ht(e,"backgroundImage"),r=l.Util.parseBackgroundImage(o),d=r.length;d--;)if(o=r[d],o.args&&0!==o.args.length){var s="url"===o.method?o.args[0]:o.value;n=$(s),n?X(e,t,a,n,d):i("html2canvas: Error loading background:",o)}}function J(e,t){if(e.width===t.width&&e.height===t.height)return e;var a,i=dt.createElement("canvas");return i.width=t.width,i.height=t.height,a=i.getContext("2d"),N(a,e,0,0,e.width,e.height,0,0,t.width,t.height),i}function Q(e,t,a){var i=ht(t,"opacity")*(a?a.opacity:1);return e.setVariable("globalAlpha",i),i}function K(e,t,a){var i=o(t?a.width:s(),t?a.height:c()),n={ctx:i,zIndex:T(ht(e,"zIndex"),t?t.zIndex:null),opacity:Q(i,e,t),cssPosition:ht(e,"position"),borders:R(e),clip:t&&t.clip?l.Util.Extend({},t.clip):null};return d.useOverflow===!0&&/(hidden|scroll|auto)/.test(ht(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(n.clip=n.clip?E(n.clip,a):a),n.zIndex.children.push(n),n}function Z(e,t,a){var i={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};return a&&(i=E(i,a)),i}function et(e,t,a){var n,o=l.Util.Bounds(e),r=lt.test(e.nodeName)?"#efefef":ht(e,"backgroundColor"),d=K(e,t,o),s=d.borders,c=d.ctx,h=Z(s,o,d.clip),u=F(e,o,s);switch(O(c,u.clip),c.save(),c.clip(),h.height>0&&h.width>0&&(H(c,o,r),Y(e,h,c)),c.restore(),u.borders.forEach(function(e){P(c,e.args,e.color)}),a||G(e,d),e.nodeName){case"IMG":(n=$(e.getAttribute("src")))?q(c,e,n,o,s):i("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder).length>0&&D(e,o,d);break;case"TEXTAREA":(e.value||e.placeholder||"").length>0&&D(e,o,d);break;case"SELECT":(e.options||e.placeholder||"").length>0&&D(e,o,d);break;case"LI":S(e,d,h);break;case"CANVAS":q(c,e,e,o,s)}return d}function tt(e){return"none"!==ht(e,"display")&&"hidden"!==ht(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")}function at(e,t,a){tt(e)&&(t=et(e,t,a)||t,lt.test(e.nodeName)||l.Util.Children(e).forEach(function(i){1===i.nodeType?at(i,t,a):3===i.nodeType&&_(e,i,t)}))}function it(e,t){function a(e){var t,i,n,o,d,s=l.Util.Children(e),c=s.length;for(d=0;c>d;d+=1)if(o=s[d],3===o.nodeType)r+=o.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(1===o.nodeType&&!/^(script|meta|title)$/.test(o.nodeName.toLowerCase())){if(r+="<"+o.nodeName.toLowerCase(),o.hasAttributes())for(t=o.attributes,n=t.length,i=0;n>i;i+=1)r+=" "+t[i].name+'="'+t[i].value+'"';r+=">",a(o),r+="</"+o.nodeName.toLowerCase()+">"}}var i=new Image,n=s(),o=c(),r="";a(e),i.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+n+"' height='"+o+"'>","<foreignObject width='"+n+"' height='"+o+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",r.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),i.onload=function(){t.svgRender=i}}function nt(){var e=et(ot,null);return st.svgRendering&&it(t.documentElement,e),Array.prototype.slice.call(ot.children,0).forEach(function(t){at(t,e)}),e.backgroundColor=ht(t.documentElement,"backgroundColor"),ct.removeChild(pt),e}if(1!=bds.qa.ShortCut.close_status){bds.qa.ShortCut.scrollTop=e.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop,e.scroll(0,0);var ot=d.elements===a?t.body:d.elements[0],rt=0,dt=ot.ownerDocument,st=l.Util.Support(d,dt),lt=new RegExp("("+d.ignoreElements+")"),ct=dt.body,ht=l.Util.getCSS,ut="___html2canvas___pseudoelement",pt=dt.createElement("style");pt.innerHTML="."+ut+'-before:before { content: "" !important; display: none !important; }.'+ut+'-after:after { content: "" !important; display: none !important; }',ct.appendChild(pt),n=n||{};var gt=function(e){return function(t,a,i,n){var o=i*e,r=n*e,d=t+i,s=a+n;return{topLeft:M({x:t,y:s},{x:t,y:s-r},{x:d-o,y:a},{x:d,y:a}),topRight:M({x:t,y:a},{x:t+o,y:a},{x:d,y:s-r},{x:d,y:s}),bottomRight:M({x:d,y:a},{x:d,y:a+r},{x:t+o,y:s},{x:t,y:s}),bottomLeft:M({x:d,y:s},{x:d-o,y:s},{x:t,y:a+r},{x:t,y:a})}}}(4*((Math.sqrt(2)-1)/3));return nt()}},l.Preload=function(n){function o(e){$.href=e,$.href=$.href;var t=$.protocol+$.host;return t===m}function r(){i("html2canvas: start: images: "+y.numLoaded+" / "+y.numTotal+" (failed: "+y.numFailed+")"),!y.firstRun&&y.numLoaded>=y.numTotal&&(i("Finished loading images: # "+y.numTotal+" (failed: "+y.numFailed+")"),"function"==typeof n.complete&&n.complete(y))}function d(t,i,o){var d,s,l=n.proxy;$.href=t,t=$.href,d="html2canvas_"+_++,o.callbackname=d,l+=l.indexOf("?")>-1?"&":"?",l+="url="+encodeURIComponent(t)+"&callback="+d,s=k.createElement("script"),e[d]=function(t){"error:"===t.substring(0,6)?(o.succeeded=!1,y.numLoaded++,y.numFailed++,r()):(f(i,o),i.src=t),e[d]=a;try{delete e[d]}catch(n){}s.parentNode.removeChild(s),s=null,delete o.script,delete o.callbackname},s.setAttribute("type","text/javascript"),s.setAttribute("src",l),o.script=s,e.document.body.appendChild(s)}function s(t,a){var i=e.getComputedStyle(t,a),n=i.content;"url"===n.substr(0,3)&&b.loadImage(l.Util.parseBackgroundImage(n)[0].args[0]),p(i.backgroundImage,t)}function c(e){s(e,":before"),s(e,":after")}function h(e,t){var i=l.Generate.Gradient(e,t);i!==a&&(y[e]={img:i,succeeded:!0},y.numTotal++,y.numLoaded++,r())}function u(e){return e&&e.method&&e.args&&e.args.length>0}function p(e,t){var i;l.Util.parseBackgroundImage(e).filter(u).forEach(function(e){"url"===e.method?b.loadImage(e.args[0]):e.method.match(/\-?gradient$/)&&(i===a&&(i=l.Util.Bounds(t)),h(e.value,i))})}function g(e){var t=!1;try{l.Util.Children(e).forEach(function(e){g(e)})}catch(n){}try{t=e.nodeType}catch(o){t=!1,i("html2canvas: failed to access some element's nodeType - Exception: "+o.message)}if(1===t||t===a){c(e);try{p(l.Util.getCSS(e,"backgroundImage"),e)}catch(n){i("html2canvas: failed to get background-image - Exception: "+n.message)}p(e)}}function f(t,i){t.onload=function(){i.timer!==a&&e.clearTimeout(i.timer),y.numLoaded++,i.succeeded=!0,t.onerror=t.onload=null,r()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(i.timer),n.proxy)){var a=t.src;return t=new Image,i.img=t,t.src=a,void d(t.src,t,i)}y.numLoaded++,y.numFailed++,i.succeeded=!1,t.onerror=t.onload=null,r()}}var m,b,v,x,y={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},_=0,w=n.elements[0]||t.body,k=w.ownerDocument,C=k.images,S=C.length,$=k.createElement("a"),E=function(e){return e.crossOrigin!==a}(new Image);for($.href=e.location.href,m=$.protocol+$.host,b={loadImage:function(t){var i,r;t&&y[t]===a&&(i=new Image,t.match(/data:image\/.*;base64,/i)?(i.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),r=y[t]={img:i},y.numTotal++,f(i,r)):o(t)||n.allowTaint===!0?(r=y[t]={img:i},y.numTotal++,f(i,r),i.src=t):E&&!n.allowTaint&&n.useCORS?(i.crossOrigin="anonymous",r=y[t]={img:i},y.numTotal++,f(i,r),i.src=t,i.customComplete=function(){this.img.complete?this.img.onerror():this.timer=e.setTimeout(this.img.customComplete,100)}.bind(r),i.customComplete()):n.proxy&&(r=y[t]={img:i},y.numTotal++,d(t,i,r)))},cleanupDOM:function(o){var d,s;if(!y.cleanupDone){i(o&&"string"==typeof o?"html2canvas: Cleanup because: "+o:"html2canvas: Cleanup after timeout: "+n.timeout+" ms.");for(s in y)if(y.hasOwnProperty(s)&&(d=y[s],"object"==typeof d&&d.callbackname&&d.succeeded===a)){e[d.callbackname]=a;try{delete e[d.callbackname]}catch(l){}d.script&&d.script.parentNode&&(d.script.setAttribute("src","about:blank"),d.script.parentNode.removeChild(d.script)),y.numLoaded++,y.numFailed++,i("html2canvas: Cleaned up failed img: '"+s+"' Steps: "+y.numLoaded+" / "+y.numTotal)}e.stop!==a?e.stop():t.execCommand!==a&&t.execCommand("Stop",!1),t.close!==a&&t.close(),y.cleanupDone=!0,o&&"string"==typeof o||r()}},renderingDone:function(){x&&e.clearTimeout(x)}},n.timeout>0&&(x=e.setTimeout(b.cleanupDOM,n.timeout)),i("html2canvas: Preload starts: finding background-images"),y.firstRun=!0,g(w),i("html2canvas: Preload: Finding images"),v=0;S>v;v+=1)b.loadImage(C[v].getAttribute("src"));return y.firstRun=!1,i("html2canvas: Preload: Done."),y.numTotal===y.numLoaded&&r(),b},l.Renderer=function(e,i){function n(e){var t=[],a=function(e){var i=[],n=[];e.children.forEach(function(e){e.children&&e.children.length>0?(i.push(e),n.push(e.zindex)):t.push(e)}),n.sort(function(e,t){return e-t}),n.forEach(function(e){var t;i.some(function(a,i){return t=i,a.zindex===e}),a(i.splice(t,1)[0])})};return e&&e.zIndex&&a(e.zIndex),t}function o(e){var t;if("string"==typeof i.renderer&&l.Renderer[e]!==a)t=l.Renderer[e](i);else{if("function"!=typeof e)throw new Error("Unknown renderer");t=e(i)}if("function"!=typeof t)throw new Error("Invalid renderer defined");return t}return o(i.renderer)(e,i,t,n(e),l)},l.Util.Support=function(e,t){function n(){var e=new Image,n=t.createElement("canvas"),o=n.getContext===a?!1:n.getContext("2d");if(o===!1)return!1;n.width=n.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{o.drawImage(e,0,0),n.toDataURL()}catch(r){return!1}return i("html2canvas: Parse: SVG powered rendering available"),!0}function o(){var e,a,i,n,o=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(a=t.createElement("boundtest"),a.style.height="123px",a.style.display="block",t.body.appendChild(a),e.selectNode(a),i=e.getBoundingClientRect(),n=i.height,123===n&&(o=!0),t.body.removeChild(a))),o}return{rangeBounds:o(),svgRendering:e.svgRendering&&n()}},e.html2canvas=function(t,a){t=t.length?t:[t];var n,o,r={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return r=l.Util.Extend(a,r),l.logging=r.logging,r.complete=function(e){("function"!=typeof r.onpreloaded||r.onpreloaded(e)!==!1)&&(n=l.Parse(e,r),("function"!=typeof r.onparsed||r.onparsed(n)!==!1)&&(o=l.Renderer(n,r),"function"==typeof r.onrendered&&r.onrendered(o)))},e.setTimeout(function(){l.Preload(r)},0),{render:function(e,t){return l.Renderer(e,l.Util.Extend(t,r))},parse:function(e,t){return l.Parse(e,l.Util.Extend(t,r))},preload:function(e){return l.Preload(l.Util.Extend(e,r))},log:i}},e.html2canvas.log=i,e.html2canvas.Renderer={Canvas:a},l.Renderer.Canvas=function(e){function n(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}function o(e){if(-1===l.indexOf(e.arguments[0].src)){h.drawImage(e.arguments[0],0,0);try{h.getImageData(0,0,1,1)}catch(t){return c=s.createElement("canvas"),h=c.getContext("2d"),!1}l.push(e.arguments[0].src)}return!0}function r(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e}function d(t,a){switch(a.type){case"variable":t[a.name]=a.arguments;break;case"function":if("createPattern"===a.name){if(a.arguments[0].width>0&&a.arguments[0].height>0)try{t.fillStyle=t.createPattern(a.arguments[0],"repeat")}catch(r){i("html2canvas: Renderer: Error creating pattern",r.message)}}else"drawShape"===a.name?n(t,a.arguments):"drawImage"===a.name?a.arguments[8]>0&&a.arguments[7]>0&&(!e.taintTest||e.taintTest&&o(a))&&t.drawImage.apply(t,a.arguments):t[a.name].apply(t,a.arguments)}}e=e||{};var s=t,l=[],c=t.createElement("canvas"),h=c.getContext("2d"),u=e.canvas||s.createElement("canvas");return function(e,t,n,o,s){var l,c,h,p,g,f,m=u.getContext("2d");if(u.width=u.style.width=t.width||e.ctx.width,u.height=u.style.height=t.height||e.ctx.height,f=m.fillStyle,m.fillStyle=r(e.backgroundColor)&&t.background!==a?t.background:e.backgroundColor,m.fillRect(0,0,u.width,u.height),m.fillStyle=f,t.svgRendering&&e.svgRender!==a)m.drawImage(e.svgRender,0,0);else for(c=0,h=o.length;h>c;c+=1)l=o.splice(0,1)[0],l.canvasPosition=l.canvasPosition||{},m.textBaseline="bottom",l.clip&&(m.save(),m.beginPath(),m.rect(l.clip.left,l.clip.top,l.clip.width,l.clip.height),m.clip()),l.ctx.storage&&l.ctx.storage.forEach(d.bind(null,m)),l.clip&&m.restore();return i("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),h=t.elements.length,1===h&&"object"==typeof t.elements[0]&&"BODY"!==t.elements[0].nodeName?(g=s.Util.Bounds(t.elements[0]),p=n.createElement("canvas"),p.width=g.width,p.height=g.height,m=p.getContext("2d"),m.drawImage(u,g.left,g.top,g.width,g.height,0,0,g.width,g.height),u=null,p):u}}}(window,document),bds.qa.ShortCut.feedback_right_dialog=bds.qa.ShortCut.feedback_right_dialog||function(){var e="",t=function(t){if(0==bds.qa.ShortCut.container_exist)html2canvas(document.body,{onrendered:function(e){if(window.scroll(0,bds.qa.ShortCut.scrollTop),1!=bds.qa.ShortCut.close_status){e.id="feedback_right_dialog_pagecanvas";var i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.style.background="#666",i.style.zIndex="5000",i.id="feedback_right_dialog_canvas";var n=document.getElementById("feedback_right_dialog_canvas");n||(document.body.appendChild(i),document.body.appendChild(e)),$("#feedback_js_loading").remove(),1!=bds.qa.ShortCut.close_status&&a(t),e=""}}}),html2canvas(document.body,{proxy:"https://sp2.baidu.com/-uV1bjeh1BF3odCf/getProxyImage.php",onrendered:function(t){window.scroll(0,bds.qa.ShortCut.scrollTop),1!=bds.qa.ShortCut.close_status&&($("#feedback_right_dialog_pagecanvas").remove(),e=$("#feedback_right_dialog_pagecanvas2"),t.id="feedback_right_dialog_pagecanvas2",document.body.appendChild(t),$("#image_creating_tips").remove(),t="")}});else{if(0==bds.qa.ShortCut.container_exist){var i=document.createElement("div");i.style.background="#666",i.style.width="100%",i.style.height="100%",i.id="feedback_right_dialog_pagecanvas",document.body.appendChild(i)}$("#feedback_js_loading").remove(),a(t)}},a=function(t){var a={init:function(){this.addDrawTool(),bds.qa.ShortCut.short_cut_init=!1,0==bds.qa.ShortCut.container_exist?(a.bindinit(t),$("#feedback_jietu").on("click",function(){bds.qa.ShortCut.short_cut_init=!0;var e=document.getElementById("feedback_right_dialog_canvas");if(e){$(e).remove();var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.style.background="#666",t.style.zIndex="5000",t.id="feedback_right_dialog_canvas",document.body.appendChild(t)}a.load(),a.bind(),a.clear(),$("#feedback_right_dialog_canvas").css("cursor","crosshair")})):(bds.qa.ShortCut.short_cut_init=!1,$("#feedback_right_post_save").on("click",function(){var e=$("#feedback_des_content").val();if(""==e||e==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈描述",100),!1;var t=$("#feedback_jietu").val()||"",a=bds.qa.ShortCut.checkImage(t);return t&&!a?(bds.qa.ShortCut.popwindow("请上传PNG,JPEG,GIF等图片文件",100),$("#feedback_jietu").val(""),$(".feedback_jietu_txt").html(""),!1):($("#feedback_user_name").val($(".account-wrap a").eq(0).text()),$("#feedback_userAgent").val(navigator.userAgent),$("#feedback_issuehtml").val(encodeURIComponent($("html").html())),$("#feedback_query").val($("#baidu_translate_input").val()),$("#feedback_translate_output").val($(".target-output span").text()),void bds.qa.ShortCut.postCrossDomainDataForm(bds.qa.ShortCut.sendDataResult))}))},addDrawTool:function(){bds.qa.ShortCut.init_action_dialog()},load:function(){this.x=[],this.y=[],this.clickDrag=[],this.Rectangles=[],this.lock=!1,this.storageColor="#000000",this.$=function(e){return"string"==typeof e?document.getElementById(e):e},this.canvas=this.$("feedback_right_dialog_canvas"),this.pageCanvas=this.$("feedback_right_dialog_pagecanvas")||this.$("feedback_right_dialog_pagecanvas2"),this.cxt=this.canvas.getContext("2d"),this.cxt.lineJoin="round",this.cxt.lineWidth=2,this.cancelx=this.$("feedback-close_x"),this.saveAs=this.$("feedback_right_dialog_save"),this.w=this.pageCanvas.width,this.h=this.pageCanvas.height,this.touch="createTouch"in document,this.StartEvent=this.touch?"touchstart":"mousedown",this.MoveEvent=this.touch?"touchmove":"mousemove",this.EndEvent=this.touch?"touchend":"mouseup",this.drawTool=this.$("baidu_feedback_right_dialog"),this.callback=t},bindinit:function(e){0==bds.qa.ShortCut.bindclick&&(bds.qa.ShortCut.bindclick=1,$("#feedback_right_dialog_save").on("click",function(){if(0==bds.qa.ShortCut.short_cut_init){var t=$("#feedback_des_content").val();if(""==t||t==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈描述",100),!1;var a=$("#feedback_email").val(),i=$('input:radio[name="issuetype"]:checked').val();e("",t,a,i)}}))},bind:function(){var a=this,i=$("#baidu_feedback_right_dialog");i||($("#baidu_feedback_right_dialog").remove(),$("#feedback_right_dialog_canvas").remove(),$("#feedback_right_dialog_pagecanvas").remove(),$("#feedback_right_dialog_pagecanvas2").remove(),$("#popwindow").remove(),bds.qa.ShortCut.close_status=!0);var n="",o=function(){var i=document.getElementById("feedback_right_dialog_pagecanvas2");a.h=i.height,a.w=i.width;var n=document.createElement("canvas");n.width=a.w,n.height=a.h;var o=n.getContext("2d");o.fillStyle="#666",o.fillRect(0,0,a.w,a.h),o.globalAlpha=1,o.drawImage(a.canvas,0,0,a.w,a.h),o.globalAlpha=.5,""!=e?o.drawImage(i,0,0,a.w,a.h):o.drawImage(a.pageCanvas,0,0,a.w,a.h);var r=n.toDataURL("image/png");if(des_info=$("#feedback_des_content").val(),""==des_info||des_info==bds.qa.ShortCut.issuePlaceholder)return void bds.qa.ShortCut.popwindow("请填写反馈描述",100);var d=$("#feedback_email").val(),s=$('input:radio[name="issuetype"]:checked').val();if(a.callback)t(r,des_info,d,s);else{var l=window.open("about:blank","image from canvas");l.document.write("<img src='"+r+"' alt='from canvas'/>")}},r=function(){if(des_info=$("#feedback_des_content").val(),""==des_info||des_info==bds.qa.ShortCut.issuePlaceholder)return bds.qa.ShortCut.popwindow("请填写反馈描述",100),void window.clearTimeout(n);var e=document.getElementById("feedback_right_dialog_pagecanvas2");if(e)window.clearTimeout(n),o();else{var t=document.getElementById("image_creating_tips");t||($(".feedback_action").css("margin-top","45px"),$(".feedback_action").append("<div id='image_creating_tips' style='height:25px;line-height:20px;'><img src='https://sp2.baidu.com/-uV1bjeh1BF3odCf/feedback/images/loading_2.gif'/><span style='color:red;font-size:12px;margin-left:15px;'>截图生成中，请稍后提交...</span></div>")),n=setTimeout(r,500)}};this.cancelx.onclick=function(){a.removeNode(a.pageCanvas),a.removeNode(a.canvas),a.removeNode(a.drawTool),$("#popwindow").remove(),$("#feedbackdialog").remove()},this.saveAs.onclick=function(){r()},this.canvas["on"+a.StartEvent]=function(e){var t=a.touch?e.touches[0]:e,i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;a.movePoint(t.clientX-t.target.offsetLeft,t.clientY-t.target.offsetTop+i),a.lock=!0},this.canvas["on"+a.MoveEvent]=function(e){e=e?e:window.event;var t=e.srcElement?e.srcElement:e.target;if("DIV"==t.tagName&&"feedback_right_dialog"==t.className)return!1;var i=a.touch?e.touches[0]:e;if(a.lock){var n=i.clientX-i.target.offsetLeft,o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=i.clientY-i.target.offsetTop+o;a.movePoint(n,r,!0),a.drawRectangle()}},this.canvas["on"+a.EndEvent]=function(){a.lock=!1,a.Rectangles.push([a.x[0],a.y[0],a.x[a.x.length-1]-a.x[0],a.y[a.y.length-1]-a.y[0]]),a.x=[],a.y=[],a.clickDrag=[],a.drawTool.style.display="block"}},movePoint:function(e,t){this.x.push(e),this.y.push(t),this.clickDrag.push(t)},drawRectangle:function(){var e=this.x[this.x.length-1]-this.x[0],t=this.y[this.y.length-1]-this.y[0];this.clear();var a=this.Rectangles.length;if(a)for(a-=1;a>=0;a--){var i=this.Rectangles[a],n=i[0],o=i[1],r=i[2],d=i[3];this.cxt.strokeStyle="red",this.cxt.lineWidth="4",this.cxt.strokeRect(n,o,r,d),this.cxt.fillStyle="#FFFFFF",this.cxt.fillRect(n,o,r,d)}this.cxt.strokeStyle="red",this.cxt.lineWidth="4",this.cxt.strokeRect(this.x[0],this.y[0],e,t),this.cxt.fillStyle="#FFFFFF",this.cxt.fillRect(this.x[0],this.y[0],e,t)},clear:function(){this.cxt.clearRect(0,0,this.w,this.h)},removeNode:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}};a.init()};return{load:t}}(),0==e&&(bds.qa.ShortCut.feedback_right_dialog.load(bds.qa.ShortCut.iFeedback),e=!0)},initRightBar:function(){var e=function(e){var t=new Image;t.src=e,t.complete||(t.onload=function(){t.onload=null})};e("https://sp2.baidu.com/-uV1bjeh1BF3odCf/feedback/images/jietu_btn.jpg"),e("https://sp2.baidu.com/-uV1bjeh1BF3odCf/feedback/images/upload_btn.png"),0==bds.qa.ShortCut.load_script_succ?bds.qa.ShortCut.load_first():bds.qa.ShortCut.load_repeat(),bds.qa.ShortCut.load_script_succ=!0},sendDataResult:function(e){return e?bds.qa.ShortCut.popwindowEnd("发送成功",200):bds.qa.ShortCut.popwindow("发送失败",200),!1},sendRequestData:function(e,t,a,i){var n={},o=$("#shujufasongzhong");o||($(".feedback_action").css("margin-top","45px"),$(".feedback_action").append('<div id="shujufasongzhong" style="color:grey;text-align:left;">数据发送中...</div>')),n.issuedesc=e,n.email=t,n.user_name=$(".account-wrap a").eq(0).text(),n.userAgent=navigator.userAgent;-1!==window.navigator.userAgent.indexOf("Chrome");n.type=bds.qa.ShortCut.product_id,n.issuehtml=encodeURIComponent($("html").html()),n.issueimage=a,n.issuetype=i,n.query=$("#baidu_translate_input").val(),n.translate_output=$(".target-output span").text(),$("#baidu_feedback_mask").remove(),$("#wrapOut").remove(),$("#feedback_right_dialog_pagecanvas").remove(),$("#feedback_right_dialog_pagecanvas2").remove(),$("#feedback_right_dialog_canvas").remove(),bds.qa.ShortCut.postCrossDomainData(n.query,n.translate_output,n.issuedesc,n.email,n.user_name,n.userAgent,n.type,n.issuehtml,n.issueimage,n.issuetype,bds.qa.ShortCut.base_url_path+"/index.php/feedback/zx/sendData",bds.qa.ShortCut.sendDataResult)},iFeedback:function(e,t,a,i){bds.qa.ShortCut.sendRequestData(t,a,e,i)},postCrossDomainData:function(e,t,a,i,n,o,r,d,s,l,c,h){var u=document.createElement("iframe"),p="bds_qa_feedback_frame_id";$("#bds_qa_feedback_frame_id").remove(),document.body.appendChild(u),u.style.display="none",u.contentWindow.name=p;var g=document.createElement("form");g.target=p,g.action=c,g.method="POST";var f=document.createElement("input");f.type="hidden",f.name="issuedesc",f.value=a,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="query",f.value=e,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="translate_output",f.value=t,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="email",f.value=i,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="user_name",f.value=n,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="issuetype",f.value=l,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="userAgent",f.value=o,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="type",f.value=r,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="issuehtml",f.value=d,g.appendChild(f);var f=document.createElement("input");f.type="hidden",f.name="issueimage",f.value=s,g.appendChild(f),document.body.appendChild(g),g.submit(),h(!0),u.onload=function(){$(u).remove(),$(g).remove()
}},postCrossDomainDataForm:function(e){var t=document.createElement("iframe"),a="bds_qa_feedback_frame_id";$("#bds_qa_feedback_frame_id").remove(),document.body.appendChild(t),t.style.display="none",t.contentWindow.name=a;var i=document.getElementById("feedback_right_post_form");return null==i?void $(t).remove():(i.enctype="multipart/form-data",i.target=a,i.method="POST",i.submit(),e(!0),void(t.onload=function(){$(t).remove(),$(i).remove()}))},checkImage:function(e){var t=e.lastIndexOf("."),a=e.substring(t+1).toUpperCase();return"JPG"!=a&&"GIF"!=a&&"PNG"!=a&&"JPEG"!=a?!1:!0},checkFileType:function(e){var t=e.value,a=bds.qa.ShortCut.checkImage(t);return a?void(document.getElementById("feedback_jietu_txt").innerHTML=e.value):(bds.qa.ShortCut.popwindow("请上传PNG,JPEG,JPG,GIF等图片文件",100),$("#feedback_jietu").val(""),$(".feedback_jietu_txt").html(""),!1)}},bds.qa.ShortCut.initRightBar();